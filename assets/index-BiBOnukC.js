var e=Object.defineProperty,t=t=>{let n={};for(var r in t)e(n,r,{get:t[r],enumerable:!0});return n};(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function n(e){let t=Object.create(null);for(let n of e.split(`,`))t[n]=1;return e=>e in t}var r={},i=[],a=()=>{},o=()=>!1,s=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),c=e=>e.startsWith(`onUpdate:`),l=Object.assign,u=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},d=Object.prototype.hasOwnProperty,f=(e,t)=>d.call(e,t),p=Array.isArray,m=e=>C(e)===`[object Map]`,h=e=>C(e)===`[object Set]`,g=e=>C(e)===`[object Date]`,_=e=>typeof e==`function`,v=e=>typeof e==`string`,y=e=>typeof e==`symbol`,b=e=>typeof e==`object`&&!!e,x=e=>(b(e)||_(e))&&_(e.then)&&_(e.catch),S=Object.prototype.toString,C=e=>S.call(e),w=e=>C(e).slice(8,-1),ee=e=>C(e)===`[object Object]`,T=e=>v(e)&&e!==`NaN`&&e[0]!==`-`&&``+parseInt(e,10)===e,E=n(`,key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted`),D=e=>{let t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},te=/-\w/g,O=D(e=>e.replace(te,e=>e.slice(1).toUpperCase())),ne=/\B([A-Z])/g,k=D(e=>e.replace(ne,`-$1`).toLowerCase()),re=D(e=>e.charAt(0).toUpperCase()+e.slice(1)),ie=D(e=>e?`on${re(e)}`:``),A=(e,t)=>!Object.is(e,t),ae=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},oe=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},se=e=>{let t=parseFloat(e);return isNaN(t)?e:t},ce,le=()=>ce||=typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:typeof global<`u`?global:{};function ue(e){if(p(e)){let t={};for(let n=0;n<e.length;n++){let r=e[n],i=v(r)?me(r):ue(r);if(i)for(let e in i)t[e]=i[e]}return t}else if(v(e)||b(e))return e}var de=/;(?![^(]*\))/g,fe=/:([^]+)/,pe=/\/\*[^]*?\*\//g;function me(e){let t={};return e.replace(pe,``).split(de).forEach(e=>{if(e){let n=e.split(fe);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function j(e){let t=``;if(v(e))t=e;else if(p(e))for(let n=0;n<e.length;n++){let r=j(e[n]);r&&(t+=r+` `)}else if(b(e))for(let n in e)e[n]&&(t+=n+` `);return t.trim()}var he=`itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`,ge=n(he);he+``;function _e(e){return!!e||e===``}function ve(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ye(e[r],t[r]);return n}function ye(e,t){if(e===t)return!0;let n=g(e),r=g(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=y(e),r=y(t),n||r)return e===t;if(n=p(e),r=p(t),n||r)return n&&r?ve(e,t):!1;if(n=b(e),r=b(t),n||r){if(!n||!r||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e){let r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!ye(e[n],t[n]))return!1}}return String(e)===String(t)}function be(e,t){return e.findIndex(e=>ye(e,t))}var xe=e=>!!(e&&e.__v_isRef===!0),M=e=>v(e)?e:e==null?``:p(e)||b(e)&&(e.toString===S||!_(e.toString))?xe(e)?M(e.value):JSON.stringify(e,Se,2):String(e),Se=(e,t)=>xe(t)?Se(e,t.value):m(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],r)=>(e[Ce(t,r)+` =>`]=n,e),{})}:h(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Ce(e))}:y(t)?Ce(t):b(t)&&!p(t)&&!ee(t)?String(t):t,Ce=(e,t=``)=>y(e)?`Symbol(${e.description??t})`:e,we,Te=class{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=we,!e&&we&&(this.index=(we.scopes||=[]).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){let t=we;try{return we=this,e()}finally{we=t}}}on(){++this._on===1&&(this.prevScope=we,we=this)}off(){this._on>0&&--this._on===0&&(we=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){let e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}};function Ee(){return we}var N,De=new WeakSet,Oe=class{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,we&&we.active&&we.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,De.has(this)&&(De.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Me(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ge(this),Fe(this);let e=N,t=Ve;N=this,Ve=!0;try{return this.fn()}finally{Ie(this),N=e,Ve=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ze(e);this.deps=this.depsTail=void 0,Ge(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?De.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Le(this)&&this.run()}get dirty(){return Le(this)}},ke=0,Ae,je;function Me(e,t=!1){if(e.flags|=8,t){e.next=je,je=e;return}e.next=Ae,Ae=e}function Ne(){ke++}function Pe(){if(--ke>0)return;if(je){let e=je;for(je=void 0;e;){let t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;Ae;){let t=Ae;for(Ae=void 0;t;){let n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(t){e||=t}t=n}}if(e)throw e}function Fe(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ie(e){let t,n=e.depsTail,r=n;for(;r;){let e=r.prevDep;r.version===-1?(r===n&&(n=e),ze(r),Be(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function Le(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Re(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Re(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ke)||(e.globalVersion=Ke,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Le(e))))return;e.flags|=2;let t=e.dep,n=N,r=Ve;N=e,Ve=!0;try{Fe(e);let n=e.fn(e._value);(t.version===0||A(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{N=n,Ve=r,Ie(e),e.flags&=-3}}function ze(e,t=!1){let{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)ze(e,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Be(e){let{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}var Ve=!0,He=[];function Ue(){He.push(Ve),Ve=!1}function We(){let e=He.pop();Ve=e===void 0?!0:e}function Ge(e){let{cleanup:t}=e;if(e.cleanup=void 0,t){let e=N;N=void 0;try{t()}finally{N=e}}}var Ke=0,qe=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}},Je=class{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!N||!Ve||N===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==N)t=this.activeLink=new qe(N,this),N.deps?(t.prevDep=N.depsTail,N.depsTail.nextDep=t,N.depsTail=t):N.deps=N.depsTail=t,Ye(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){let e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=N.depsTail,t.nextDep=void 0,N.depsTail.nextDep=t,N.depsTail=t,N.deps===t&&(N.deps=e)}return t}trigger(e){this.version++,Ke++,this.notify(e)}notify(e){Ne();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Pe()}}};function Ye(e){if(e.dep.sc++,e.sub.flags&4){let t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Ye(e)}let n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}var Xe=new WeakMap,Ze=Symbol(``),Qe=Symbol(``),$e=Symbol(``);function et(e,t,n){if(Ve&&N){let t=Xe.get(e);t||Xe.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new Je),r.map=t,r.key=n),r.track()}}function tt(e,t,n,r,i,a){let o=Xe.get(e);if(!o){Ke++;return}let s=e=>{e&&e.trigger()};if(Ne(),t===`clear`)o.forEach(s);else{let i=p(e),a=i&&T(n);if(i&&n===`length`){let e=Number(r);o.forEach((t,n)=>{(n===`length`||n===$e||!y(n)&&n>=e)&&s(t)})}else switch((n!==void 0||o.has(void 0))&&s(o.get(n)),a&&s(o.get($e)),t){case`add`:i?a&&s(o.get(`length`)):(s(o.get(Ze)),m(e)&&s(o.get(Qe)));break;case`delete`:i||(s(o.get(Ze)),m(e)&&s(o.get(Qe)));break;case`set`:m(e)&&s(o.get(Ze));break}}Pe()}function nt(e){let t=P(e);return t===e?t:(et(t,`iterate`,$e),Ht(e)?t:t.map(Gt))}function rt(e){return et(e=P(e),`iterate`,$e),e}function it(e,t){return Vt(e)?Bt(e)?Kt(Gt(t)):Kt(t):Gt(t)}var at={__proto__:null,[Symbol.iterator](){return ot(this,Symbol.iterator,e=>it(this,e))},concat(...e){return nt(this).concat(...e.map(e=>p(e)?nt(e):e))},entries(){return ot(this,`entries`,e=>(e[1]=it(this,e[1]),e))},every(e,t){return ct(this,`every`,e,t,void 0,arguments)},filter(e,t){return ct(this,`filter`,e,t,e=>e.map(e=>it(this,e)),arguments)},find(e,t){return ct(this,`find`,e,t,e=>it(this,e),arguments)},findIndex(e,t){return ct(this,`findIndex`,e,t,void 0,arguments)},findLast(e,t){return ct(this,`findLast`,e,t,e=>it(this,e),arguments)},findLastIndex(e,t){return ct(this,`findLastIndex`,e,t,void 0,arguments)},forEach(e,t){return ct(this,`forEach`,e,t,void 0,arguments)},includes(...e){return ut(this,`includes`,e)},indexOf(...e){return ut(this,`indexOf`,e)},join(e){return nt(this).join(e)},lastIndexOf(...e){return ut(this,`lastIndexOf`,e)},map(e,t){return ct(this,`map`,e,t,void 0,arguments)},pop(){return dt(this,`pop`)},push(...e){return dt(this,`push`,e)},reduce(e,...t){return lt(this,`reduce`,e,t)},reduceRight(e,...t){return lt(this,`reduceRight`,e,t)},shift(){return dt(this,`shift`)},some(e,t){return ct(this,`some`,e,t,void 0,arguments)},splice(...e){return dt(this,`splice`,e)},toReversed(){return nt(this).toReversed()},toSorted(e){return nt(this).toSorted(e)},toSpliced(...e){return nt(this).toSpliced(...e)},unshift(...e){return dt(this,`unshift`,e)},values(){return ot(this,`values`,e=>it(this,e))}};function ot(e,t,n){let r=rt(e),i=r[t]();return r!==e&&!Ht(e)&&(i._next=i.next,i.next=()=>{let e=i._next();return e.done||(e.value=n(e.value)),e}),i}var st=Array.prototype;function ct(e,t,n,r,i,a){let o=rt(e),s=o!==e&&!Ht(e),c=o[t];if(c!==st[t]){let t=c.apply(e,a);return s?Gt(t):t}let l=n;o!==e&&(s?l=function(t,r){return n.call(this,it(e,t),r,e)}:n.length>2&&(l=function(t,r){return n.call(this,t,r,e)}));let u=c.call(o,l,r);return s&&i?i(u):u}function lt(e,t,n,r){let i=rt(e),a=n;return i!==e&&(Ht(e)?n.length>3&&(a=function(t,r,i){return n.call(this,t,r,i,e)}):a=function(t,r,i){return n.call(this,t,it(e,r),i,e)}),i[t](a,...r)}function ut(e,t,n){let r=P(e);et(r,`iterate`,$e);let i=r[t](...n);return(i===-1||i===!1)&&Ut(n[0])?(n[0]=P(n[0]),r[t](...n)):i}function dt(e,t,n=[]){Ue(),Ne();let r=P(e)[t].apply(e,n);return Pe(),We(),r}var ft=n(`__proto__,__v_isRef,__isVue`),pt=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!==`arguments`&&e!==`caller`).map(e=>Symbol[e]).filter(y));function mt(e){y(e)||(e=String(e));let t=P(this);return et(t,`has`,e),t.hasOwnProperty(e)}var ht=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t===`__v_skip`)return e.__v_skip;let r=this._isReadonly,i=this._isShallow;if(t===`__v_isReactive`)return!r;if(t===`__v_isReadonly`)return r;if(t===`__v_isShallow`)return i;if(t===`__v_raw`)return n===(r?i?Nt:Mt:i?jt:At).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;let a=p(e);if(!r){let e;if(a&&(e=at[t]))return e;if(t===`hasOwnProperty`)return mt}let o=Reflect.get(e,t,qt(e)?e:n);if((y(t)?pt.has(t):ft(t))||(r||et(e,`get`,t),i))return o;if(qt(o)){let e=a&&T(t)?o:o.value;return r&&b(e)?Rt(e):e}return b(o)?r?Rt(o):It(o):o}},gt=class extends ht{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t],a=p(e)&&T(t);if(!this._isShallow){let e=Vt(i);if(!Ht(n)&&!Vt(n)&&(i=P(i),n=P(n)),!a&&qt(i)&&!qt(n))return e||(i.value=n),!0}let o=a?Number(t)<e.length:f(e,t),s=Reflect.set(e,t,n,qt(e)?e:r);return e===P(r)&&(o?A(n,i)&&tt(e,`set`,t,n,i):tt(e,`add`,t,n)),s}deleteProperty(e,t){let n=f(e,t),r=e[t],i=Reflect.deleteProperty(e,t);return i&&n&&tt(e,`delete`,t,void 0,r),i}has(e,t){let n=Reflect.has(e,t);return(!y(t)||!pt.has(t))&&et(e,`has`,t),n}ownKeys(e){return et(e,`iterate`,p(e)?`length`:Ze),Reflect.ownKeys(e)}},_t=class extends ht{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}},vt=new gt,yt=new _t,bt=new gt(!0),xt=e=>e,St=e=>Reflect.getPrototypeOf(e);function Ct(e,t,n){return function(...r){let i=this.__v_raw,a=P(i),o=m(a),s=e===`entries`||e===Symbol.iterator&&o,c=e===`keys`&&o,l=i[e](...r),u=n?xt:t?Kt:Gt;return!t&&et(a,`iterate`,c?Qe:Ze),{next(){let{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function wt(e){return function(...t){return e===`delete`?!1:e===`clear`?void 0:this}}function Tt(e,t){let n={get(n){let r=this.__v_raw,i=P(r),a=P(n);e||(A(n,a)&&et(i,`get`,n),et(i,`get`,a));let{has:o}=St(i),s=t?xt:e?Kt:Gt;if(o.call(i,n))return s(r.get(n));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(n)},get size(){let t=this.__v_raw;return!e&&et(P(t),`iterate`,Ze),t.size},has(t){let n=this.__v_raw,r=P(n),i=P(t);return e||(A(t,i)&&et(r,`has`,t),et(r,`has`,i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){let i=this,a=i.__v_raw,o=P(a),s=t?xt:e?Kt:Gt;return!e&&et(o,`iterate`,Ze),a.forEach((e,t)=>n.call(r,s(e),s(t),i))}};return l(n,e?{add:wt(`add`),set:wt(`set`),delete:wt(`delete`),clear:wt(`clear`)}:{add(e){!t&&!Ht(e)&&!Vt(e)&&(e=P(e));let n=P(this);return St(n).has.call(n,e)||(n.add(e),tt(n,`add`,e,e)),this},set(e,n){!t&&!Ht(n)&&!Vt(n)&&(n=P(n));let r=P(this),{has:i,get:a}=St(r),o=i.call(r,e);o||=(e=P(e),i.call(r,e));let s=a.call(r,e);return r.set(e,n),o?A(n,s)&&tt(r,`set`,e,n,s):tt(r,`add`,e,n),this},delete(e){let t=P(this),{has:n,get:r}=St(t),i=n.call(t,e);i||=(e=P(e),n.call(t,e));let a=r?r.call(t,e):void 0,o=t.delete(e);return i&&tt(t,`delete`,e,void 0,a),o},clear(){let e=P(this),t=e.size!==0,n=e.clear();return t&&tt(e,`clear`,void 0,void 0,void 0),n}}),[`keys`,`values`,`entries`,Symbol.iterator].forEach(r=>{n[r]=Ct(r,e,t)}),n}function Et(e,t){let n=Tt(e,t);return(t,r,i)=>r===`__v_isReactive`?!e:r===`__v_isReadonly`?e:r===`__v_raw`?t:Reflect.get(f(n,r)&&r in t?n:t,r,i)}var Dt={get:Et(!1,!1)},Ot={get:Et(!1,!0)},kt={get:Et(!0,!1)},At=new WeakMap,jt=new WeakMap,Mt=new WeakMap,Nt=new WeakMap;function Pt(e){switch(e){case`Object`:case`Array`:return 1;case`Map`:case`Set`:case`WeakMap`:case`WeakSet`:return 2;default:return 0}}function Ft(e){return e.__v_skip||!Object.isExtensible(e)?0:Pt(w(e))}function It(e){return Vt(e)?e:zt(e,!1,vt,Dt,At)}function Lt(e){return zt(e,!1,bt,Ot,jt)}function Rt(e){return zt(e,!0,yt,kt,Mt)}function zt(e,t,n,r,i){if(!b(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let a=Ft(e);if(a===0)return e;let o=i.get(e);if(o)return o;let s=new Proxy(e,a===2?r:n);return i.set(e,s),s}function Bt(e){return Vt(e)?Bt(e.__v_raw):!!(e&&e.__v_isReactive)}function Vt(e){return!!(e&&e.__v_isReadonly)}function Ht(e){return!!(e&&e.__v_isShallow)}function Ut(e){return e?!!e.__v_raw:!1}function P(e){let t=e&&e.__v_raw;return t?P(t):e}function Wt(e){return!f(e,`__v_skip`)&&Object.isExtensible(e)&&oe(e,`__v_skip`,!0),e}var Gt=e=>b(e)?It(e):e,Kt=e=>b(e)?Rt(e):e;function qt(e){return e?e.__v_isRef===!0:!1}function F(e){return Jt(e,!1)}function Jt(e,t){return qt(e)?e:new Yt(e,t)}var Yt=class{constructor(e,t){this.dep=new Je,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:P(e),this._value=t?e:Gt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){let t=this._rawValue,n=this.__v_isShallow||Ht(e)||Vt(e);e=n?e:P(e),A(e,t)&&(this._rawValue=e,this._value=n?e:Gt(e),this.dep.trigger())}};function Xt(e){return qt(e)?e.value:e}var Zt={get:(e,t,n)=>t===`__v_raw`?e:Xt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{let i=e[t];return qt(i)&&!qt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Qt(e){return Bt(e)?e:new Proxy(e,Zt)}var $t=class{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Je(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ke-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&N!==this)return Me(this,!0),!0}get value(){let e=this.dep.track();return Re(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}};function en(e,t,n=!1){let r,i;return _(e)?r=e:(r=e.get,i=e.set),new $t(r,i,n)}var tn={},nn=new WeakMap,rn=void 0;function an(e,t=!1,n=rn){if(n){let t=nn.get(n);t||nn.set(n,t=[]),t.push(e)}}function on(e,t,n=r){let{immediate:i,deep:o,once:s,scheduler:c,augmentJob:l,call:d}=n,f=e=>o?e:Ht(e)||o===!1||o===0?sn(e,1):sn(e),m,h,g,v,y=!1,b=!1;if(qt(e)?(h=()=>e.value,y=Ht(e)):Bt(e)?(h=()=>f(e),y=!0):p(e)?(b=!0,y=e.some(e=>Bt(e)||Ht(e)),h=()=>e.map(e=>{if(qt(e))return e.value;if(Bt(e))return f(e);if(_(e))return d?d(e,2):e()})):h=_(e)?t?d?()=>d(e,2):e:()=>{if(g){Ue();try{g()}finally{We()}}let t=rn;rn=m;try{return d?d(e,3,[v]):e(v)}finally{rn=t}}:a,t&&o){let e=h,t=o===!0?1/0:o;h=()=>sn(e(),t)}let x=Ee(),S=()=>{m.stop(),x&&x.active&&u(x.effects,m)};if(s&&t){let e=t;t=(...t)=>{e(...t),S()}}let C=b?Array(e.length).fill(tn):tn,w=e=>{if(!(!(m.flags&1)||!m.dirty&&!e))if(t){let e=m.run();if(o||y||(b?e.some((e,t)=>A(e,C[t])):A(e,C))){g&&g();let n=rn;rn=m;try{let n=[e,C===tn?void 0:b&&C[0]===tn?[]:C,v];C=e,d?d(t,3,n):t(...n)}finally{rn=n}}}else m.run()};return l&&l(w),m=new Oe(h),m.scheduler=c?()=>c(w,!1):w,v=e=>an(e,!1,m),g=m.onStop=()=>{let e=nn.get(m);if(e){if(d)d(e,4);else for(let t of e)t();nn.delete(m)}},t?i?w(!0):C=m.run():c?c(w.bind(null,!0),!0):m.run(),S.pause=m.pause.bind(m),S.resume=m.resume.bind(m),S.stop=S,S}function sn(e,t=1/0,n){if(t<=0||!b(e)||e.__v_skip||(n||=new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,qt(e))sn(e.value,t,n);else if(p(e))for(let r=0;r<e.length;r++)sn(e[r],t,n);else if(h(e)||m(e))e.forEach(e=>{sn(e,t,n)});else if(ee(e)){for(let r in e)sn(e[r],t,n);for(let r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&sn(e[r],t,n)}return e}function cn(e,t,n,r){try{return r?e(...r):e()}catch(e){un(e,t,n)}}function ln(e,t,n,r){if(_(e)){let i=cn(e,t,n,r);return i&&x(i)&&i.catch(e=>{un(e,t,n)}),i}if(p(e)){let i=[];for(let a=0;a<e.length;a++)i.push(ln(e[a],t,n,r));return i}}function un(e,t,n,i=!0){let a=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||r;if(t){let r=t.parent,i=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){let t=r.ec;if(t){for(let n=0;n<t.length;n++)if(t[n](e,i,a)===!1)return}r=r.parent}if(o){Ue(),cn(o,null,10,[e,i,a]),We();return}}dn(e,n,a,i,s)}function dn(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}var fn=[],pn=-1,mn=[],hn=null,gn=0,_n=Promise.resolve(),vn=null;function yn(e){let t=vn||_n;return e?t.then(this?e.bind(this):e):t}function bn(e){let t=pn+1,n=fn.length;for(;t<n;){let r=t+n>>>1,i=fn[r],a=En(i);a<e||a===e&&i.flags&2?t=r+1:n=r}return t}function xn(e){if(!(e.flags&1)){let t=En(e),n=fn[fn.length-1];!n||!(e.flags&2)&&t>=En(n)?fn.push(e):fn.splice(bn(t),0,e),e.flags|=1,Sn()}}function Sn(){vn||=_n.then(Dn)}function Cn(e){p(e)?mn.push(...e):hn&&e.id===-1?hn.splice(gn+1,0,e):e.flags&1||(mn.push(e),e.flags|=1),Sn()}function wn(e,t,n=pn+1){for(;n<fn.length;n++){let t=fn[n];if(t&&t.flags&2){if(e&&t.id!==e.uid)continue;fn.splice(n,1),n--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function Tn(e){if(mn.length){let e=[...new Set(mn)].sort((e,t)=>En(e)-En(t));if(mn.length=0,hn){hn.push(...e);return}for(hn=e,gn=0;gn<hn.length;gn++){let e=hn[gn];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}hn=null,gn=0}}var En=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Dn(e){try{for(pn=0;pn<fn.length;pn++){let e=fn[pn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),cn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;pn<fn.length;pn++){let e=fn[pn];e&&(e.flags&=-2)}pn=-1,fn.length=0,Tn(e),vn=null,(fn.length||mn.length)&&Dn(e)}}var On=null,kn=null;function An(e){let t=On;return On=e,kn=e&&e.type.__scopeId||null,t}function jn(e,t=On,n){if(!t||e._n)return e;let r=(...n)=>{r._d&&Wi(-1);let i=An(t),a;try{a=e(...n)}finally{An(i),r._d&&Wi(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function I(e,t){if(On===null)return e;let n=wa(On),i=e.dirs||=[];for(let e=0;e<t.length;e++){let[a,o,s,c=r]=t[e];a&&(_(a)&&(a={mounted:a,updated:a}),a.deep&&sn(o),i.push({dir:a,instance:n,value:o,oldValue:void 0,arg:s,modifiers:c}))}return e}function Mn(e,t,n,r){let i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){let s=i[o];a&&(s.oldValue=a[o].value);let c=s.dir[r];c&&(Ue(),ln(c,n,8,[e.el,s,e,t]),We())}}function Nn(e,t){if(ca){let n=ca.provides,r=ca.parent&&ca.parent.provides;r===n&&(n=ca.provides=Object.create(r)),n[e]=t}}function Pn(e,t,n=!1){let r=la();if(r||Jr){let i=Jr?Jr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&_(t)?t.call(r&&r.proxy):t}}var Fn=Symbol.for(`v-scx`),In=()=>Pn(Fn);function Ln(e,t,n){return Rn(e,t,n)}function Rn(e,t,n=r){let{immediate:i,deep:o,flush:s,once:c}=n,u=l({},n),d=t&&i||!t&&s!==`post`,f;if(ha){if(s===`sync`){let e=In();f=e.__watcherHandles||=[]}else if(!d){let e=()=>{};return e.stop=a,e.resume=a,e.pause=a,e}}let p=ca;u.call=(e,t,n)=>ln(e,p,t,n);let m=!1;s===`post`?u.scheduler=e=>{wi(e,p&&p.suspense)}:s!==`sync`&&(m=!0,u.scheduler=(e,t)=>{t?e():xn(e)}),u.augmentJob=e=>{t&&(e.flags|=4),m&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};let h=on(e,t,u);return ha&&(f?f.push(h):d&&h()),h}function zn(e,t,n){let r=this.proxy,i=v(e)?e.includes(`.`)?Bn(r,e):()=>r[e]:e.bind(r,r),a;_(t)?a=t:(a=t.handler,n=t);let o=fa(this),s=Rn(i,a.bind(r),n);return o(),s}function Bn(e,t){let n=t.split(`.`);return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}var Vn=Symbol(`_vte`),Hn=e=>e.__isTeleport,Un=e=>e&&(e.disabled||e.disabled===``),Wn=e=>e&&(e.defer||e.defer===``),Gn=e=>typeof SVGElement<`u`&&e instanceof SVGElement,Kn=e=>typeof MathMLElement==`function`&&e instanceof MathMLElement,qn=(e,t)=>{let n=e&&e.to;return v(n)?t?t(n):null:n},Jn={name:`Teleport`,__isTeleport:!0,process(e,t,n,r,i,a,o,s,c,l){let{mc:u,pc:d,pbc:f,o:{insert:p,querySelector:m,createText:h,createComment:g}}=l,_=Un(t.props),{shapeFlag:v,children:y,dynamicChildren:b}=t;if(e==null){let e=t.el=h(``),l=t.anchor=h(``);p(e,n,r),p(l,n,r);let d=(e,t)=>{v&16&&u(y,e,t,i,a,o,s,c)},f=()=>{let e=t.target=qn(t.props,m),n=$n(e,t,h,p);e&&(o!==`svg`&&Gn(e)?o=`svg`:o!==`mathml`&&Kn(e)&&(o=`mathml`),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(e),_||(d(e,n),Qn(t,!1)))};_&&(d(n,l),Qn(t,!0)),Wn(t.props)?(t.el.__isMounted=!1,wi(()=>{f(),delete t.el.__isMounted},a)):f()}else{if(Wn(t.props)&&e.el.__isMounted===!1){wi(()=>{Jn.process(e,t,n,r,i,a,o,s,c,l)},a);return}t.el=e.el,t.targetStart=e.targetStart;let u=t.anchor=e.anchor,p=t.target=e.target,h=t.targetAnchor=e.targetAnchor,g=Un(e.props),v=g?n:p,y=g?u:h;if(o===`svg`||Gn(p)?o=`svg`:(o===`mathml`||Kn(p))&&(o=`mathml`),b?(f(e.dynamicChildren,b,v,i,a,o,s),Ai(e,t,!0)):c||d(e,t,v,y,i,a,o,s,!1),_)g?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Yn(t,n,u,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){let e=t.target=qn(t.props,m);e&&Yn(t,e,null,l,0)}else g&&Yn(t,p,h,l,1);Qn(t,_)}},remove(e,t,n,{um:r,o:{remove:i}},a){let{shapeFlag:o,children:s,anchor:c,targetStart:l,targetAnchor:u,target:d,props:f}=e;if(d&&(i(l),i(u)),a&&i(c),o&16){let e=a||!Un(f);for(let i=0;i<s.length;i++){let a=s[i];r(a,t,n,e,!!a.dynamicChildren)}}},move:Yn,hydrate:Xn};function Yn(e,t,n,{o:{insert:r},m:i},a=2){a===0&&r(e.targetAnchor,t,n);let{el:o,anchor:s,shapeFlag:c,children:l,props:u}=e,d=a===2;if(d&&r(o,t,n),(!d||Un(u))&&c&16)for(let e=0;e<l.length;e++)i(l[e],t,n,2);d&&r(s,t,n)}function Xn(e,t,n,r,i,a,{o:{nextSibling:o,parentNode:s,querySelector:c,insert:l,createText:u}},d){function f(e,t,c,l){t.anchor=d(o(e),t,s(e),n,r,i,a),t.targetStart=c,t.targetAnchor=l}let p=t.target=qn(t.props,c),m=Un(t.props);if(p){let s=p._lpa||p.firstChild;if(t.shapeFlag&16)if(m)f(e,t,s,s&&o(s));else{t.anchor=o(e);let c=s;for(;c;){if(c&&c.nodeType===8){if(c.data===`teleport start anchor`)t.targetStart=c;else if(c.data===`teleport anchor`){t.targetAnchor=c,p._lpa=t.targetAnchor&&o(t.targetAnchor);break}}c=o(c)}t.targetAnchor||$n(p,t,u,l),d(s&&o(s),t,p,n,r,i,a)}Qn(t,m)}else m&&t.shapeFlag&16&&f(e,t,e,o(e));return t.anchor&&o(t.anchor)}var Zn=Jn;function Qn(e,t){let n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute(`data-v-owner`,n.uid),r=r.nextSibling;n.ut()}}function $n(e,t,n,r){let i=t.targetStart=n(``),a=t.targetAnchor=n(``);return i[Vn]=a,e&&(r(i,e),r(a,e)),a}var er=Symbol(`_leaveCb`);function tr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,tr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function L(e,t){return _(e)?(()=>l({name:e.name},t,{setup:e}))():e}function nr(e){e.ids=[e.ids[0]+ e.ids[2]+++`-`,0,0]}var rr=new WeakMap;function ir(e,t,n,i,a=!1){if(p(e)){e.forEach((e,r)=>ir(e,t&&(p(t)?t[r]:t),n,i,a));return}if(or(i)&&!a){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&ir(e,t,n,i.component.subTree);return}let s=i.shapeFlag&4?wa(i.component):i.el,c=a?null:s,{i:l,r:d}=e,m=t&&t.r,h=l.refs===r?l.refs={}:l.refs,g=l.setupState,y=P(g),b=g===r?o:e=>f(y,e),x=e=>!0;if(m!=null&&m!==d){if(ar(t),v(m))h[m]=null,b(m)&&(g[m]=null);else if(qt(m)){x(m)&&(m.value=null);let e=t;e.k&&(h[e.k]=null)}}if(_(d))cn(d,l,12,[c,h]);else{let t=v(d),r=qt(d);if(t||r){let i=()=>{if(e.f){let n=t?b(d)?g[d]:h[d]:x(d)||!e.k?d.value:h[e.k];if(a)p(n)&&u(n,s);else if(p(n))n.includes(s)||n.push(s);else if(t)h[d]=[s],b(d)&&(g[d]=h[d]);else{let t=[s];x(d)&&(d.value=t),e.k&&(h[e.k]=t)}}else t?(h[d]=c,b(d)&&(g[d]=c)):r&&(x(d)&&(d.value=c),e.k&&(h[e.k]=c))};if(c){let t=()=>{i(),rr.delete(e)};t.id=-1,rr.set(e,t),wi(t,n)}else ar(e),i()}}}function ar(e){let t=rr.get(e);t&&(t.flags|=8,rr.delete(e))}le().requestIdleCallback,le().cancelIdleCallback;var or=e=>!!e.type.__asyncLoader,sr=e=>e.type.__isKeepAlive;function cr(e,t){ur(e,`a`,t)}function lr(e,t){ur(e,`da`,t)}function ur(e,t,n=ca){let r=e.__wdc||=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()};if(fr(t,r,n),n){let e=n.parent;for(;e&&e.parent;)sr(e.parent.vnode)&&dr(r,t,n,e),e=e.parent}}function dr(e,t,n,r){let i=fr(t,e,r,!0);yr(()=>{u(r[t],i)},n)}function fr(e,t,n=ca,r=!1){if(n){let i=n[e]||(n[e]=[]),a=t.__weh||=(...r)=>{Ue();let i=fa(n),a=ln(t,n,e,r);return i(),We(),a};return r?i.unshift(a):i.push(a),a}}var pr=e=>(t,n=ca)=>{(!ha||e===`sp`)&&fr(e,(...e)=>t(...e),n)},mr=pr(`bm`),hr=pr(`m`),gr=pr(`bu`),_r=pr(`u`),vr=pr(`bum`),yr=pr(`um`),br=pr(`sp`),xr=pr(`rtg`),Sr=pr(`rtc`);function Cr(e,t=ca){fr(`ec`,e,t)}var wr=Symbol.for(`v-ndc`);function R(e,t,n,r){let i,a=n&&n[r],o=p(e);if(o||v(e)){let n=o&&Bt(e),r=!1,s=!1;n&&(r=!Ht(e),s=Vt(e),e=rt(e)),i=Array(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=t(r?s?Kt(Gt(e[n])):Gt(e[n]):e[n],n,void 0,a&&a[n])}else if(typeof e==`number`){i=Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,a&&a[n])}else if(b(e))if(e[Symbol.iterator])i=Array.from(e,(e,n)=>t(e,n,void 0,a&&a[n]));else{let n=Object.keys(e);i=Array(n.length);for(let r=0,o=n.length;r<o;r++){let o=n[r];i[r]=t(e[o],o,r,a&&a[r])}}else i=[];return n&&(n[r]=i),i}var Tr=e=>e?ma(e)?wa(e):Tr(e.parent):null,Er=l(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Tr(e.parent),$root:e=>Tr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fr(e),$forceUpdate:e=>e.f||=()=>{xn(e.update)},$nextTick:e=>e.n||=yn.bind(e.proxy),$watch:e=>zn.bind(e)}),Dr=(e,t)=>e!==r&&!e.__isScriptSetup&&f(e,t),Or={get({_:e},t){if(t===`__v_skip`)return!0;let{ctx:n,setupState:i,data:a,props:o,accessCache:s,type:c,appContext:l}=e;if(t[0]!==`$`){let e=s[t];if(e!==void 0)switch(e){case 1:return i[t];case 2:return a[t];case 4:return n[t];case 3:return o[t]}else if(Dr(i,t))return s[t]=1,i[t];else if(a!==r&&f(a,t))return s[t]=2,a[t];else if(f(o,t))return s[t]=3,o[t];else if(n!==r&&f(n,t))return s[t]=4,n[t];else Ar&&(s[t]=0)}let u=Er[t],d,p;if(u)return t===`$attrs`&&et(e.attrs,`get`,``),u(e);if((d=c.__cssModules)&&(d=d[t]))return d;if(n!==r&&f(n,t))return s[t]=4,n[t];if(p=l.config.globalProperties,f(p,t))return p[t]},set({_:e},t,n){let{data:i,setupState:a,ctx:o}=e;return Dr(a,t)?(a[t]=n,!0):i!==r&&f(i,t)?(i[t]=n,!0):f(e.props,t)||t[0]===`$`&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:a,props:o,type:s}},c){let l;return!!(n[c]||e!==r&&c[0]!==`$`&&f(e,c)||Dr(t,c)||f(o,c)||f(i,c)||f(Er,c)||f(a.config.globalProperties,c)||(l=s.__cssModules)&&l[c])},defineProperty(e,t,n){return n.get==null?f(n,`value`)&&this.set(e,t,n.value,null):e._.accessCache[t]=0,Reflect.defineProperty(e,t,n)}};function kr(e){return p(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}var Ar=!0;function jr(e){let t=Fr(e),n=e.proxy,r=e.ctx;Ar=!1,t.beforeCreate&&Nr(t.beforeCreate,e,`bc`);let{data:i,computed:o,methods:s,watch:c,provide:l,inject:u,created:d,beforeMount:f,mounted:m,beforeUpdate:h,updated:g,activated:v,deactivated:y,beforeDestroy:x,beforeUnmount:S,destroyed:C,unmounted:w,render:ee,renderTracked:T,renderTriggered:E,errorCaptured:D,serverPrefetch:te,expose:O,inheritAttrs:ne,components:k,directives:re,filters:ie}=t;if(u&&Mr(u,r,null),s)for(let e in s){let t=s[e];_(t)&&(r[e]=t.bind(n))}if(i){let t=i.call(n,n);b(t)&&(e.data=It(t))}if(Ar=!0,o)for(let e in o){let t=o[e],i=q({get:_(t)?t.bind(n,n):_(t.get)?t.get.bind(n,n):a,set:!_(t)&&_(t.set)?t.set.bind(n):a});Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e})}if(c)for(let e in c)Pr(c[e],r,n,e);if(l){let e=_(l)?l.call(n):l;Reflect.ownKeys(e).forEach(t=>{Nn(t,e[t])})}d&&Nr(d,e,`c`);function A(e,t){p(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(A(mr,f),A(hr,m),A(gr,h),A(_r,g),A(cr,v),A(lr,y),A(Cr,D),A(Sr,T),A(xr,E),A(vr,S),A(yr,w),A(br,te),p(O))if(O.length){let t=e.exposed||={};O.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t,enumerable:!0})})}else e.exposed||={};ee&&e.render===a&&(e.render=ee),ne!=null&&(e.inheritAttrs=ne),k&&(e.components=k),re&&(e.directives=re),te&&nr(e)}function Mr(e,t,n=a){for(let n in p(e)&&(e=Br(e)),e){let r=e[n],i;i=b(r)?`default`in r?Pn(r.from||n,r.default,!0):Pn(r.from||n):Pn(r),qt(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}function Nr(e,t,n){ln(p(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Pr(e,t,n,r){let i=r.includes(`.`)?Bn(n,r):()=>n[r];if(v(e)){let n=t[e];_(n)&&Ln(i,n)}else if(_(e))Ln(i,e.bind(n));else if(b(e))if(p(e))e.forEach(e=>Pr(e,t,n,r));else{let r=_(e.handler)?e.handler.bind(n):t[e.handler];_(r)&&Ln(i,r,e)}}function Fr(e){let t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t),c;return s?c=s:!i.length&&!n&&!r?c=t:(c={},i.length&&i.forEach(e=>Ir(c,e,o,!0)),Ir(c,t,o)),b(t)&&a.set(t,c),c}function Ir(e,t,n,r=!1){let{mixins:i,extends:a}=t;for(let o in a&&Ir(e,a,n,!0),i&&i.forEach(t=>Ir(e,t,n,!0)),t)if(!(r&&o===`expose`)){let r=Lr[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}var Lr={data:Rr,props:Ur,emits:Ur,methods:Hr,computed:Hr,beforeCreate:Vr,created:Vr,beforeMount:Vr,mounted:Vr,beforeUpdate:Vr,updated:Vr,beforeDestroy:Vr,beforeUnmount:Vr,destroyed:Vr,unmounted:Vr,activated:Vr,deactivated:Vr,errorCaptured:Vr,serverPrefetch:Vr,components:Hr,directives:Hr,watch:Wr,provide:Rr,inject:zr};function Rr(e,t){return t?e?function(){return l(_(e)?e.call(this,this):e,_(t)?t.call(this,this):t)}:t:e}function zr(e,t){return Hr(Br(e),Br(t))}function Br(e){if(p(e)){let t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Vr(e,t){return e?[...new Set([].concat(e,t))]:t}function Hr(e,t){return e?l(Object.create(null),e,t):t}function Ur(e,t){return e?p(e)&&p(t)?[...new Set([...e,...t])]:l(Object.create(null),kr(e),kr(t??{})):t}function Wr(e,t){if(!e)return t;if(!t)return e;let n=l(Object.create(null),e);for(let r in t)n[r]=Vr(e[r],t[r]);return n}function Gr(){return{app:null,config:{isNativeTag:o,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var Kr=0;function qr(e,t){return function(n,r=null){_(n)||(n=l({},n)),r!=null&&!b(r)&&(r=null);let i=Gr(),a=new WeakSet,o=[],s=!1,c=i.app={_uid:Kr++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Ea,get config(){return i.config},set config(e){},use(e,...t){return a.has(e)||(e&&_(e.install)?(a.add(e),e.install(c,...t)):_(e)&&(a.add(e),e(c,...t))),c},mixin(e){return i.mixins.includes(e)||i.mixins.push(e),c},component(e,t){return t?(i.components[e]=t,c):i.components[e]},directive(e,t){return t?(i.directives[e]=t,c):i.directives[e]},mount(a,o,l){if(!s){let u=c._ceVNode||Xi(n,r);return u.appContext=i,l===!0?l=`svg`:l===!1&&(l=void 0),o&&t?t(u,a):e(u,a,l),s=!0,c._container=a,a.__vue_app__=c,wa(u.component)}},onUnmount(e){o.push(e)},unmount(){s&&(ln(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return i.provides[e]=t,c},runWithContext(e){let t=Jr;Jr=c;try{return e()}finally{Jr=t}}};return c}}var Jr=null,Yr=(e,t)=>t===`modelValue`||t===`model-value`?e.modelModifiers:e[`${t}Modifiers`]||e[`${O(t)}Modifiers`]||e[`${k(t)}Modifiers`];function Xr(e,t,...n){if(e.isUnmounted)return;let i=e.vnode.props||r,a=n,o=t.startsWith(`update:`),s=o&&Yr(i,t.slice(7));s&&(s.trim&&(a=n.map(e=>v(e)?e.trim():e)),s.number&&(a=n.map(se)));let c,l=i[c=ie(t)]||i[c=ie(O(t))];!l&&o&&(l=i[c=ie(k(t))]),l&&ln(l,e,6,a);let u=i[c+`Once`];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,ln(u,e,6,a)}}var Zr=new WeakMap;function Qr(e,t,n=!1){let r=n?Zr:t.emitsCache,i=r.get(e);if(i!==void 0)return i;let a=e.emits,o={},s=!1;if(!_(e)){let r=e=>{let n=Qr(e,t,!0);n&&(s=!0,l(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return!a&&!s?(b(e)&&r.set(e,null),null):(p(a)?a.forEach(e=>o[e]=null):l(o,a),b(e)&&r.set(e,o),o)}function $r(e,t){return!e||!s(t)?!1:(t=t.slice(2).replace(/Once$/,``),f(e,t[0].toLowerCase()+t.slice(1))||f(e,k(t))||f(e,t))}function ei(e){let{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:l,render:u,renderCache:d,props:f,data:p,setupState:m,ctx:h,inheritAttrs:g}=e,_=An(e),v,y;try{if(n.shapeFlag&4){let e=i||r,t=e;v=ea(u.call(t,e,d,f,m,p,h)),y=s}else{let e=t;v=ea(e.length>1?e(f,{attrs:s,slots:o,emit:l}):e(f,null)),y=t.props?s:ti(s)}}catch(t){Bi.length=0,un(t,e,1),v=Xi(Ri)}let b=v;if(y&&g!==!1){let e=Object.keys(y),{shapeFlag:t}=b;e.length&&t&7&&(a&&e.some(c)&&(y=ni(y,a)),b=$i(b,y,!1,!0))}return n.dirs&&(b=$i(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&tr(b,n.transition),v=b,An(_),v}var ti=e=>{let t;for(let n in e)(n===`class`||n===`style`||s(n))&&((t||={})[n]=e[n]);return t},ni=(e,t)=>{let n={};for(let r in e)(!c(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function ri(e,t,n){let{props:r,children:i,component:a}=e,{props:o,children:s,patchFlag:c}=t,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?ii(r,o,l):!!o;if(c&8){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let n=e[t];if(o[n]!==r[n]&&!$r(l,n))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?ii(r,o,l):!0:!!o;return!1}function ii(e,t,n){let r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){let a=r[i];if(t[a]!==e[a]&&!$r(n,a))return!0}return!1}function ai({vnode:e,parent:t},n){for(;t;){let r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}var oi={},si=()=>Object.create(oi),ci=e=>Object.getPrototypeOf(e)===oi;function li(e,t,n,r=!1){let i={},a=si();for(let n in e.propsDefaults=Object.create(null),di(e,t,i,a),e.propsOptions[0])n in i||(i[n]=void 0);n?e.props=r?i:Lt(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function ui(e,t,n,r){let{props:i,attrs:a,vnode:{patchFlag:o}}=e,s=P(i),[c]=e.propsOptions,l=!1;if((r||o>0)&&!(o&16)){if(o&8){let n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if($r(e.emitsOptions,o))continue;let u=t[o];if(c)if(f(a,o))u!==a[o]&&(a[o]=u,l=!0);else{let t=O(o);i[t]=fi(c,s,t,u,e,!1)}else u!==a[o]&&(a[o]=u,l=!0)}}}else{di(e,t,i,a)&&(l=!0);let r;for(let a in s)(!t||!f(t,a)&&((r=k(a))===a||!f(t,r)))&&(c?n&&(n[a]!==void 0||n[r]!==void 0)&&(i[a]=fi(c,s,a,void 0,e,!0)):delete i[a]);if(a!==s)for(let e in a)(!t||!f(t,e))&&(delete a[e],l=!0)}l&&tt(e.attrs,`set`,``)}function di(e,t,n,i){let[a,o]=e.propsOptions,s=!1,c;if(t)for(let r in t){if(E(r))continue;let l=t[r],u;a&&f(a,u=O(r))?!o||!o.includes(u)?n[u]=l:(c||={})[u]=l:$r(e.emitsOptions,r)||(!(r in i)||l!==i[r])&&(i[r]=l,s=!0)}if(o){let t=P(n),i=c||r;for(let r=0;r<o.length;r++){let s=o[r];n[s]=fi(a,t,s,i[s],e,!f(i,s))}}return s}function fi(e,t,n,r,i,a){let o=e[n];if(o!=null){let e=f(o,`default`);if(e&&r===void 0){let e=o.default;if(o.type!==Function&&!o.skipFactory&&_(e)){let{propsDefaults:a}=i;if(n in a)r=a[n];else{let o=fa(i);r=a[n]=e.call(null,t),o()}}else r=e;i.ce&&i.ce._setProp(n,r)}o[0]&&(a&&!e?r=!1:o[1]&&(r===``||r===k(n))&&(r=!0))}return r}var pi=new WeakMap;function mi(e,t,n=!1){let a=n?pi:t.propsCache,o=a.get(e);if(o)return o;let s=e.props,c={},u=[],d=!1;if(!_(e)){let r=e=>{d=!0;let[n,r]=mi(e,t,!0);l(c,n),r&&u.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!d)return b(e)&&a.set(e,i),i;if(p(s))for(let e=0;e<s.length;e++){let t=O(s[e]);hi(t)&&(c[t]=r)}else if(s)for(let e in s){let t=O(e);if(hi(t)){let n=s[e],r=c[t]=p(n)||_(n)?{type:n}:l({},n),i=r.type,a=!1,o=!0;if(p(i))for(let e=0;e<i.length;++e){let t=i[e],n=_(t)&&t.name;if(n===`Boolean`){a=!0;break}else n===`String`&&(o=!1)}else a=_(i)&&i.name===`Boolean`;r[0]=a,r[1]=o,(a||f(r,`default`))&&u.push(t)}}let m=[c,u];return b(e)&&a.set(e,m),m}function hi(e){return e[0]!==`$`&&!E(e)}var gi=e=>e===`_`||e===`_ctx`||e===`$stable`,_i=e=>p(e)?e.map(ea):[ea(e)],vi=(e,t,n)=>{if(t._n)return t;let r=jn((...e)=>_i(t(...e)),n);return r._c=!1,r},yi=(e,t,n)=>{let r=e._ctx;for(let n in e){if(gi(n))continue;let i=e[n];if(_(i))t[n]=vi(n,i,r);else if(i!=null){let e=_i(i);t[n]=()=>e}}},bi=(e,t)=>{let n=_i(t);e.slots.default=()=>n},xi=(e,t,n)=>{for(let r in t)(n||!gi(r))&&(e[r]=t[r])},Si=(e,t,n)=>{let r=e.slots=si();if(e.vnode.shapeFlag&32){let e=t._;e?(xi(r,t,n),n&&oe(r,`_`,e,!0)):yi(t,r)}else t&&bi(e,t)},Ci=(e,t,n)=>{let{vnode:i,slots:a}=e,o=!0,s=r;if(i.shapeFlag&32){let e=t._;e?n&&e===1?o=!1:xi(a,t,n):(o=!t.$stable,yi(t,a)),s=t}else t&&(bi(e,t),s={default:1});if(o)for(let e in a)!gi(e)&&s[e]==null&&delete a[e]},wi=Ii;function Ti(e){return Ei(e)}function Ei(e,t){let n=le();n.__VUE__=!0;let{insert:o,remove:s,patchProp:c,createElement:l,createText:u,createComment:d,setText:f,setElementText:p,parentNode:m,nextSibling:h,setScopeId:g=a,insertStaticContent:_}=e,v=(e,t,n,r=null,i=null,a=null,o=void 0,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!qi(e,t)&&(r=_e(e),pe(e,i,a,!0),e=null),t.patchFlag===-2&&(c=!1,t.dynamicChildren=null);let{type:l,ref:u,shapeFlag:d}=t;switch(l){case Li:y(e,t,n,r);break;case Ri:b(e,t,n,r);break;case zi:e??x(t,n,r,o);break;case z:k(e,t,n,r,i,a,o,s,c);break;default:d&1?w(e,t,n,r,i,a,o,s,c):d&6?re(e,t,n,r,i,a,o,s,c):(d&64||d&128)&&l.process(e,t,n,r,i,a,o,s,c,be)}u!=null&&i?ir(u,e&&e.ref,a,t||e,!t):u==null&&e&&e.ref!=null&&ir(e.ref,null,a,e,!0)},y=(e,t,n,r)=>{if(e==null)o(t.el=u(t.children),n,r);else{let n=t.el=e.el;t.children!==e.children&&f(n,t.children)}},b=(e,t,n,r)=>{e==null?o(t.el=d(t.children||``),n,r):t.el=e.el},x=(e,t,n,r)=>{[e.el,e.anchor]=_(e.children,t,n,r,e.el,e.anchor)},S=({el:e,anchor:t},n,r)=>{let i;for(;e&&e!==t;)i=h(e),o(e,n,r),e=i;o(t,n,r)},C=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),s(e),e=n;s(t)},w=(e,t,n,r,i,a,o,s,c)=>{if(t.type===`svg`?o=`svg`:t.type===`math`&&(o=`mathml`),e==null)ee(t,n,r,i,a,o,s,c);else{let n=e.el&&e.el._isVueCE?e.el:null;try{n&&n._beginPatch(),te(e,t,i,a,o,s,c)}finally{n&&n._endPatch()}}},ee=(e,t,n,r,i,a,s,u)=>{let d,f,{props:m,shapeFlag:h,transition:g,dirs:_}=e;if(d=e.el=l(e.type,a,m&&m.is,m),h&8?p(d,e.children):h&16&&D(e.children,d,null,r,i,Di(e,a),s,u),_&&Mn(e,null,r,`created`),T(d,e,e.scopeId,s,r),m){for(let e in m)e!==`value`&&!E(e)&&c(d,e,null,m[e],a,r);`value`in m&&c(d,`value`,null,m.value,a),(f=m.onVnodeBeforeMount)&&ia(f,r,e)}_&&Mn(e,null,r,`beforeMount`);let v=ki(i,g);v&&g.beforeEnter(d),o(d,t,n),((f=m&&m.onVnodeMounted)||v||_)&&wi(()=>{f&&ia(f,r,e),v&&g.enter(d),_&&Mn(e,null,r,`mounted`)},i)},T=(e,t,n,r,i)=>{if(n&&g(e,n),r)for(let t=0;t<r.length;t++)g(e,r[t]);if(i){let n=i.subTree;if(t===n||Fi(n.type)&&(n.ssContent===t||n.ssFallback===t)){let t=i.vnode;T(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},D=(e,t,n,r,i,a,o,s,c=0)=>{for(let l=c;l<e.length;l++)v(null,e[l]=s?ta(e[l]):ea(e[l]),t,n,r,i,a,o,s)},te=(e,t,n,i,a,o,s)=>{let l=t.el=e.el,{patchFlag:u,dynamicChildren:d,dirs:f}=t;u|=e.patchFlag&16;let m=e.props||r,h=t.props||r,g;if(n&&Oi(n,!1),(g=h.onVnodeBeforeUpdate)&&ia(g,n,t,e),f&&Mn(t,e,n,`beforeUpdate`),n&&Oi(n,!0),(m.innerHTML&&h.innerHTML==null||m.textContent&&h.textContent==null)&&p(l,``),d?O(e.dynamicChildren,d,l,n,i,Di(t,a),o):s||ce(e,t,l,null,n,i,Di(t,a),o,!1),u>0){if(u&16)ne(l,m,h,n,a);else if(u&2&&m.class!==h.class&&c(l,`class`,null,h.class,a),u&4&&c(l,`style`,m.style,h.style,a),u&8){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let r=e[t],i=m[r],o=h[r];(o!==i||r===`value`)&&c(l,r,i,o,a,n)}}u&1&&e.children!==t.children&&p(l,t.children)}else !s&&d==null&&ne(l,m,h,n,a);((g=h.onVnodeUpdated)||f)&&wi(()=>{g&&ia(g,n,t,e),f&&Mn(t,e,n,`updated`)},i)},O=(e,t,n,r,i,a,o)=>{for(let s=0;s<t.length;s++){let c=e[s],l=t[s];v(c,l,c.el&&(c.type===z||!qi(c,l)||c.shapeFlag&198)?m(c.el):n,null,r,i,a,o,!0)}},ne=(e,t,n,i,a)=>{if(t!==n){if(t!==r)for(let r in t)!E(r)&&!(r in n)&&c(e,r,t[r],null,a,i);for(let r in n){if(E(r))continue;let o=n[r],s=t[r];o!==s&&r!==`value`&&c(e,r,s,o,a,i)}`value`in n&&c(e,`value`,t.value,n.value,a)}},k=(e,t,n,r,i,a,s,c,l)=>{let d=t.el=e?e.el:u(``),f=t.anchor=e?e.anchor:u(``),{patchFlag:p,dynamicChildren:m,slotScopeIds:h}=t;h&&(c=c?c.concat(h):h),e==null?(o(d,n,r),o(f,n,r),D(t.children||[],n,f,i,a,s,c,l)):p>0&&p&64&&m&&e.dynamicChildren&&e.dynamicChildren.length===m.length?(O(e.dynamicChildren,m,n,i,a,s,c),(t.key!=null||i&&t===i.subTree)&&Ai(e,t,!0)):ce(e,t,n,f,i,a,s,c,l)},re=(e,t,n,r,i,a,o,s,c)=>{t.slotScopeIds=s,e==null?t.shapeFlag&512?i.ctx.activate(t,n,r,o,c):ie(t,n,r,i,a,o,c):A(e,t,c)},ie=(e,t,n,r,i,a,o)=>{let s=e.component=sa(e,r,i);if(sr(e)&&(s.ctx.renderer=be),ga(s,!1,o),s.asyncDep){if(i&&i.registerDep(s,oe,o),!e.el){let r=s.subTree=Xi(Ri);b(null,r,t,n),e.placeholder=r.el}}else oe(s,e,t,n,i,a,o)},A=(e,t,n)=>{let r=t.component=e.component;if(ri(e,t,n))if(r.asyncDep&&!r.asyncResolved){se(r,t,n);return}else r.next=t,r.update();else t.el=e.el,r.vnode=t},oe=(e,t,n,r,i,a,o)=>{let s=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:l}=e;{let n=Mi(e);if(n){t&&(t.el=l.el,se(e,t,o)),n.asyncDep.then(()=>{e.isUnmounted||s()});return}}let u=t,d;Oi(e,!1),t?(t.el=l.el,se(e,t,o)):t=l,n&&ae(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&ia(d,c,t,l),Oi(e,!0);let f=ei(e),p=e.subTree;e.subTree=f,v(p,f,m(p.el),_e(p),e,i,a),t.el=f.el,u===null&&ai(e,f.el),r&&wi(r,i),(d=t.props&&t.props.onVnodeUpdated)&&wi(()=>ia(d,c,t,l),i)}else{let o,{el:s,props:c}=t,{bm:l,m:u,parent:d,root:f,type:p}=e,m=or(t);if(Oi(e,!1),l&&ae(l),!m&&(o=c&&c.onVnodeBeforeMount)&&ia(o,d,t),Oi(e,!0),s&&M){let t=()=>{e.subTree=ei(e),M(s,e.subTree,e,i,null)};m&&p.__asyncHydrate?p.__asyncHydrate(s,e,t):t()}else{f.ce&&f.ce._def.shadowRoot!==!1&&f.ce._injectChildStyle(p);let o=e.subTree=ei(e);v(null,o,n,r,e,i,a),t.el=o.el}if(u&&wi(u,i),!m&&(o=c&&c.onVnodeMounted)){let e=t;wi(()=>ia(o,d,e),i)}(t.shapeFlag&256||d&&or(d.vnode)&&d.vnode.shapeFlag&256)&&e.a&&wi(e.a,i),e.isMounted=!0,t=n=r=null}};e.scope.on();let c=e.effect=new Oe(s);e.scope.off();let l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>xn(u),Oi(e,!0),l()},se=(e,t,n)=>{t.component=e;let r=e.vnode.props;e.vnode=t,e.next=null,ui(e,t.props,r,n),Ci(e,t.children,n),Ue(),wn(e),We()},ce=(e,t,n,r,i,a,o,s,c=!1)=>{let l=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:m}=t;if(f>0){if(f&128){de(l,d,n,r,i,a,o,s,c);return}else if(f&256){ue(l,d,n,r,i,a,o,s,c);return}}m&8?(u&16&&ge(l,i,a),d!==l&&p(n,d)):u&16?m&16?de(l,d,n,r,i,a,o,s,c):ge(l,i,a,!0):(u&8&&p(n,``),m&16&&D(d,n,r,i,a,o,s,c))},ue=(e,t,n,r,a,o,s,c,l)=>{e||=i,t||=i;let u=e.length,d=t.length,f=Math.min(u,d),p;for(p=0;p<f;p++){let r=t[p]=l?ta(t[p]):ea(t[p]);v(e[p],r,n,null,a,o,s,c,l)}u>d?ge(e,a,o,!0,!1,f):D(t,n,r,a,o,s,c,l,f)},de=(e,t,n,r,a,o,s,c,l)=>{let u=0,d=t.length,f=e.length-1,p=d-1;for(;u<=f&&u<=p;){let r=e[u],i=t[u]=l?ta(t[u]):ea(t[u]);if(qi(r,i))v(r,i,n,null,a,o,s,c,l);else break;u++}for(;u<=f&&u<=p;){let r=e[f],i=t[p]=l?ta(t[p]):ea(t[p]);if(qi(r,i))v(r,i,n,null,a,o,s,c,l);else break;f--,p--}if(u>f){if(u<=p){let e=p+1,i=e<d?t[e].el:r;for(;u<=p;)v(null,t[u]=l?ta(t[u]):ea(t[u]),n,i,a,o,s,c,l),u++}}else if(u>p)for(;u<=f;)pe(e[u],a,o,!0),u++;else{let m=u,h=u,g=new Map;for(u=h;u<=p;u++){let e=t[u]=l?ta(t[u]):ea(t[u]);e.key!=null&&g.set(e.key,u)}let _,y=0,b=p-h+1,x=!1,S=0,C=Array(b);for(u=0;u<b;u++)C[u]=0;for(u=m;u<=f;u++){let r=e[u];if(y>=b){pe(r,a,o,!0);continue}let i;if(r.key!=null)i=g.get(r.key);else for(_=h;_<=p;_++)if(C[_-h]===0&&qi(r,t[_])){i=_;break}i===void 0?pe(r,a,o,!0):(C[i-h]=u+1,i>=S?S=i:x=!0,v(r,t[i],n,null,a,o,s,c,l),y++)}let w=x?ji(C):i;for(_=w.length-1,u=b-1;u>=0;u--){let e=h+u,i=t[e],f=t[e+1],p=e+1<d?f.el||Pi(f):r;C[u]===0?v(null,i,n,p,a,o,s,c,l):x&&(_<0||u!==w[_]?fe(i,n,p,2):_--)}}},fe=(e,t,n,r,i=null)=>{let{el:a,type:c,transition:l,children:u,shapeFlag:d}=e;if(d&6){fe(e.component.subTree,t,n,r);return}if(d&128){e.suspense.move(t,n,r);return}if(d&64){c.move(e,t,n,be);return}if(c===z){o(a,t,n);for(let e=0;e<u.length;e++)fe(u[e],t,n,r);o(e.anchor,t,n);return}if(c===zi){S(e,t,n);return}if(r!==2&&d&1&&l)if(r===0)l.beforeEnter(a),o(a,t,n),wi(()=>l.enter(a),i);else{let{leave:r,delayLeave:i,afterLeave:c}=l,u=()=>{e.ctx.isUnmounted?s(a):o(a,t,n)},d=()=>{a._isLeaving&&a[er](!0),r(a,()=>{u(),c&&c()})};i?i(a,u,d):d()}else o(a,t,n)},pe=(e,t,n,r=!1,i=!1)=>{let{type:a,props:o,ref:s,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:d,dirs:f,cacheIndex:p}=e;if(d===-2&&(i=!1),s!=null&&(Ue(),ir(s,null,n,e,!0),We()),p!=null&&(t.renderCache[p]=void 0),u&256){t.ctx.deactivate(e);return}let m=u&1&&f,h=!or(e),g;if(h&&(g=o&&o.onVnodeBeforeUnmount)&&ia(g,t,e),u&6)he(e.component,n,r);else{if(u&128){e.suspense.unmount(n,r);return}m&&Mn(e,null,t,`beforeUnmount`),u&64?e.type.remove(e,t,n,be,r):l&&!l.hasOnce&&(a!==z||d>0&&d&64)?ge(l,t,n,!1,!0):(a===z&&d&384||!i&&u&16)&&ge(c,t,n),r&&me(e)}(h&&(g=o&&o.onVnodeUnmounted)||m)&&wi(()=>{g&&ia(g,t,e),m&&Mn(e,null,t,`unmounted`)},n)},me=e=>{let{type:t,el:n,anchor:r,transition:i}=e;if(t===z){j(n,r);return}if(t===zi){C(e);return}let a=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(e.shapeFlag&1&&i&&!i.persisted){let{leave:t,delayLeave:r}=i,o=()=>t(n,a);r?r(e.el,a,o):o()}else a()},j=(e,t)=>{let n;for(;e!==t;)n=h(e),s(e),e=n;s(t)},he=(e,t,n)=>{let{bum:r,scope:i,job:a,subTree:o,um:s,m:c,a:l}=e;Ni(c),Ni(l),r&&ae(r),i.stop(),a&&(a.flags|=8,pe(o,e,t,n)),s&&wi(s,t),wi(()=>{e.isUnmounted=!0},t)},ge=(e,t,n,r=!1,i=!1,a=0)=>{for(let o=a;o<e.length;o++)pe(e[o],t,n,r,i)},_e=e=>{if(e.shapeFlag&6)return _e(e.component.subTree);if(e.shapeFlag&128)return e.suspense.next();let t=h(e.anchor||e.el),n=t&&t[Vn];return n?h(n):t},ve=!1,ye=(e,t,n)=>{let r;e==null?t._vnode&&(pe(t._vnode,null,null,!0),r=t._vnode.component):v(t._vnode||null,e,t,null,null,null,n),t._vnode=e,ve||=(ve=!0,wn(r),Tn(),!1)},be={p:v,um:pe,m:fe,r:me,mt:ie,mc:D,pc:ce,pbc:O,n:_e,o:e},xe,M;return t&&([xe,M]=t(be)),{render:ye,hydrate:xe,createApp:qr(ye,xe)}}function Di({type:e,props:t},n){return n===`svg`&&e===`foreignObject`||n===`mathml`&&e===`annotation-xml`&&t&&t.encoding&&t.encoding.includes(`html`)?void 0:n}function Oi({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ki(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ai(e,t,n=!1){let r=e.children,i=t.children;if(p(r)&&p(i))for(let t=0;t<r.length;t++){let a=r[t],o=i[t];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[t]=ta(i[t]),o.el=a.el),!n&&o.patchFlag!==-2&&Ai(a,o)),o.type===Li&&(o.patchFlag===-1?o.__elIndex=t+(e.type===z?1:0):o.el=a.el),o.type===Ri&&!o.el&&(o.el=a.el)}}function ji(e){let t=e.slice(),n=[0],r,i,a,o,s,c=e.length;for(r=0;r<c;r++){let c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(a=0,o=n.length-1;a<o;)s=a+o>>1,e[n[s]]<c?a=s+1:o=s;c<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function Mi(e){let t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Mi(t)}function Ni(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Pi(e){if(e.placeholder)return e.placeholder;let t=e.component;return t?Pi(t.subTree):null}var Fi=e=>e.__isSuspense;function Ii(e,t){t&&t.pendingBranch?p(e)?t.effects.push(...e):t.effects.push(e):Cn(e)}var z=Symbol.for(`v-fgt`),Li=Symbol.for(`v-txt`),Ri=Symbol.for(`v-cmt`),zi=Symbol.for(`v-stc`),Bi=[],Vi=null;function B(e=!1){Bi.push(Vi=e?null:[])}function Hi(){Bi.pop(),Vi=Bi[Bi.length-1]||null}var Ui=1;function Wi(e,t=!1){Ui+=e,e<0&&Vi&&t&&(Vi.hasOnce=!0)}function Gi(e){return e.dynamicChildren=Ui>0?Vi||i:null,Hi(),Ui>0&&Vi&&Vi.push(e),e}function V(e,t,n,r,i,a){return Gi(U(e,t,n,r,i,a,!0))}function H(e,t,n,r,i){return Gi(Xi(e,t,n,r,i,!0))}function Ki(e){return e?e.__v_isVNode===!0:!1}function qi(e,t){return e.type===t.type&&e.key===t.key}var Ji=({key:e})=>e??null,Yi=({ref:e,ref_key:t,ref_for:n})=>(typeof e==`number`&&(e=``+e),e==null?null:v(e)||qt(e)||_(e)?{i:On,r:e,k:t,f:!!n}:e);function U(e,t=null,n=null,r=0,i=null,a=e===z?0:1,o=!1,s=!1){let c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ji(t),ref:t&&Yi(t),scopeId:kn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:On};return s?(na(c,n),a&128&&e.normalize(c)):n&&(c.shapeFlag|=v(n)?8:16),Ui>0&&!o&&Vi&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Vi.push(c),c}var Xi=Zi;function Zi(e,t=null,n=null,r=0,i=null,a=!1){if((!e||e===wr)&&(e=Ri),Ki(e)){let r=$i(e,t,!0);return n&&na(r,n),Ui>0&&!a&&Vi&&(r.shapeFlag&6?Vi[Vi.indexOf(e)]=r:Vi.push(r)),r.patchFlag=-2,r}if(Ta(e)&&(e=e.__vccOpts),t){t=Qi(t);let{class:e,style:n}=t;e&&!v(e)&&(t.class=j(e)),b(n)&&(Ut(n)&&!p(n)&&(n=l({},n)),t.style=ue(n))}let o=v(e)?1:Fi(e)?128:Hn(e)?64:b(e)?4:_(e)?2:0;return U(e,t,n,r,i,o,a,!0)}function Qi(e){return e?Ut(e)||ci(e)?l({},e):e:null}function $i(e,t,n=!1,r=!1){let{props:i,ref:a,patchFlag:o,children:s,transition:c}=e,l=t?ra(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Ji(l),ref:t&&t.ref?n&&a?p(a)?a.concat(Yi(t)):[a,Yi(t)]:Yi(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==z?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$i(e.ssContent),ssFallback:e.ssFallback&&$i(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&tr(u,c.clone(u)),u}function W(e=` `,t=0){return Xi(Li,null,e,t)}function G(e,t){let n=Xi(zi,null,e);return n.staticCount=t,n}function K(e=``,t=!1){return t?(B(),H(Ri,null,e)):Xi(Ri,null,e)}function ea(e){return e==null||typeof e==`boolean`?Xi(Ri):p(e)?Xi(z,null,e.slice()):Ki(e)?ta(e):Xi(Li,null,String(e))}function ta(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$i(e)}function na(e,t){let n=0,{shapeFlag:r}=e;if(t==null)t=null;else if(p(t))n=16;else if(typeof t==`object`)if(r&65){let n=t.default;n&&(n._c&&(n._d=!1),na(e,n()),n._c&&(n._d=!0));return}else{n=32;let r=t._;!r&&!ci(t)?t._ctx=On:r===3&&On&&(On.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _(t)?(t={default:t,_ctx:On},n=32):(t=String(t),r&64?(n=16,t=[W(t)]):n=8);e.children=t,e.shapeFlag|=n}function ra(...e){let t={};for(let n=0;n<e.length;n++){let r=e[n];for(let e in r)if(e===`class`)t.class!==r.class&&(t.class=j([t.class,r.class]));else if(e===`style`)t.style=ue([t.style,r.style]);else if(s(e)){let n=t[e],i=r[e];i&&n!==i&&!(p(n)&&n.includes(i))&&(t[e]=n?[].concat(n,i):i)}else e!==``&&(t[e]=r[e])}return t}function ia(e,t,n,r=null){ln(e,t,7,[n,r])}var aa=Gr(),oa=0;function sa(e,t,n){let i=e.type,a=(t?t.appContext:e.appContext)||aa,o={uid:oa++,vnode:e,type:i,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Te(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:[``,0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mi(i,a),emitsOptions:Qr(i,a),emit:null,emitted:null,propsDefaults:r,inheritAttrs:i.inheritAttrs,ctx:r,data:r,props:r,attrs:r,slots:r,refs:r,setupState:r,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Xr.bind(null,o),e.ce&&e.ce(o),o}var ca=null,la=()=>ca||On,ua,da;{let e=le(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};ua=t(`__VUE_INSTANCE_SETTERS__`,e=>ca=e),da=t(`__VUE_SSR_SETTERS__`,e=>ha=e)}var fa=e=>{let t=ca;return ua(e),e.scope.on(),()=>{e.scope.off(),ua(t)}},pa=()=>{ca&&ca.scope.off(),ua(null)};function ma(e){return e.vnode.shapeFlag&4}var ha=!1;function ga(e,t=!1,n=!1){t&&da(t);let{props:r,children:i}=e.vnode,a=ma(e);li(e,r,a,t),Si(e,i,n||t);let o=a?_a(e,t):void 0;return t&&da(!1),o}function _a(e,t){let n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Or);let{setup:r}=n;if(r){Ue();let n=e.setupContext=r.length>1?Ca(e):null,i=fa(e),a=cn(r,e,0,[e.props,n]),o=x(a);if(We(),i(),(o||e.sp)&&!or(e)&&nr(e),o){if(a.then(pa,pa),t)return a.then(n=>{va(e,n,t)}).catch(t=>{un(t,e,0)});e.asyncDep=a}else va(e,a,t)}else xa(e,t)}function va(e,t,n){_(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:b(t)&&(e.setupState=Qt(t)),xa(e,n)}var ya,ba;function xa(e,t,n){let r=e.type;if(!e.render){if(!t&&ya&&!r.render){let t=r.template||Fr(e).template;if(t){let{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:o}=r;r.render=ya(t,l(l({isCustomElement:n,delimiters:a},i),o))}}e.render=r.render||a,ba&&ba(e)}{let t=fa(e);Ue();try{jr(e)}finally{We(),t()}}}var Sa={get(e,t){return et(e,`get`,``),e[t]}};function Ca(e){return{attrs:new Proxy(e.attrs,Sa),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}function wa(e){return e.exposed?e.exposeProxy||=new Proxy(Qt(Wt(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Er)return Er[n](e)},has(e,t){return t in e||t in Er}}):e.proxy}function Ta(e){return _(e)&&`__vccOpts`in e}var q=(e,t)=>en(e,t,ha),Ea=`3.5.26`,Da=void 0,Oa=typeof window<`u`&&window.trustedTypes;if(Oa)try{Da=Oa.createPolicy(`vue`,{createHTML:e=>e})}catch{}var ka=Da?e=>Da.createHTML(e):e=>e,Aa=`http://www.w3.org/2000/svg`,ja=`http://www.w3.org/1998/Math/MathML`,Ma=typeof document<`u`?document:null,Na=Ma&&Ma.createElement(`template`),Pa={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{let t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{let i=t===`svg`?Ma.createElementNS(Aa,e):t===`mathml`?Ma.createElementNS(ja,e):n?Ma.createElement(e,{is:n}):Ma.createElement(e);return e===`select`&&r&&r.multiple!=null&&i.setAttribute(`multiple`,r.multiple),i},createText:e=>Ma.createTextNode(e),createComment:e=>Ma.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ma.querySelector(e),setScopeId(e,t){e.setAttribute(t,``)},insertStaticContent(e,t,n,r,i,a){let o=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{Na.innerHTML=ka(r===`svg`?`<svg>${e}</svg>`:r===`mathml`?`<math>${e}</math>`:e);let i=Na.content;if(r===`svg`||r===`mathml`){let e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Fa=Symbol(`_vtc`);function Ia(e,t,n){let r=e[Fa];r&&(t=(t?[t,...r]:[...r]).join(` `)),t==null?e.removeAttribute(`class`):n?e.setAttribute(`class`,t):e.className=t}var La=Symbol(`_vod`),Ra=Symbol(`_vsh`),za=Symbol(``),Ba=/(?:^|;)\s*display\s*:/;function Va(e,t,n){let r=e.style,i=v(n),a=!1;if(n&&!i){if(t)if(v(t))for(let e of t.split(`;`)){let t=e.slice(0,e.indexOf(`:`)).trim();n[t]??Ua(r,t,``)}else for(let e in t)n[e]??Ua(r,e,``);for(let e in n)e===`display`&&(a=!0),Ua(r,e,n[e])}else if(i){if(t!==n){let e=r[za];e&&(n+=`;`+e),r.cssText=n,a=Ba.test(n)}}else t&&e.removeAttribute(`style`);La in e&&(e[La]=a?r.display:``,e[Ra]&&(r.display=`none`))}var Ha=/\s*!important$/;function Ua(e,t,n){if(p(n))n.forEach(n=>Ua(e,t,n));else if(n??=``,t.startsWith(`--`))e.setProperty(t,n);else{let r=Ka(e,t);Ha.test(n)?e.setProperty(k(r),n.replace(Ha,``),`important`):e[r]=n}}var Wa=[`Webkit`,`Moz`,`ms`],Ga={};function Ka(e,t){let n=Ga[t];if(n)return n;let r=O(t);if(r!==`filter`&&r in e)return Ga[t]=r;r=re(r);for(let n=0;n<Wa.length;n++){let i=Wa[n]+r;if(i in e)return Ga[t]=i}return t}var qa=`http://www.w3.org/1999/xlink`;function Ja(e,t,n,r,i,a=ge(t)){r&&t.startsWith(`xlink:`)?n==null?e.removeAttributeNS(qa,t.slice(6,t.length)):e.setAttributeNS(qa,t,n):n==null||a&&!_e(n)?e.removeAttribute(t):e.setAttribute(t,a?``:y(n)?String(n):n)}function Ya(e,t,n,r,i){if(t===`innerHTML`||t===`textContent`){n!=null&&(e[t]=t===`innerHTML`?ka(n):n);return}let a=e.tagName;if(t===`value`&&a!==`PROGRESS`&&!a.includes(`-`)){let r=a===`OPTION`?e.getAttribute(`value`)||``:e.value,i=n==null?e.type===`checkbox`?`on`:``:String(n);(r!==i||!(`_value`in e))&&(e.value=i),n??e.removeAttribute(t),e._value=n;return}let o=!1;if(n===``||n==null){let r=typeof e[t];r===`boolean`?n=_e(n):n==null&&r===`string`?(n=``,o=!0):r===`number`&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Xa(e,t,n,r){e.addEventListener(t,n,r)}function Za(e,t,n,r){e.removeEventListener(t,n,r)}var Qa=Symbol(`_vei`);function $a(e,t,n,r,i=null){let a=e[Qa]||(e[Qa]={}),o=a[t];if(r&&o)o.value=r;else{let[n,s]=to(t);r?Xa(e,n,a[t]=ao(r,i),s):o&&(Za(e,n,o,s),a[t]=void 0)}}var eo=/(?:Once|Passive|Capture)$/;function to(e){let t;if(eo.test(e)){t={};let n;for(;n=e.match(eo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===`:`?e.slice(3):k(e.slice(2)),t]}var no=0,ro=Promise.resolve(),io=()=>no||=(ro.then(()=>no=0),Date.now());function ao(e,t){let n=e=>{if(!e._vts)e._vts=Date.now();else if(e._vts<=n.attached)return;ln(oo(e,n.value),t,5,[e])};return n.value=e,n.attached=io(),n}function oo(e,t){if(p(t)){let n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}else return t}var so=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,co=(e,t,n,r,i,a)=>{let o=i===`svg`;t===`class`?Ia(e,r,o):t===`style`?Va(e,n,r):s(t)?c(t)||$a(e,t,n,r,a):(t[0]===`.`?(t=t.slice(1),!0):t[0]===`^`?(t=t.slice(1),!1):lo(e,t,r,o))?(Ya(e,t,r),!e.tagName.includes(`-`)&&(t===`value`||t===`checked`||t===`selected`)&&Ja(e,t,r,o,a,t!==`value`)):e._isVueCE&&(/[A-Z]/.test(t)||!v(r))?Ya(e,O(t),r,a,t):(t===`true-value`?e._trueValue=r:t===`false-value`&&(e._falseValue=r),Ja(e,t,r,o))};function lo(e,t,n,r){if(r)return!!(t===`innerHTML`||t===`textContent`||t in e&&so(t)&&_(n));if(t===`spellcheck`||t===`draggable`||t===`translate`||t===`autocorrect`||t===`sandbox`&&e.tagName===`IFRAME`||t===`form`||t===`list`&&e.tagName===`INPUT`||t===`type`&&e.tagName===`TEXTAREA`)return!1;if(t===`width`||t===`height`){let t=e.tagName;if(t===`IMG`||t===`VIDEO`||t===`CANVAS`||t===`SOURCE`)return!1}return so(t)&&v(n)?!1:t in e}var uo=e=>{let t=e.props[`onUpdate:modelValue`]||!1;return p(t)?e=>ae(t,e):t};function fo(e){e.target.composing=!0}function po(e){let t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event(`input`)))}var mo=Symbol(`_assign`);function ho(e,t,n){return t&&(e=e.trim()),n&&(e=se(e)),e}var J={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[mo]=uo(i);let a=r||i.props&&i.props.type===`number`;Xa(e,t?`change`:`input`,t=>{t.target.composing||e[mo](ho(e.value,n,a))}),(n||a)&&Xa(e,`change`,()=>{e.value=ho(e.value,n,a)}),t||(Xa(e,`compositionstart`,fo),Xa(e,`compositionend`,po),Xa(e,`change`,po))},mounted(e,{value:t}){e.value=t??``},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:a}},o){if(e[mo]=uo(o),e.composing)return;let s=(a||e.type===`number`)&&!/^0\d/.test(e.value)?se(e.value):e.value,c=t??``;s!==c&&(document.activeElement===e&&e.type!==`range`&&(r&&t===n||i&&e.value.trim()===c)||(e.value=c))}},go={deep:!0,created(e,t,n){e[mo]=uo(n),Xa(e,`change`,()=>{let t=e._modelValue,n=xo(e),r=e.checked,i=e[mo];if(p(t)){let e=be(t,n),a=e!==-1;if(r&&!a)i(t.concat(n));else if(!r&&a){let n=[...t];n.splice(e,1),i(n)}}else if(h(t)){let e=new Set(t);r?e.add(n):e.delete(n),i(e)}else i(So(e,r))})},mounted:_o,beforeUpdate(e,t,n){e[mo]=uo(n),_o(e,t,n)}};function _o(e,{value:t,oldValue:n},r){e._modelValue=t;let i;if(p(t))i=be(t,r.props.value)>-1;else if(h(t))i=t.has(r.props.value);else{if(t===n)return;i=ye(t,So(e,!0))}e.checked!==i&&(e.checked=i)}var vo={created(e,{value:t},n){e.checked=ye(t,n.props.value),e[mo]=uo(n),Xa(e,`change`,()=>{e[mo](xo(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[mo]=uo(r),t!==n&&(e.checked=ye(t,r.props.value))}},yo={deep:!0,created(e,{value:t,modifiers:{number:n}},r){let i=h(t);Xa(e,`change`,()=>{let t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>n?se(xo(e)):xo(e));e[mo](e.multiple?i?new Set(t):t:t[0]),e._assigning=!0,yn(()=>{e._assigning=!1})}),e[mo]=uo(r)},mounted(e,{value:t}){bo(e,t)},beforeUpdate(e,t,n){e[mo]=uo(n)},updated(e,{value:t}){e._assigning||bo(e,t)}};function bo(e,t){let n=e.multiple,r=p(t);if(!(n&&!r&&!h(t))){for(let i=0,a=e.options.length;i<a;i++){let a=e.options[i],o=xo(a);if(n)if(r){let e=typeof o;e===`string`||e===`number`?a.selected=t.some(e=>String(e)===String(o)):a.selected=be(t,o)>-1}else a.selected=t.has(o);else if(ye(xo(a),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function xo(e){return`_value`in e?e._value:e.value}function So(e,t){let n=t?`_trueValue`:`_falseValue`;return n in e?e[n]:t}var Co={created(e,t,n){To(e,t,n,null,`created`)},mounted(e,t,n){To(e,t,n,null,`mounted`)},beforeUpdate(e,t,n,r){To(e,t,n,r,`beforeUpdate`)},updated(e,t,n,r){To(e,t,n,r,`updated`)}};function wo(e,t){switch(e){case`SELECT`:return yo;case`TEXTAREA`:return J;default:switch(t){case`checkbox`:return go;case`radio`:return vo;default:return J}}}function To(e,t,n,r,i){let a=wo(e.tagName,n.props&&n.props.type)[i];a&&a(e,t,n,r)}var Eo=[`ctrl`,`shift`,`alt`,`meta`],Do={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>`button`in e&&e.button!==0,middle:e=>`button`in e&&e.button!==1,right:e=>`button`in e&&e.button!==2,exact:(e,t)=>Eo.some(n=>e[`${n}Key`]&&!t.includes(n))},Y=(e,t)=>{let n=e._withMods||={},r=t.join(`.`);return n[r]||(n[r]=((n,...r)=>{for(let e=0;e<t.length;e++){let r=Do[t[e]];if(r&&r(n,t))return}return e(n,...r)}))},Oo={esc:`escape`,space:` `,up:`arrow-up`,left:`arrow-left`,right:`arrow-right`,down:`arrow-down`,delete:`backspace`},ko=(e,t)=>{let n=e._withKeys||={},r=t.join(`.`);return n[r]||(n[r]=(n=>{if(!(`key`in n))return;let r=k(n.key);if(t.some(e=>e===r||Oo[e]===r))return e(n)}))},Ao=l({patchProp:co},Pa),jo;function Mo(){return jo||=Ti(Ao)}var No=((...e)=>{let t=Mo().createApp(...e),{mount:n}=t;return t.mount=e=>{let r=Fo(e);if(!r)return;let i=t._component;!_(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent=``);let a=n(r,!1,Po(r));return r instanceof Element&&(r.removeAttribute(`v-cloak`),r.setAttribute(`data-v-app`,``)),a},t});function Po(e){if(e instanceof SVGElement)return`svg`;if(typeof MathMLElement==`function`&&e instanceof MathMLElement)return`mathml`}function Fo(e){return v(e)?document.querySelector(e):e}const X={getItem:e=>localStorage.getItem(e)||sessionStorage.getItem(e),setItem:(e,t,n=!0)=>{n?localStorage.setItem(e,t):sessionStorage.setItem(e,t)},removeItem:e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)},clear:()=>{localStorage.clear(),sessionStorage.clear()}};var Io=`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,Lo={class:`navbar`},Ro={class:`navbar-container`},zo={class:`mobile-cta`},Bo={class:`navbar-actions`},Vo=L({__name:`Navbar`,emits:[`navigate`],setup(e,{emit:t}){let n=t,r=F(!1),i=()=>{r.value=!r.value},a=e=>{n(`navigate`,e),r.value=!1};return(e,t)=>(B(),V(`nav`,Lo,[U(`div`,Ro,[U(`div`,{class:`navbar-brand`,onClick:t[0]||=e=>a(`landing`),style:{cursor:`pointer`}},[...t[6]||=[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`brand-logo`},null,-1)]]),U(`button`,{class:j([`hamburger`,{"is-active":r.value}]),onClick:i},[...t[7]||=[U(`span`,{class:`bar`},null,-1),U(`span`,{class:`bar`},null,-1),U(`span`,{class:`bar`},null,-1)]],2),U(`div`,{class:j([`navbar-menu`,{"is-open":r.value}])},[U(`button`,{class:`menu-close`,onClick:i},``),U(`a`,{href:`#`,class:`menu-link`,onClick:t[1]||=Y(e=>a(`landing`),[`prevent`])},`Patient`),U(`a`,{href:`#`,class:`menu-link`,onClick:t[2]||=Y(e=>a(`login`),[`prevent`])},`IDEL`),U(`a`,{href:`#`,class:`menu-link`,onClick:t[3]||=Y(e=>a(`landing`),[`prevent`])},`Aide`),U(`div`,zo,[U(`button`,{class:`btn-cta`,onClick:t[4]||=e=>a(`service-selection`)},`Prendre rendez-vous`)])],2),U(`div`,Bo,[U(`button`,{class:`btn-cta`,onClick:t[5]||=e=>a(`service-selection`)},`Prendre rendez-vous`)])]),r.value?(B(),V(`div`,{key:0,class:`menu-overlay`,onClick:i})):K(``,!0)]))}}),Z=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},Ho=Z(Vo,[[`__scopeId`,`data-v-c575375b`]]),Uo={class:`login-wrapper`},Wo={class:`login-info-side`},Go={class:`info-content`},Ko={class:`login-form-side`},qo={class:`login-card`},Jo={key:0,class:`error-banner`},Yo={class:`input-group`},Xo={class:`input-wrapper`},Zo=[`disabled`],Qo={class:`input-group`},$o={class:`input-wrapper`},es=[`type`,`disabled`],ts=[`disabled`],ns={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},rs={key:1,xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},is={class:`form-options`},as={class:`checkbox-container`},os=[`disabled`],ss=[`disabled`],cs={class:`login-footer`},ls=Z(L({__name:`Login`,emits:[`navigate`],setup(e,{emit:t}){let n=t,r=F(``),i=F(``),a=F(!1),o=F(``),s=F(!1),c=F(!1),l=async()=>{o.value=``,s.value=!0;try{let e=await fetch(`/api/auth/login`,{method:`POST`,headers:{"Content-Type":`application/json`,accept:`*/*`},body:JSON.stringify({email:r.value,password:i.value})});if(!e.ok){let t=await e.json().catch(()=>({}));throw t.message&&t.message.includes(`banned`)?Error(t.message):Error(t.message||`Invalid credentials`)}let t=await e.json();console.log(`Login successful:`,t),X.clear(),X.setItem(`access_token`,t.access_token,c.value);let a=t.id||t.user&&t.user.id;a?(console.log(`Storing user_id:`,a),X.setItem(`user_id`,a,c.value)):console.warn(`Login successful but no ID found in response:`,t),X.setItem(`user_role`,t.role,c.value),X.setItem(`user_name`,t.name,c.value),X.setItem(`user_status`,t.status,c.value),t.status===`PENDING`?n(`navigate`,`verification`):t.role===`admin`?n(`navigate`,`admin-dashboard`):t.role===`professional`?n(`navigate`,`pro`):n(`navigate`,`landing`)}catch(e){console.error(`Login error:`,e),o.value=e.message||`Connection failed. Please try again.`}finally{s.value=!1}};return(e,t)=>(B(),V(`div`,Uo,[U(`div`,Wo,[U(`div`,Go,[U(`div`,{class:`brand-badge`,onClick:t[0]||=e=>n(`navigate`,`landing`),style:{cursor:`pointer`}},[...t[7]||=[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`brand-logo-img`},null,-1)]]),t[8]||=G(`<h1 data-v-6cea9cc2>L&#39;excellence des soins, <br data-v-6cea9cc2> votre service.</h1><p data-v-6cea9cc2>Rejoignez notre rseau de professionnels de sant et grez vos rendez-vous en toute simplicit.</p><div class="stats-grid" data-v-6cea9cc2><div class="stat-item" data-v-6cea9cc2><span class="stat-value" data-v-6cea9cc2>10k+</span><span class="stat-label" data-v-6cea9cc2>Patients</span></div><div class="stat-item" data-v-6cea9cc2><span class="stat-value" data-v-6cea9cc2>500+</span><span class="stat-label" data-v-6cea9cc2>IDEL</span></div></div><div class="support-message" data-v-6cea9cc2><p data-v-6cea9cc2>Besoin d&#39;aide ? <a href="#" data-v-6cea9cc2>Contactez notre support</a></p></div>`,4)])]),U(`div`,Ko,[U(`div`,qo,[t[18]||=U(`div`,{class:`login-header`},[U(`h1`,null,`Bon retour`),U(`p`,null,`Veuillez entrer vos coordonnes pour vous connecter.`)],-1),o.value?(B(),V(`div`,Jo,M(o.value),1)):K(``,!0),U(`form`,{onSubmit:Y(l,[`prevent`]),class:`login-form`},[U(`div`,Yo,[t[10]||=U(`label`,{for:`email`},`Email`,-1),U(`div`,Xo,[t[9]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`path`,{d:`M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z`}),U(`polyline`,{points:`22,6 12,13 2,6`})],-1),I(U(`input`,{"onUpdate:modelValue":t[1]||=e=>r.value=e,type:`text`,id:`email`,placeholder:`nom@entreprise.com`,required:``,disabled:s.value},null,8,Zo),[[J,r.value]])])]),U(`div`,Qo,[t[14]||=U(`label`,{for:`password`},`Mot de passe`,-1),U(`div`,$o,[t[13]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`rect`,{x:`3`,y:`11`,width:`18`,height:`11`,rx:`2`,ry:`2`}),U(`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`})],-1),I(U(`input`,{"onUpdate:modelValue":t[2]||=e=>i.value=e,type:a.value?`text`:`password`,id:`password`,placeholder:``,required:``,disabled:s.value},null,8,es),[[Co,i.value]]),U(`button`,{type:`button`,class:`toggle-password`,onClick:t[3]||=e=>a.value=!a.value,tabindex:`-1`,disabled:s.value},[a.value?(B(),V(`svg`,rs,[...t[12]||=[U(`path`,{d:`M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24`},null,-1),U(`line`,{x1:`1`,y1:`1`,x2:`23`,y2:`23`},null,-1)]])):(B(),V(`svg`,ns,[...t[11]||=[U(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`},null,-1),U(`circle`,{cx:`12`,cy:`12`,r:`3`},null,-1)]]))],8,ts)])]),U(`div`,is,[U(`label`,as,[I(U(`input`,{type:`checkbox`,"onUpdate:modelValue":t[4]||=e=>c.value=e,disabled:s.value},null,8,os),[[go,c.value]]),t[15]||=U(`span`,{class:`checkmark`},null,-1),t[16]||=W(` Se souvenir de moi `,-1)]),U(`a`,{href:`#`,class:`forgot-link`,onClick:t[5]||=Y(e=>n(`navigate`,`forgot-password`),[`prevent`])},`Mot de passe oubli ?`)]),U(`button`,{type:`submit`,class:`login-button`,disabled:s.value},M(s.value?`Connexion...`:`Se connecter`),9,ss)],32),U(`div`,cs,[U(`p`,null,[t[17]||=W(`Vous n'avez pas de compte ? `,-1),U(`a`,{href:`#`,onClick:t[6]||=Y(e=>n(`navigate`,`signup`),[`prevent`])},`En crer un`)])])])])]))}}),[[`__scopeId`,`data-v-6cea9cc2`]]),us={class:`signup-wrapper`},ds={class:`signup-info-side`},fs={class:`info-content`},ps={class:`signup-form-side`},ms={class:`signup-card`},hs={key:0,class:`error-banner`},gs={class:`input-group`},_s={class:`input-wrapper`},vs=[`disabled`],ys={class:`input-group`},bs={class:`input-wrapper`},xs=[`disabled`],Ss={class:`input-group`},Cs={class:`input-wrapper`},ws=[`type`,`disabled`],Ts={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},Es={key:1,xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},Ds={class:`input-group`},Os={class:`input-wrapper`},ks=[`type`,`disabled`],As={class:`form-options`},js={class:`checkbox-container`},Ms=[`disabled`],Ns=[`disabled`],Ps={class:`signup-footer`},Fs=Z(L({__name:`signup`,emits:[`navigate`],setup(e,{emit:t}){let n=t,r=F(``),i=F(``),a=F(``),o=F(``),s=F(!1),c=F(!1),l=F(!1),u=F(``),d=async()=>{if(u.value=``,a.value!==o.value){u.value=`Les mots de passe ne correspondent pas.`;return}c.value=!0;try{let e=await(await fetch(`/api/auth/professional/register`,{method:`POST`,headers:{"Content-Type":`application/json`,accept:`*/*`},body:JSON.stringify({email:i.value,password:a.value,name:r.value})})).json();console.log(`Signup successful:`,e),X.clear();let t=e.id||e.user&&e.user.id;t&&(console.log(`Storing user_id after signup:`,t),X.setItem(`user_id`,t,l.value)),e.access_token&&X.setItem(`access_token`,e.access_token,l.value),alert(`Compte cr avec succs ! Veuillez vous connecter.`),n(`navigate`,`login`)}catch(e){console.error(`Signup error:`,e),u.value=e.message||`La connexion a chou. Veuillez ressayer.`}finally{c.value=!1}};return(e,t)=>(B(),V(`div`,us,[U(`div`,ds,[U(`div`,fs,[U(`div`,{class:`brand-badge`,onClick:t[0]||=e=>n(`navigate`,`landing`),style:{cursor:`pointer`}},[...t[8]||=[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`brand-logo-img`},null,-1)]]),t[9]||=G(`<h1 data-v-cd03f706>Construisons ensemble <br data-v-cd03f706>le futur du soin.</h1><p data-v-cd03f706>Crez votre compte professionnel et rejoignez une communaut engage pour une sant plus humaine.</p><div class="features-list" data-v-cd03f706><div class="feature-item" data-v-cd03f706><span class="feature-icon" data-v-cd03f706></span><p data-v-cd03f706>Gestion simplifie des tournes</p></div><div class="feature-item" data-v-cd03f706><span class="feature-icon" data-v-cd03f706></span><p data-v-cd03f706>Collaboration entre confrres</p></div><div class="feature-item" data-v-cd03f706><span class="feature-icon" data-v-cd03f706></span><p data-v-cd03f706>Interface intuitive et mobile</p></div></div>`,3)])]),U(`div`,ps,[U(`div`,ms,[t[23]||=U(`div`,{class:`signup-header`},[U(`h1`,null,`Crer un compte`),U(`p`,null,`Commencez avec votre compte professionnel ds aujourd'hui.`)],-1),u.value?(B(),V(`div`,hs,M(u.value),1)):K(``,!0),U(`form`,{onSubmit:Y(d,[`prevent`]),class:`signup-form`},[U(`div`,gs,[t[11]||=U(`label`,{for:`name`},`Nom complet`,-1),U(`div`,_s,[t[10]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`path`,{d:`M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2`}),U(`circle`,{cx:`12`,cy:`7`,r:`4`})],-1),I(U(`input`,{"onUpdate:modelValue":t[1]||=e=>r.value=e,type:`text`,id:`name`,placeholder:`Dr. Jean Dupont`,required:``,disabled:c.value},null,8,vs),[[J,r.value]])])]),U(`div`,ys,[t[13]||=U(`label`,{for:`email`},`Email`,-1),U(`div`,bs,[t[12]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`path`,{d:`M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z`}),U(`polyline`,{points:`22,6 12,13 2,6`})],-1),I(U(`input`,{"onUpdate:modelValue":t[2]||=e=>i.value=e,type:`email`,id:`email`,placeholder:`jean@exemple.com`,required:``,disabled:c.value},null,8,xs),[[J,i.value]])])]),U(`div`,Ss,[t[17]||=U(`label`,{for:`password`},`Mot de passe`,-1),U(`div`,Cs,[t[16]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`rect`,{x:`3`,y:`11`,width:`18`,height:`11`,rx:`2`,ry:`2`}),U(`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`})],-1),I(U(`input`,{"onUpdate:modelValue":t[3]||=e=>a.value=e,type:s.value?`text`:`password`,id:`password`,placeholder:``,required:``,disabled:c.value},null,8,ws),[[Co,a.value]]),U(`button`,{type:`button`,class:`toggle-password`,onClick:t[4]||=e=>s.value=!s.value,tabindex:`-1`},[s.value?(B(),V(`svg`,Es,[...t[15]||=[U(`path`,{d:`M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24`},null,-1),U(`line`,{x1:`1`,y1:`1`,x2:`23`,y2:`23`},null,-1)]])):(B(),V(`svg`,Ts,[...t[14]||=[U(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`},null,-1),U(`circle`,{cx:`12`,cy:`12`,r:`3`},null,-1)]]))])])]),U(`div`,Ds,[t[19]||=U(`label`,{for:`confirmPassword`},`Confirmer mot de passe`,-1),U(`div`,Os,[t[18]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`rect`,{x:`3`,y:`11`,width:`18`,height:`11`,rx:`2`,ry:`2`}),U(`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`})],-1),I(U(`input`,{"onUpdate:modelValue":t[5]||=e=>o.value=e,type:s.value?`text`:`password`,id:`confirmPassword`,placeholder:``,required:``,disabled:c.value},null,8,ks),[[Co,o.value]])])]),U(`div`,As,[U(`label`,js,[I(U(`input`,{type:`checkbox`,"onUpdate:modelValue":t[6]||=e=>l.value=e,disabled:c.value},null,8,Ms),[[go,l.value]]),t[20]||=U(`span`,{class:`checkmark`},null,-1),t[21]||=W(` Se souvenir de moi `,-1)])]),U(`button`,{type:`submit`,class:`signup-button`,disabled:c.value},M(c.value?`Cration du compte...`:`S'inscrire`),9,Ns)],32),U(`div`,Ps,[U(`p`,null,[t[22]||=W(`Vous avez dj un compte ? `,-1),U(`a`,{href:`#`,onClick:t[7]||=Y(e=>n(`navigate`,`login`),[`prevent`])},`Se connecter`)])])])])]))}}),[[`__scopeId`,`data-v-cd03f706`]]),Is={class:`login-wrapper`},Ls={class:`login-info-side`},Rs={class:`info-content`},zs={class:`login-form-side`},Bs={class:`login-card`},Vs={key:0,class:`error-banner`},Hs={key:1,class:`success-banner`},Us={class:`input-group`},Ws={class:`input-wrapper`},Gs=[`disabled`],Ks=[`disabled`],qs={key:3,class:`login-footer`},Js=Z(L({__name:`ForgotPassword`,emits:[`navigate`],setup(e,{emit:t}){let n=t,r=F(``),i=F(!1),a=F(``),o=F(``),s=F(!1),c=async()=>{o.value=``,a.value=``,i.value=!0;try{let e=await fetch(`/api/auth/forgot-password`,{method:`POST`,headers:{"Content-Type":`application/json`,accept:`*/*`},body:JSON.stringify({email:r.value})});if(!e.ok){let t=await e.json().catch(()=>({}));throw e.status===404?Error(`Aucun compte n'est associ  cette adresse email.`):Error(t.message||`Une erreur est survenue.`)}let t=await e.json();s.value=!0,a.value=t.message||`Un lien de rinitialisation a t envoy  votre adresse email. Veuillez vrifier votre bote de rception.`}catch(e){console.error(`Forgot password error:`,e),o.value=e.message||`Une erreur est survenue. Veuillez ressayer.`}finally{i.value=!1}};return(e,t)=>(B(),V(`div`,Is,[U(`div`,Ls,[U(`div`,Rs,[U(`div`,{class:`brand-badge`,onClick:t[0]||=e=>n(`navigate`,`landing`),style:{cursor:`pointer`}},[...t[5]||=[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`brand-logo-img`},null,-1)]]),t[6]||=G(`<h1 data-v-1fa30f81>Rcuprez votre <br data-v-1fa30f81>accs en un clic.</h1><p data-v-1fa30f81>Entrez votre adresse email et nous vous enverrons un lien scuris pour rinitialiser votre mot de passe.</p><div class="stats-grid" data-v-1fa30f81><div class="stat-item" data-v-1fa30f81><span class="stat-value" data-v-1fa30f81>Simple</span><span class="stat-label" data-v-1fa30f81>Processus rapide</span></div><div class="stat-item" data-v-1fa30f81><span class="stat-value" data-v-1fa30f81>Scuris</span><span class="stat-label" data-v-1fa30f81>Chiffrement AES</span></div></div><div class="support-message" data-v-1fa30f81><p data-v-1fa30f81>Besoin d&#39;aide ? <a href="#" data-v-1fa30f81>Contactez notre support</a></p></div>`,4)])]),U(`div`,zs,[U(`div`,Bs,[U(`button`,{class:`back-pill`,onClick:t[1]||=e=>n(`navigate`,`login`)},[...t[7]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`19`,y1:`12`,x2:`5`,y2:`12`}),U(`polyline`,{points:`12 19 5 12 12 5`})],-1),W(` Retour `,-1)]]),t[12]||=U(`div`,{class:`login-header`},[U(`h1`,null,`Mot de passe oubli`),U(`p`,null,`Pas d'inquitude, cela arrive. Entrez votre email ci-dessous.`)],-1),o.value?(B(),V(`div`,Vs,M(o.value),1)):K(``,!0),s.value?(B(),V(`div`,Hs,[t[8]||=U(`div`,{class:`success-icon`},``,-1),U(`p`,null,M(a.value),1),U(`button`,{class:`login-button`,onClick:t[2]||=e=>n(`navigate`,`login`)},`Retour  la connexion`)])):K(``,!0),s.value?K(``,!0):(B(),V(`form`,{key:2,onSubmit:Y(c,[`prevent`]),class:`login-form`},[U(`div`,Us,[t[10]||=U(`label`,{for:`email`},`Email`,-1),U(`div`,Ws,[t[9]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`path`,{d:`M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z`}),U(`polyline`,{points:`22,6 12,13 2,6`})],-1),I(U(`input`,{"onUpdate:modelValue":t[3]||=e=>r.value=e,type:`email`,id:`email`,placeholder:`nom@entreprise.com`,required:``,disabled:i.value},null,8,Gs),[[J,r.value]])])]),U(`button`,{type:`submit`,class:`login-button`,disabled:i.value},M(i.value?`Envoi du lien...`:`Envoyer le lien de rinitialisation`),9,Ks)],32)),s.value?K(``,!0):(B(),V(`div`,qs,[U(`p`,null,[t[11]||=W(`Vous vous en souvenez ? `,-1),U(`a`,{href:`#`,onClick:t[4]||=Y(e=>n(`navigate`,`login`),[`prevent`])},`Se connecter`)])]))])])]))}}),[[`__scopeId`,`data-v-1fa30f81`]]),Ys={class:`login-wrapper`},Xs={class:`login-info-side`},Zs={class:`info-content`},Qs={class:`login-form-side`},$s={class:`login-card`},ec={key:0,class:`error-banner`},tc={key:1,class:`success-banner`},nc={class:`input-group`},rc={class:`input-wrapper`},ic=[`type`,`disabled`],ac={class:`input-group`},oc={class:`input-wrapper`},sc=[`type`,`disabled`],cc={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},lc={key:1,xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},uc=[`disabled`],dc={key:3,class:`login-footer`},fc=Z(L({__name:`ResetPassword`,props:{token:{}},emits:[`navigate`],setup(e,{emit:t}){let n=e,r=t,i=F(``),a=F(``),o=F(!1),s=F(!1),c=F(``),l=F(!1),u=async()=>{if(i.value!==a.value){c.value=`Les mots de passe ne correspondent pas.`;return}if(i.value.length<6){c.value=`Le mot de passe doit contenir au moins 6 caractres.`;return}c.value=``,s.value=!0;try{let e=await fetch(`/api/auth/reset-password`,{method:`POST`,headers:{"Content-Type":`application/json`,accept:`*/*`},body:JSON.stringify({token:n.token,newPassword:i.value})});if(!e.ok){let t=await e.json().catch(()=>({}));throw e.status===401?Error(`Le lien de rinitialisation est invalide ou a expir.`):Error(t.message||`Une erreur est survenue.`)}l.value=!0,setTimeout(()=>{r(`navigate`,`login`)},3e3)}catch(e){console.error(`Reset password error:`,e),c.value=e.message||`Une erreur est survenue. Veuillez ressayer.`}finally{s.value=!1}};return(e,t)=>(B(),V(`div`,Ys,[U(`div`,Xs,[U(`div`,Zs,[U(`div`,{class:`brand-badge`,onClick:t[0]||=e=>r(`navigate`,`landing`),style:{cursor:`pointer`}},[...t[6]||=[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`brand-logo-img`},null,-1)]]),t[7]||=G(`<h1 data-v-ea249602>Scurisez votre <br data-v-ea249602>compte daricare.</h1><p data-v-ea249602>Choisissez un nouveau mot de passe fort pour protger vos donnes et votre accs professionnel.</p><div class="stats-grid" data-v-ea249602><div class="stat-item" data-v-ea249602><span class="stat-value" data-v-ea249602>Confidentialit</span><span class="stat-label" data-v-ea249602>Donnes protges</span></div><div class="stat-item" data-v-ea249602><span class="stat-value" data-v-ea249602>Scurit</span><span class="stat-label" data-v-ea249602>Accs vrifi</span></div></div><div class="support-message" data-v-ea249602><p data-v-ea249602>Besoin d&#39;aide ? <a href="#" data-v-ea249602>Contactez notre support</a></p></div>`,4)])]),U(`div`,Qs,[U(`div`,$s,[t[18]||=U(`div`,{class:`login-header`},[U(`h1`,null,`Nouveau mot de passe`),U(`p`,null,`Veuillez dfinir votre nouveau mot de passe ci-dessous.`)],-1),c.value?(B(),V(`div`,ec,M(c.value),1)):K(``,!0),l.value?(B(),V(`div`,tc,[t[8]||=U(`div`,{class:`success-icon`},``,-1),t[9]||=U(`h3`,null,`Succs !`,-1),t[10]||=U(`p`,null,`Votre mot de passe a t rinitialis avec succs. Vous allez tre redirig vers la page de connexion...`,-1),U(`button`,{class:`login-button`,onClick:t[1]||=e=>r(`navigate`,`login`)},`Aller  la connexion`)])):K(``,!0),l.value?K(``,!0):(B(),V(`form`,{key:2,onSubmit:Y(u,[`prevent`]),class:`login-form`},[U(`div`,nc,[t[12]||=U(`label`,{for:`newPassword`},`Nouveau mot de passe`,-1),U(`div`,rc,[t[11]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`rect`,{x:`3`,y:`11`,width:`18`,height:`11`,rx:`2`,ry:`2`}),U(`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`})],-1),I(U(`input`,{"onUpdate:modelValue":t[2]||=e=>i.value=e,type:o.value?`text`:`password`,id:`newPassword`,placeholder:``,required:``,disabled:s.value},null,8,ic),[[Co,i.value]])])]),U(`div`,ac,[t[16]||=U(`label`,{for:`confirmPassword`},`Confirmer le mot de passe`,-1),U(`div`,oc,[t[15]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`input-icon`},[U(`rect`,{x:`3`,y:`11`,width:`18`,height:`11`,rx:`2`,ry:`2`}),U(`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`})],-1),I(U(`input`,{"onUpdate:modelValue":t[3]||=e=>a.value=e,type:o.value?`text`:`password`,id:`confirmPassword`,placeholder:``,required:``,disabled:s.value},null,8,sc),[[Co,a.value]]),U(`button`,{type:`button`,class:`toggle-password`,onClick:t[4]||=e=>o.value=!o.value,tabindex:`-1`},[o.value?(B(),V(`svg`,lc,[...t[14]||=[U(`path`,{d:`M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24`},null,-1),U(`line`,{x1:`1`,y1:`1`,x2:`23`,y2:`23`},null,-1)]])):(B(),V(`svg`,cc,[...t[13]||=[U(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`},null,-1),U(`circle`,{cx:`12`,cy:`12`,r:`3`},null,-1)]]))])])]),U(`button`,{type:`submit`,class:`login-button`,disabled:s.value},M(s.value?`Rinitialisation...`:`Rinitialiser le mot de passe`),9,uc)],32)),l.value?K(``,!0):(B(),V(`div`,dc,[U(`p`,null,[t[17]||=W(`Vous n'avez plus besoin de rinitialiser ? `,-1),U(`a`,{href:`#`,onClick:t[5]||=Y(e=>r(`navigate`,`login`),[`prevent`])},`Se connecter`)])]))])])]))}}),[[`__scopeId`,`data-v-ea249602`]]),pc={class:`verification-wrapper`},mc={class:`verification-container`},hc={class:`verification-card`},gc={key:0,class:`error-banner`},_c={key:2,class:`info-banner`},vc={key:3,class:`form-step`},yc={class:`form-section`},bc={class:`form-grid`},xc={class:`input-group`},Sc=[`value`],Cc={class:`input-group`},wc={class:`input-group`},Tc={class:`input-group`},Ec={class:`input-group full-width`},Dc={class:`input-group`},Oc={class:`input-group`},kc={class:`input-group`},Ac={class:`input-group`},jc={class:`input-group`},Mc={class:`input-group full-width`},Nc={key:0,class:`location-status`},Pc={class:`form-section`},Fc={class:`upload-grid`},Ic={class:`upload-item`},Lc={key:0,class:`existing-doc-preview`},Rc=[`src`],zc={class:`drop-content`},Bc={class:`upload-item`},Vc={key:0,class:`existing-doc-preview`},Hc=[`src`],Uc={class:`drop-content`},Wc={class:`upload-item`},Gc={key:0,class:`existing-doc-preview`},Kc=[`src`],qc={class:`drop-content`},Jc={class:`form-actions`},Yc=[`disabled`],Xc=[`disabled`],Zc={key:4,class:`form-step`},Qc={key:0,class:`admin-comments-box`},$c={class:`comments-list`},el={class:`resolution-grid`},tl={class:`resolve-info`},nl={class:`resolve-doc-type`},rl={class:`resolve-reason`},il={class:`resolve-upload`},al={key:0,class:`update-success-indicator`},ol=[`onChange`,`disabled`],sl={class:`drop-content-mini`},cl={class:`resolution-actions`},ll=[`disabled`],ul=[`disabled`],dl=[`disabled`],fl=Z(L({__name:`VerificationPage`,emits:[`navigate`],setup(e,{emit:t}){let n=X,r=t,i=F(1),a=F(!1),o=F(``),s=F([]),c=F([]),l=F(null),u=F([]),d=F(!1),f=F([]),p=q(()=>!!(v.value.cin&&c.value.length>0&&s.value.every(e=>e.update===!0))),m=q(()=>{let e=s.value.flatMap(e=>e.documents||[]),t=new Map;return e.forEach(e=>{let n=c.value.find(t=>t.id===e.id);n&&!n.verified&&t.set(e.id,{...e,verified:!1})}),Array.from(t.values())}),h=q(()=>s.value.filter(e=>e.update===!1||e.documents&&e.documents.some(e=>{let t=c.value.find(t=>t.id===e.id);return t&&!t.verified})).map(e=>e.comment)),g=q(()=>m.value.length===0?!1:m.value.every(e=>u.value.includes(e.id))),_=e=>{window.open(e,`_blank`)},v=F({specialty:``,experience:``,licenseNumber:``,address:``,city:``,phone:``,personalPhone:``,cin:``,diplomaName:``,licenseName:``,latitude:0,longitude:0}),y=()=>{`geolocation`in navigator?navigator.geolocation.getCurrentPosition(e=>{v.value.latitude=e.coords.latitude,v.value.longitude=e.coords.longitude,alert(`Position capture avec succs !`)},e=>{console.error(`Error getting location:`,e),alert(`Impossible de rcuprer la position. Veuillez autoriser l'accs  la localisation.`)}):alert(`La golocalisation n'est pas supporte par votre navigateur.`)},b=F({idCard:null,diploma:null,professionalLicense:null}),x=F({idCard:``,diploma:``,professionalLicense:``}),S=(e,t)=>{let n=e.target.files?.[0];n&&(b.value[t]=n)},C=async()=>{let e=n.getItem(`access_token`);if(e)try{let t=await fetch(`/api/auth/profile`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});if(t.ok){let e=await t.json();console.log(`Profile data fetched:`,e),e.id&&n.setItem(`user_id`,e.id.toString()),v.value.specialty=e.speciality||``,v.value.experience=e.yearsOfExperience?.toString()||``,v.value.licenseNumber=e.adeliRppsNumber||``,v.value.address=e.professionalAddress||``,v.value.city=e.city||``,v.value.phone=e.professionalPhone||``,v.value.personalPhone=e.phone||``,v.value.cin=e.cin||``,v.value.diplomaName=e.diploma||``,v.value.licenseName=e.license||``,v.value.latitude=e.latitude||0,v.value.longitude=e.longitude||0}}catch(e){console.error(`Failed to fetch profile:`,e)}},w=async e=>{let t=n.getItem(`access_token`);if(t)try{let n=await fetch(`/api/documents/professional/${e}`,{headers:{Authorization:`Bearer ${t}`,accept:`*/*`}});n.ok&&(c.value=await n.json(),console.log(`Existing docs fetched:`,c.value),c.value.forEach(e=>{e.type===`ID_CARD`&&(x.value.idCard=e.description||``),e.type===`DIPLOMA`&&(x.value.diploma=e.description||``),e.type===`LICENSE`&&(x.value.professionalLicense=e.description||``)}))}catch(e){console.error(`Failed to fetch documents:`,e)}},ee=async()=>{try{let e=await fetch(`/api/services/only`,{headers:{accept:`*/*`}});e.ok&&(f.value=await e.json(),console.log(`Services fetched:`,f.value))}catch(e){console.error(`Failed to fetch services:`,e)}},T=async e=>{let t=n.getItem(`access_token`);if(t)try{let n=await fetch(`/api/alerts/professional/${e}`,{headers:{Authorization:`Bearer ${t}`,accept:`*/*`}});n.ok&&(s.value=await n.json())}catch(e){console.error(`Failed to fetch alerts:`,e)}},E=()=>{m.value.length>0?i.value=3:i.value=1};hr(async()=>{let e=n.getItem(`user_id`);if(e){a.value=!0;try{await Promise.all([ee(),C(),T(e),w(e)]),E()}finally{a.value=!1}}});let D=async(e,t)=>{o.value=``,l.value=e;let r=n.getItem(`access_token`),i=n.getItem(`user_id`);if(!(!r||!i))try{let n=new FormData;n.append(`file`,t),n.append(`professionalId`,i),n.append(`update`,`true`);let a=await fetch(`/api/documents/${e}`,{method:`PATCH`,headers:{Authorization:`Bearer ${r}`},body:n});if(a.ok)alert(`Document mis  jour avec succs !`),u.value.includes(e)||u.value.push(e),await C(),i&&await T(i);else{let e=await a.json().catch(()=>({}));throw Error(e.message||`chec de la mise  jour du document.`)}}catch(e){console.error(`Patch document error:`,e),o.value=e.message}finally{l.value=null}},te=async()=>{let e=s.value.filter(e=>e.update===!1);if(e.length===0)return;let t=n.getItem(`access_token`);if(t)try{d.value=!0;let r=e.map(e=>fetch(`/api/alerts/${e.id}/toggle-update`,{method:`POST`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`,accept:`*/*`}}));if((await Promise.all(r)).every(e=>e.ok)){alert(`Vos modifications ont t soumises avec succs !`);let e=n.getItem(`user_id`);e&&await T(e)}else throw Error(`chec de la validation de certaines modifications.`)}catch(e){console.error(`Finalize error:`,e),o.value=e.message}finally{d.value=!1}},O=async()=>{o.value=``;let e=n.getItem(`access_token`),t=n.getItem(`user_id`);if(!e||!t||t===`undefined`)return o.value=`Session expire ou profil non identifi.`,!1;try{let n={phone:v.value.personalPhone,speciality:v.value.specialty,cin:v.value.cin,diploma:v.value.diplomaName,license:v.value.licenseName,yearsOfExperience:Number(v.value.experience)||0,adeliRppsNumber:v.value.licenseNumber,professionalPhone:v.value.phone,professionalAddress:v.value.address,city:v.value.city,latitude:Number(v.value.latitude)||0,longitude:Number(v.value.longitude)||0},r=await fetch(`/api/auth/admin/user/${t}`,{method:`PATCH`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${e}`,accept:`*/*`},body:JSON.stringify(n)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.message||`chec de la mise  jour du profil.`)}return!0}catch(e){return console.error(`Profile update error:`,e),o.value=e.message||`Une erreur est survenue lors de la mise  jour.`,!1}},ne=async()=>{if(a.value=!0,!await O()){a.value=!1;return}await k()},k=async()=>{o.value=``,a.value=!0;let e=n.getItem(`access_token`),t=n.getItem(`user_id`);if(!e){o.value=`Session expire. Veuillez vous reconnecter.`,a.value=!1;return}if(!t||t===`undefined`){o.value=`Profil non identifi. Veuillez vous reconnecter.`,a.value=!1;return}try{let n=async(n,r,i)=>{let a=new FormData;if(a.append(`type`,r),a.append(`professionalId`,t),a.append(`description`,i),a.append(`files`,n),!(await fetch(`/api/documents`,{method:`POST`,headers:{Authorization:`Bearer ${e}`},body:a})).ok)throw Error(`chec de l'upload du document: ${r}`)};b.value.idCard&&await n(b.value.idCard,`ID_CARD`,x.value.idCard||`Carte d'identit`),b.value.diploma&&await n(b.value.diploma,`DIPLOMA`,x.value.diploma||`Diplme d'tat`),b.value.professionalLicense&&await n(b.value.professionalLicense,`LICENSE`,x.value.professionalLicense||`Carte professionnelle`),a.value=!1,r(`navigate`,`login`),alert(`Profil et documents soumis avec succs pour vrification !`)}catch(e){console.error(`Documents upload error:`,e),o.value=e.message||`Une erreur est survenue lors de l'envoi des documents.`,a.value=!1}};return(e,t)=>(B(),V(`div`,pc,[U(`div`,mc,[U(`div`,hc,[t[48]||=U(`div`,{class:`header`},[U(`div`,{class:`brand`},[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`brand-logo-img`})]),U(`h1`,null,`Vrification du compte`),U(`p`,null,`Compltez votre profil pour commencer  exercer sur la plateforme.`)],-1),o.value?(B(),V(`div`,gc,M(o.value),1)):K(``,!0),m.value.length>0&&i.value!==3?(B(),V(`div`,{key:1,class:`alert-action-banner`,onClick:t[0]||=e=>i.value=3},[...t[23]||=[G(`<div class="banner-icon" data-v-cc72b3f6></div><div class="banner-content" data-v-cc72b3f6><p class="banner-title" data-v-cc72b3f6>Une action est requise sur votre dossier</p><p class="banner-desc" data-v-cc72b3f6>L&#39;administrateur a demand des modifications. Cliquez ici pour les consulter.</p></div><button class="banner-btn" data-v-cc72b3f6>Mettre  jour</button>`,3)]])):K(``,!0),p.value&&i.value===1&&m.value.length===0?(B(),V(`div`,_c,`  Votre dossier est en cours de traitement. Vous ne pouvez pas le modifier pour le moment. `)):K(``,!0),i.value===1?(B(),V(`div`,vc,[U(`div`,yc,[t[35]||=U(`h3`,null,`1. Informations professionnelles`,-1),U(`div`,bc,[U(`div`,xc,[t[25]||=U(`label`,null,`Spcialit`,-1),I(U(`select`,{"onUpdate:modelValue":t[1]||=e=>v.value.specialty=e},[t[24]||=U(`option`,{value:``,disabled:``},`Slectionnez votre spcialit`,-1),(B(!0),V(z,null,R(f.value,e=>(B(),V(`option`,{key:e.id,value:e.name},M(e.name),9,Sc))),128))],512),[[yo,v.value.specialty]])]),U(`div`,Cc,[t[26]||=U(`label`,null,`Annes d'exprience`,-1),I(U(`input`,{"onUpdate:modelValue":t[2]||=e=>v.value.experience=e,type:`number`,placeholder:`Ex: 5`},null,512),[[J,v.value.experience]])]),U(`div`,wc,[t[27]||=U(`label`,null,`Numro ADELI / RPPS`,-1),I(U(`input`,{"onUpdate:modelValue":t[3]||=e=>v.value.licenseNumber=e,type:`text`,placeholder:`123456789`},null,512),[[J,v.value.licenseNumber]])]),U(`div`,Tc,[t[28]||=U(`label`,null,`Tlphone professionnel`,-1),I(U(`input`,{"onUpdate:modelValue":t[4]||=e=>v.value.phone=e,type:`tel`,placeholder:`06 00 00 00 00`},null,512),[[J,v.value.phone]])]),U(`div`,Ec,[t[29]||=U(`label`,null,`Adresse professionnelle`,-1),I(U(`input`,{"onUpdate:modelValue":t[5]||=e=>v.value.address=e,type:`text`,placeholder:`12 rue de la Paix`},null,512),[[J,v.value.address]])]),U(`div`,Dc,[t[30]||=U(`label`,null,`Ville`,-1),I(U(`input`,{"onUpdate:modelValue":t[6]||=e=>v.value.city=e,type:`text`,placeholder:`Paris`},null,512),[[J,v.value.city]])]),U(`div`,Oc,[t[31]||=U(`label`,null,`CIN (Carte d'Identit)`,-1),I(U(`input`,{"onUpdate:modelValue":t[7]||=e=>v.value.cin=e,type:`text`,placeholder:`12345678`},null,512),[[J,v.value.cin]])]),U(`div`,kc,[t[32]||=U(`label`,null,`Tlphone personnel`,-1),I(U(`input`,{"onUpdate:modelValue":t[8]||=e=>v.value.personalPhone=e,type:`tel`,placeholder:`01 02 03 04 05`},null,512),[[J,v.value.personalPhone]])]),U(`div`,Ac,[t[33]||=U(`label`,null,`Intitul du Diplme`,-1),I(U(`input`,{"onUpdate:modelValue":t[9]||=e=>v.value.diplomaName=e,type:`text`,placeholder:`Ex: Diplme d'tat d'Infirmier`},null,512),[[J,v.value.diplomaName]])]),U(`div`,jc,[t[34]||=U(`label`,null,`Rfrence Licence`,-1),I(U(`input`,{"onUpdate:modelValue":t[10]||=e=>v.value.licenseName=e,type:`text`,placeholder:`Ex: LIC-123456`},null,512),[[J,v.value.licenseName]])]),U(`div`,Mc,[v.value.latitude?(B(),V(`div`,Nc,`  Position capture: `+M(v.value.latitude.toFixed(4))+`, `+M(v.value.longitude.toFixed(4)),1)):K(``,!0),U(`button`,{type:`button`,class:`btn-location full-width`,onClick:y},`  `+M(v.value.latitude?`Mettre  jour ma position`:`Capturer ma position pour la zone d'intervention`),1)])])]),U(`div`,Pc,[t[42]||=U(`h3`,null,`2. Pices justificatives`,-1),U(`div`,Fc,[U(`div`,Ic,[t[37]||=U(`label`,null,`Pice d'identit (Recto/Verso)`,-1),c.value.find(e=>e.type===`ID_CARD`)?(B(),V(`div`,Lc,[U(`img`,{src:`/api/`+c.value.find(e=>e.type===`ID_CARD`).filePath,alt:`CIN`,class:`doc-thumbnail`,onClick:t[11]||=e=>_(`/api/`+c.value.find(e=>e.type===`ID_CARD`).filePath)},null,8,Rc)])):K(``,!0),U(`div`,{class:j([`file-drop`,{hasFile:b.value.idCard}])},[U(`input`,{type:`file`,onChange:t[12]||=e=>S(e,`idCard`),accept:`image/*,.pdf`},null,32),U(`div`,zc,[t[36]||=U(`span`,{class:`icon`},``,-1),U(`p`,null,M(b.value.idCard?b.value.idCard.name:c.value.find(e=>e.type===`ID_CARD`)?`Remplacer le document`:`Cliquez pour uploader`),1)])],2),I(U(`input`,{"onUpdate:modelValue":t[13]||=e=>x.value.idCard=e,type:`text`,placeholder:`Description de la pice d'identit...`,class:`doc-desc-input`},null,512),[[J,x.value.idCard]])]),U(`div`,Bc,[t[39]||=U(`label`,null,`Diplme d'tat`,-1),c.value.find(e=>e.type===`DIPLOMA`)?(B(),V(`div`,Vc,[U(`img`,{src:`/api/`+c.value.find(e=>e.type===`DIPLOMA`).filePath,alt:`Diplme`,class:`doc-thumbnail`,onClick:t[14]||=e=>_(`/api/`+c.value.find(e=>e.type===`DIPLOMA`).filePath)},null,8,Hc)])):K(``,!0),U(`div`,{class:j([`file-drop`,{hasFile:b.value.diploma}])},[U(`input`,{type:`file`,onChange:t[15]||=e=>S(e,`diploma`),accept:`image/*,.pdf`},null,32),U(`div`,Uc,[t[38]||=U(`span`,{class:`icon`},``,-1),U(`p`,null,M(b.value.diploma?b.value.diploma.name:c.value.find(e=>e.type===`DIPLOMA`)?`Remplacer le diplme`:`Cliquez pour uploader`),1)])],2),I(U(`input`,{"onUpdate:modelValue":t[16]||=e=>x.value.diploma=e,type:`text`,placeholder:`Description du diplme...`,class:`doc-desc-input`},null,512),[[J,x.value.diploma]])]),U(`div`,Wc,[t[41]||=U(`label`,null,`Carte Professionnelle / CPS`,-1),c.value.find(e=>e.type===`LICENSE`)?(B(),V(`div`,Gc,[U(`img`,{src:`/api/`+c.value.find(e=>e.type===`LICENSE`).filePath,alt:`Licence`,class:`doc-thumbnail`,onClick:t[17]||=e=>_(`/api/`+c.value.find(e=>e.type===`LICENSE`).filePath)},null,8,Kc)])):K(``,!0),U(`div`,{class:j([`file-drop`,{hasFile:b.value.professionalLicense}])},[U(`input`,{type:`file`,onChange:t[18]||=e=>S(e,`professionalLicense`),accept:`image/*,.pdf`},null,32),U(`div`,qc,[t[40]||=U(`span`,{class:`icon`},``,-1),U(`p`,null,M(b.value.professionalLicense?b.value.professionalLicense.name:c.value.find(e=>e.type===`LICENSE`)?`Remplacer la carte pro`:`Cliquez pour uploader`),1)])],2),I(U(`input`,{"onUpdate:modelValue":t[19]||=e=>x.value.professionalLicense=e,type:`text`,placeholder:`Description de la carte pro...`,class:`doc-desc-input`},null,512),[[J,x.value.professionalLicense]])])])]),U(`div`,Jc,[U(`button`,{class:`btn-submit`,onClick:ne,disabled:a.value||p.value},M(a.value?`Envoi en cours...`:p.value?`Dossier dj soumis`:`Soumettre pour vrification`),9,Yc),U(`button`,{class:`btn-home`,onClick:t[20]||=e=>r(`navigate`,`landing`),disabled:a.value},` Retour  la page d'accueil `,8,Xc)])])):K(``,!0),i.value===3?(B(),V(`div`,Zc,[t[46]||=U(`div`,{class:`alert-resolution-header`},[U(`div`,{class:`alert-icon-large`},``),U(`h2`,null,`Action Requise`),U(`p`,null,`Certains de vos documents ncessitent une mise  jour suite  l'examen de l'administrateur.`)],-1),h.value.length>0?(B(),V(`div`,Qc,[t[43]||=U(`label`,null,`Commentaires de l'administrateur :`,-1),U(`div`,$c,[(B(!0),V(z,null,R(h.value,(e,t)=>(B(),V(`p`,{key:t,class:`comment-item`},` "`+M(e)+`" `,1))),128))])])):K(``,!0),U(`div`,el,[(B(!0),V(z,null,R(m.value,e=>(B(),V(`div`,{key:e.id,class:`resolve-item`},[U(`div`,tl,[U(`span`,nl,M(e.type),1),U(`span`,rl,M(e.description),1)]),U(`div`,il,[u.value.includes(e.id)?(B(),V(`div`,al,[...t[44]||=[U(`span`,{class:`icon`},``,-1),U(`span`,null,`Modifi`,-1)]])):K(``,!0),U(`div`,{class:j([`file-drop-mini`,{isUpdating:l.value===e.id,success:u.value.includes(e.id)}])},[U(`input`,{type:`file`,onChange:t=>{let n=t.target.files?.[0];n&&D(e.id,n)},accept:`image/*,.pdf`,disabled:l.value===e.id},null,40,ol),U(`div`,sl,[t[45]||=U(`span`,{class:`icon`},``,-1),U(`span`,null,M(l.value===e.id?`Mise  jour`:u.value.includes(e.id)?`Remplacer encore`:`Remplacer`),1)])],2)])]))),128))]),t[47]||=U(`div`,{class:`resolution-info-banner`},` Une fois tous vos documents mis  jour, cliquez sur le bouton ci-dessous pour informer l'administrateur. `,-1),U(`div`,cl,[U(`button`,{class:`btn-submit`,onClick:te,disabled:d.value||!g.value},M(d.value?`Traitement...`:`Finaliser les modifications`),9,ll),U(`button`,{class:`btn-home`,onClick:t[21]||=e=>r(`navigate`,`landing`),disabled:d.value},` Retour  la page d'accueil `,8,ul),U(`button`,{class:`btn-back`,onClick:t[22]||=e=>r(`navigate`,`login`),disabled:d.value},` Retour  la connexion `,8,dl)])])):K(``,!0)])])]))}}),[[`__scopeId`,`data-v-cc72b3f6`]]),pl={class:`landing-page`},ml={class:`content-wrapper`},hl={class:`hero-section`},gl={class:`hero`},_l={class:`hero-text`},vl={class:`selection-container`},yl={class:`options-grid`},bl={key:0,class:`inline-status`},xl={key:1,class:`inline-error`},Sl=[`onClick`,`aria-label`],Cl={class:`label`},wl=Z(L({__name:`landingpage`,emits:[`navigate`],setup(e,{emit:t}){let n=t,r=F([]),i=F(!1),a=F(null),o=async()=>{let e=localStorage.getItem(`access_token`);try{i.value=!0,a.value=null;let t={accept:`*/*`};e&&(t.Authorization=`Bearer ${e}`);let o=await fetch(`/api/services`,{headers:t});if(o.status===401){console.warn(`Unauthorized. Redirecting to login.`),n(`navigate`,`login`);return}if(!o.ok)throw Error(`Failed to fetch services (${o.status})`);r.value=await o.json()}catch(e){console.error(`Failed to fetch services:`,e),a.value=e?.message||`Impossible de charger les services.`}finally{i.value=!1}},s=e=>{n(`navigate`,`service-soins`,e)};return hr(o),(e,t)=>(B(),V(`div`,pl,[U(`div`,ml,[U(`section`,hl,[U(`header`,gl,[U(`div`,_l,[t[1]||=G(`<h1 class="title" data-v-c572f6f8><img src="/daricarefront/assets/LOGO%20H-CEVX8XPM.png" alt="daricare logo" class="hero-logo-img" data-v-c572f6f8> vous trouve une <br data-v-c572f6f8><span class="accent" data-v-c572f6f8>infirmire</span>, un <span class="accent" data-v-c572f6f8>kinsithrapeute</span>, <br data-v-c572f6f8> une <span class="accent" data-v-c572f6f8>sage-femme</span>  domicile </h1><p class="subtitle" data-v-c572f6f8>Disponible pour vos soins ou ceux d&#39;un proche.</p>`,2),U(`div`,vl,[t[0]||=U(`p`,{class:`selection-label`},`Choisissez un service :`,-1),U(`div`,yl,[i.value?(B(),V(`div`,bl,`Chargement des services`)):a.value?(B(),V(`div`,xl,M(a.value),1)):(B(!0),V(z,{key:2},R(r.value,e=>(B(),V(`button`,{key:e.id,class:`service-card`,onClick:t=>s(e.id),"aria-label":`Slectionner ${e.name}`},[U(`span`,Cl,M(e.name),1)],8,Sl))),128))])]),t[2]||=U(`p`,{class:`footer-text`},[U(`span`,null,[W(`Une demande en 3 minutes et une rponse `),U(`br`),W(` en moins d'une heure !`)])],-1)]),t[3]||=U(`div`,{class:`hero-image`},[U(`img`,{src:`/daricarefront/assets/medical-illustration-CENkW6z7.png`,alt:`Medical Illustration`,class:`illustration`})],-1)])])])]))}}),[[`__scopeId`,`data-v-c572f6f8`]]),Tl=Object.create(null);Tl.open=`0`,Tl.close=`1`,Tl.ping=`2`,Tl.pong=`3`,Tl.message=`4`,Tl.upgrade=`5`,Tl.noop=`6`;var El=Object.create(null);Object.keys(Tl).forEach(e=>{El[Tl[e]]=e});var Dl={type:`error`,data:`parser error`},Ol=typeof Blob==`function`||typeof Blob<`u`&&Object.prototype.toString.call(Blob)===`[object BlobConstructor]`,kl=typeof ArrayBuffer==`function`,Al=e=>typeof ArrayBuffer.isView==`function`?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,jl=({type:e,data:t},n,r)=>Ol&&t instanceof Blob?n?r(t):Ml(t,r):kl&&(t instanceof ArrayBuffer||Al(t))?n?r(t):Ml(new Blob([t]),r):r(Tl[e]+(t||``)),Ml=(e,t)=>{let n=new FileReader;return n.onload=function(){let e=n.result.split(`,`)[1];t(`b`+(e||``))},n.readAsDataURL(e)};function Nl(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}var Pl;function Fl(e,t){if(Ol&&e.data instanceof Blob)return e.data.arrayBuffer().then(Nl).then(t);if(kl&&(e.data instanceof ArrayBuffer||Al(e.data)))return t(Nl(e.data));jl(e,!1,e=>{Pl||=new TextEncoder,t(Pl.encode(e))})}var Il=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,Ll=typeof Uint8Array>`u`?[]:new Uint8Array(256);for(let e=0;e<64;e++)Ll[Il.charCodeAt(e)]=e;const Rl=e=>{let t=e.length*.75,n=e.length,r,i=0,a,o,s,c;e[e.length-1]===`=`&&(t--,e[e.length-2]===`=`&&t--);let l=new ArrayBuffer(t),u=new Uint8Array(l);for(r=0;r<n;r+=4)a=Ll[e.charCodeAt(r)],o=Ll[e.charCodeAt(r+1)],s=Ll[e.charCodeAt(r+2)],c=Ll[e.charCodeAt(r+3)],u[i++]=a<<2|o>>4,u[i++]=(o&15)<<4|s>>2,u[i++]=(s&3)<<6|c&63;return l};var zl=typeof ArrayBuffer==`function`;const Bl=(e,t)=>{if(typeof e!=`string`)return{type:`message`,data:Hl(e,t)};let n=e.charAt(0);return n===`b`?{type:`message`,data:Vl(e.substring(1),t)}:El[n]?e.length>1?{type:El[n],data:e.substring(1)}:{type:El[n]}:Dl};var Vl=(e,t)=>zl?Hl(Rl(e),t):{base64:!0,data:e},Hl=(e,t)=>{switch(t){case`blob`:return e instanceof Blob?e:new Blob([e]);case`arraybuffer`:default:return e instanceof ArrayBuffer?e:e.buffer}},Ul=``,Wl=(e,t)=>{let n=e.length,r=Array(n),i=0;e.forEach((e,a)=>{jl(e,!1,e=>{r[a]=e,++i===n&&t(r.join(Ul))})})},Gl=(e,t)=>{let n=e.split(Ul),r=[];for(let e=0;e<n.length;e++){let i=Bl(n[e],t);if(r.push(i),i.type===`error`)break}return r};function Kl(){return new TransformStream({transform(e,t){Fl(e,n=>{let r=n.length,i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);let e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);let e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!=`string`&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}var ql;function Jl(e){return e.reduce((e,t)=>e+t.length,0)}function Yl(e,t){if(e[0].length===t)return e.shift();let n=new Uint8Array(t),r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Xl(e,t){ql||=new TextDecoder;let n=[],r=0,i=-1,a=!1;return new TransformStream({transform(o,s){for(n.push(o);;){if(r===0){if(Jl(n)<1)break;let e=Yl(n,1);a=(e[0]&128)==128,i=e[0]&127,r=i<126?3:i===126?1:2}else if(r===1){if(Jl(n)<2)break;let e=Yl(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(r===2){if(Jl(n)<8)break;let e=Yl(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>2**21-1){s.enqueue(Dl);break}i=a*2**32+t.getUint32(4),r=3}else{if(Jl(n)<i)break;let e=Yl(n,i);s.enqueue(Bl(a?e:ql.decode(e),t)),r=0}if(i===0||i>e){s.enqueue(Dl);break}}}})}function Q(e){if(e)return Zl(e)}function Zl(e){for(var t in Q.prototype)e[t]=Q.prototype[t];return e}Q.prototype.on=Q.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[`$`+e]=this._callbacks[`$`+e]||[]).push(t),this},Q.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Q.prototype.off=Q.prototype.removeListener=Q.prototype.removeAllListeners=Q.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks[`$`+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks[`$`+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks[`$`+e],this},Q.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),n=this._callbacks[`$`+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},Q.prototype.emitReserved=Q.prototype.emit,Q.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[`$`+e]||[]},Q.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ql=(()=>typeof Promise==`function`&&typeof Promise.resolve==`function`?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),$l=(()=>typeof self<`u`?self:typeof window<`u`?window:Function(`return this`)())();function eu(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}var tu=$l.setTimeout,nu=$l.clearTimeout;function ru(e,t){t.useNativeTimers?(e.setTimeoutFn=tu.bind($l),e.clearTimeoutFn=nu.bind($l)):(e.setTimeoutFn=$l.setTimeout.bind($l),e.clearTimeoutFn=$l.clearTimeout.bind($l))}var iu=1.33;function au(e){return typeof e==`string`?ou(e):Math.ceil((e.byteLength||e.size)*iu)}function ou(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function su(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function cu(e){let t=``;for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+=`&`),t+=encodeURIComponent(n)+`=`+encodeURIComponent(e[n]));return t}function lu(e){let t={},n=e.split(`&`);for(let e=0,r=n.length;e<r;e++){let r=n[e].split(`=`);t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}var uu=class extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type=`TransportError`}},du=class extends Q{constructor(e){super(),this.writable=!1,ru(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved(`error`,new uu(e,t,n)),this}open(){return this.readyState=`opening`,this.doOpen(),this}close(){return(this.readyState===`opening`||this.readyState===`open`)&&(this.doClose(),this.onClose()),this}send(e){this.readyState===`open`&&this.write(e)}onOpen(){this.readyState=`open`,this.writable=!0,super.emitReserved(`open`)}onData(e){let t=Bl(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved(`packet`,e)}onClose(e){this.readyState=`closed`,super.emitReserved(`close`,e)}pause(e){}createUri(e,t={}){return e+`://`+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return e.indexOf(`:`)===-1?e:`[`+e+`]`}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?`:`+this.opts.port:``}_query(e){let t=cu(e);return t.length?`?`+t:``}},fu=class extends du{constructor(){super(...arguments),this._polling=!1}get name(){return`polling`}doOpen(){this._poll()}pause(e){this.readyState=`pausing`;let t=()=>{this.readyState=`paused`,e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once(`pollComplete`,function(){--e||t()})),this.writable||(e++,this.once(`drain`,function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved(`poll`)}onData(e){Gl(e,this.socket.binaryType).forEach(e=>{if(this.readyState===`opening`&&e.type===`open`&&this.onOpen(),e.type===`close`)return this.onClose({description:`transport closed by the server`}),!1;this.onPacket(e)}),this.readyState!==`closed`&&(this._polling=!1,this.emitReserved(`pollComplete`),this.readyState===`open`&&this._poll())}doClose(){let e=()=>{this.write([{type:`close`}])};this.readyState===`open`?e():this.once(`open`,e)}write(e){this.writable=!1,Wl(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved(`drain`)})})}uri(){let e=this.opts.secure?`https`:`http`,t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=su()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}},pu=!1;try{pu=typeof XMLHttpRequest<`u`&&`withCredentials`in new XMLHttpRequest}catch{}const mu=pu;function hu(){}var gu=class extends fu{constructor(e){if(super(e),typeof location<`u`){let t=location.protocol===`https:`,n=location.port;n||=t?`443`:`80`,this.xd=typeof location<`u`&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){let n=this.request({method:`POST`,data:e});n.on(`success`,t),n.on(`error`,(e,t)=>{this.onError(`xhr post error`,e,t)})}doPoll(){let e=this.request();e.on(`data`,this.onData.bind(this)),e.on(`error`,(e,t)=>{this.onError(`xhr poll error`,e,t)}),this.pollXhr=e}},_u=class e extends Q{constructor(e,t,n){super(),this.createRequest=e,ru(this,n),this._opts=n,this._method=n.method||`GET`,this._uri=t,this._data=n.data===void 0?null:n.data,this._create()}_create(){var t;let n=eu(this._opts,`agent`,`pfx`,`key`,`passphrase`,`cert`,`ca`,`ciphers`,`rejectUnauthorized`,`autoUnref`);n.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}catch{}if(this._method===`POST`)try{r.setRequestHeader(`Content-type`,`text/plain;charset=UTF-8`)}catch{}try{r.setRequestHeader(`Accept`,`*/*`)}catch{}(t=this._opts.cookieJar)==null||t.addCookies(r),`withCredentials`in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;r.readyState===3&&((e=this._opts.cookieJar)==null||e.parseCookies(r.getResponseHeader(`set-cookie`))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status==`number`?r.status:0)},0))},r.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}typeof document<`u`&&(this._index=e.requestsCount++,e.requests[this._index]=this)}_onError(e){this.emitReserved(`error`,e,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(this._xhr===void 0||this._xhr===null)){if(this._xhr.onreadystatechange=hu,t)try{this._xhr.abort()}catch{}typeof document<`u`&&delete e.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved(`data`,e),this.emitReserved(`success`),this._cleanup())}abort(){this._cleanup()}};if(_u.requestsCount=0,_u.requests={},typeof document<`u`){if(typeof attachEvent==`function`)attachEvent(`onunload`,vu);else if(typeof addEventListener==`function`){let e=`onpagehide`in $l?`pagehide`:`unload`;addEventListener(e,vu,!1)}}function vu(){for(let e in _u.requests)_u.requests.hasOwnProperty(e)&&_u.requests[e].abort()}var yu=(function(){let e=xu({xdomain:!1});return e&&e.responseType!==null})(),bu=class extends gu{constructor(e){super(e);let t=e&&e.forceBase64;this.supportsBinary=yu&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new _u(xu,this.uri(),e)}};function xu(e){let t=e.xdomain;try{if(typeof XMLHttpRequest<`u`&&(!t||mu))return new XMLHttpRequest}catch{}if(!t)try{return new $l[[`Active`,`Object`].join(`X`)](`Microsoft.XMLHTTP`)}catch{}}var Su=typeof navigator<`u`&&typeof navigator.product==`string`&&navigator.product.toLowerCase()===`reactnative`,Cu=class extends du{get name(){return`websocket`}doOpen(){let e=this.uri(),t=this.opts.protocols,n=Su?{}:eu(this.opts,`agent`,`perMessageDeflate`,`pfx`,`key`,`passphrase`,`cert`,`ca`,`ciphers`,`rejectUnauthorized`,`localAddress`,`protocolVersion`,`origin`,`maxPayload`,`family`,`checkServerIdentity`);this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved(`error`,e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:`websocket connection closed`,context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError(`websocket error`,e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let n=e[t],r=t===e.length-1;jl(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch{}r&&Ql(()=>{this.writable=!0,this.emitReserved(`drain`)},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?`wss`:`ws`,t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=su()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},wu=$l.WebSocket||$l.MozWebSocket;const Tu={websocket:class extends Cu{createSocket(e,t,n){return Su?new wu(e,t,n):t?new wu(e,t):new wu(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends du{get name(){return`webtransport`}doOpen(){try{this._transport=new WebTransport(this.createUri(`https`),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved(`error`,e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError(`webtransport error`,e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=Xl(2**53-1,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Kl();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();let i=()=>{n.read().then(({done:e,value:t})=>{e||(this.onPacket(t),i())}).catch(e=>{})};i();let a={type:`open`};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&Ql(()=>{this.writable=!0,this.emitReserved(`drain`)},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)==null||e.close()}},polling:bu};var Eu=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Du=[`source`,`protocol`,`authority`,`userInfo`,`user`,`password`,`host`,`port`,`relative`,`path`,`directory`,`file`,`query`,`anchor`];function Ou(e){if(e.length>8e3)throw`URI too long`;let t=e,n=e.indexOf(`[`),r=e.indexOf(`]`);n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,`;`)+e.substring(r,e.length));let i=Eu.exec(e||``),a={},o=14;for(;o--;)a[Du[o]]=i[o]||``;return n!=-1&&r!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,`:`),a.authority=a.authority.replace(`[`,``).replace(`]`,``).replace(/;/g,`:`),a.ipv6uri=!0),a.pathNames=ku(a,a.path),a.queryKey=Au(a,a.query),a}function ku(e,t){let n=t.replace(/\/{2,9}/g,`/`).split(`/`);return(t.slice(0,1)==`/`||t.length===0)&&n.splice(0,1),t.slice(-1)==`/`&&n.splice(n.length-1,1),n}function Au(e,t){let n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}var ju=typeof addEventListener==`function`&&typeof removeEventListener==`function`,Mu=[];ju&&addEventListener(`offline`,()=>{Mu.forEach(e=>e())},!1);var Nu=class e extends Q{constructor(e,t){if(super(),this.binaryType=`arraybuffer`,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e==`object`&&(t=e,e=null),e){let n=Ou(e);t.hostname=n.host,t.secure=n.protocol===`https`||n.protocol===`wss`,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Ou(t.host).host);ru(this,t),this.secure=t.secure==null?typeof location<`u`&&location.protocol===`https:`:t.secure,t.hostname&&!t.port&&(t.port=this.secure?`443`:`80`),this.hostname=t.hostname||(typeof location<`u`?location.hostname:`localhost`),this.port=t.port||(typeof location<`u`&&location.port?location.port:this.secure?`443`:`80`),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:`/engine.io`,agent:!1,withCredentials:!1,upgrade:!0,timestampParam:`t`,rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,``)+(this.opts.addTrailingSlash?`/`:``),typeof this.opts.query==`string`&&(this.opts.query=lu(this.opts.query)),ju&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener(`beforeunload`,this._beforeunloadEventListener,!1)),this.hostname!==`localhost`&&(this._offlineEventListener=()=>{this._onClose(`transport close`,{description:`network connection lost`})},Mu.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved(`error`,`No transports available`)},0);return}let t=this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&this.transports.indexOf(`websocket`)!==-1?`websocket`:this.transports[0];this.readyState=`opening`;let n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on(`drain`,this._onDrain.bind(this)).on(`packet`,this._onPacket.bind(this)).on(`error`,this._onError.bind(this)).on(`close`,e=>this._onClose(`transport close`,e))}onOpen(){this.readyState=`open`,e.priorWebsocketSuccess=this.transport.name===`websocket`,this.emitReserved(`open`),this.flush()}_onPacket(e){if(this.readyState===`opening`||this.readyState===`open`||this.readyState===`closing`)switch(this.emitReserved(`packet`,e),this.emitReserved(`heartbeat`),e.type){case`open`:this.onHandshake(JSON.parse(e.data));break;case`ping`:this._sendPacket(`pong`),this.emitReserved(`ping`),this.emitReserved(`pong`),this._resetPingTimeout();break;case`error`:let t=Error(`server error`);t.code=e.data,this._onError(t);break;case`message`:this.emitReserved(`data`,e.data),this.emitReserved(`message`,e.data);break}}onHandshake(e){this.emitReserved(`handshake`,e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!==`closed`&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose(`ping timeout`)},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved(`drain`):this.flush()}flush(){if(this.readyState!==`closed`&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved(`flush`)}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name===`polling`&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let n=this.writeBuffer[t].data;if(n&&(e+=au(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ql(()=>{this._onClose(`ping timeout`)},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket(`message`,e,t,n),this}send(e,t,n){return this._sendPacket(`message`,e,t,n),this}_sendPacket(e,t,n,r){if(typeof t==`function`&&(r=t,t=void 0),typeof n==`function`&&(r=n,n=null),this.readyState===`closing`||this.readyState===`closed`)return;n||={},n.compress=!1!==n.compress;let i={type:e,data:t,options:n};this.emitReserved(`packetCreate`,i),this.writeBuffer.push(i),r&&this.once(`flush`,r),this.flush()}close(){let e=()=>{this._onClose(`forced close`),this.transport.close()},t=()=>{this.off(`upgrade`,t),this.off(`upgradeError`,t),e()},n=()=>{this.once(`upgrade`,t),this.once(`upgradeError`,t)};return(this.readyState===`opening`||this.readyState===`open`)&&(this.readyState=`closing`,this.writeBuffer.length?this.once(`drain`,()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(t){if(e.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState===`opening`)return this.transports.shift(),this._open();this.emitReserved(`error`,t),this._onClose(`transport error`,t)}_onClose(e,t){if(this.readyState===`opening`||this.readyState===`open`||this.readyState===`closing`){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners(`close`),this.transport.close(),this.transport.removeAllListeners(),ju&&(this._beforeunloadEventListener&&removeEventListener(`beforeunload`,this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=Mu.indexOf(this._offlineEventListener);e!==-1&&Mu.splice(e,1)}this.readyState=`closed`,this.id=null,this.emitReserved(`close`,e,t),this.writeBuffer=[],this._prevBufferLen=0}}};Nu.protocol=4;var Pu=class extends Nu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState===`open`&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Nu.priorWebsocketSuccess=!1;let r=()=>{n||(t.send([{type:`ping`,data:`probe`}]),t.once(`packet`,e=>{if(!n)if(e.type===`pong`&&e.data===`probe`){if(this.upgrading=!0,this.emitReserved(`upgrading`,t),!t)return;Nu.priorWebsocketSuccess=t.name===`websocket`,this.transport.pause(()=>{n||this.readyState!==`closed`&&(l(),this.setTransport(t),t.send([{type:`upgrade`}]),this.emitReserved(`upgrade`,t),t=null,this.upgrading=!1,this.flush())})}else{let e=Error(`probe error`);e.transport=t.name,this.emitReserved(`upgradeError`,e)}}))};function i(){n||(n=!0,l(),t.close(),t=null)}let a=e=>{let n=Error(`probe error: `+e);n.transport=t.name,i(),this.emitReserved(`upgradeError`,n)};function o(){a(`transport closed`)}function s(){a(`socket closed`)}function c(e){t&&e.name!==t.name&&i()}let l=()=>{t.removeListener(`open`,r),t.removeListener(`error`,a),t.removeListener(`close`,o),this.off(`close`,s),this.off(`upgrading`,c)};t.once(`open`,r),t.once(`error`,a),t.once(`close`,o),this.once(`close`,s),this.once(`upgrading`,c),this._upgrades.indexOf(`webtransport`)!==-1&&e!==`webtransport`?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}},Fu=class extends Pu{constructor(e,t={}){let n=typeof e==`object`?e:t;(!n.transports||n.transports&&typeof n.transports[0]==`string`)&&(n.transports=(n.transports||[`polling`,`websocket`,`webtransport`]).map(e=>Tu[e]).filter(e=>!!e)),super(e,n)}};Fu.protocol;function Iu(e,t=``,n){let r=e;n||=typeof location<`u`&&location,e??=n.protocol+`//`+n.host,typeof e==`string`&&(e.charAt(0)===`/`&&(e=e.charAt(1)===`/`?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=n===void 0?`https://`+e:n.protocol+`//`+e),r=Ou(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port=`80`:/^(http|ws)s$/.test(r.protocol)&&(r.port=`443`)),r.path=r.path||`/`;let i=r.host.indexOf(`:`)===-1?r.host:`[`+r.host+`]`;return r.id=r.protocol+`://`+i+`:`+r.port+t,r.href=r.protocol+`://`+i+(n&&n.port===r.port?``:`:`+r.port),r}var Lu=typeof ArrayBuffer==`function`,Ru=e=>typeof ArrayBuffer.isView==`function`?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,zu=Object.prototype.toString,Bu=typeof Blob==`function`||typeof Blob<`u`&&zu.call(Blob)===`[object BlobConstructor]`,Vu=typeof File==`function`||typeof File<`u`&&zu.call(File)===`[object FileConstructor]`;function Hu(e){return Lu&&(e instanceof ArrayBuffer||Ru(e))||Bu&&e instanceof Blob||Vu&&e instanceof File}function Uu(e,t){if(!e||typeof e!=`object`)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Uu(e[t]))return!0;return!1}if(Hu(e))return!0;if(e.toJSON&&typeof e.toJSON==`function`&&arguments.length===1)return Uu(e.toJSON(),!0);for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Uu(e[t]))return!0;return!1}function Wu(e){let t=[],n=e.data,r=e;return r.data=Gu(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Gu(e,t){if(!e)return e;if(Hu(e)){let n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){let n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=Gu(e[r],t);return n}else if(typeof e==`object`&&!(e instanceof Date)){let n={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Gu(e[r],t));return n}return e}function Ku(e,t){return e.data=qu(e.data,t),delete e.attachments,e}function qu(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num==`number`&&e.num>=0&&e.num<t.length)return t[e.num];throw Error(`illegal attachments`)}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=qu(e[n],t);else if(typeof e==`object`)for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=qu(e[n],t));return e}var Ju=t({Decoder:()=>Zu,Encoder:()=>Xu,PacketType:()=>$,isPacketValid:()=>id,protocol:()=>5}),Yu=[`connect`,`connect_error`,`disconnect`,`disconnecting`,`newListener`,`removeListener`],$;(function(e){e[e.CONNECT=0]=`CONNECT`,e[e.DISCONNECT=1]=`DISCONNECT`,e[e.EVENT=2]=`EVENT`,e[e.ACK=3]=`ACK`,e[e.CONNECT_ERROR=4]=`CONNECT_ERROR`,e[e.BINARY_EVENT=5]=`BINARY_EVENT`,e[e.BINARY_ACK=6]=`BINARY_ACK`})($||={});var Xu=class{constructor(e){this.replacer=e}encode(e){return(e.type===$.EVENT||e.type===$.ACK)&&Uu(e)?this.encodeAsBinary({type:e.type===$.EVENT?$.BINARY_EVENT:$.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=``+e.type;return(e.type===$.BINARY_EVENT||e.type===$.BINARY_ACK)&&(t+=e.attachments+`-`),e.nsp&&e.nsp!==`/`&&(t+=e.nsp+`,`),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=Wu(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}},Zu=class e extends Q{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e==`string`){if(this.reconstructor)throw Error(`got plaintext data when reconstructing a packet`);t=this.decodeString(e);let n=t.type===$.BINARY_EVENT;n||t.type===$.BINARY_ACK?(t.type=n?$.EVENT:$.ACK,this.reconstructor=new Qu(t),t.attachments===0&&super.emitReserved(`decoded`,t)):super.emitReserved(`decoded`,t)}else if(Hu(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved(`decoded`,t));else throw Error(`got binary data when not reconstructing a packet`);else throw Error(`Unknown type: `+e)}decodeString(t){let n=0,r={type:Number(t.charAt(0))};if($[r.type]===void 0)throw Error(`unknown packet type `+r.type);if(r.type===$.BINARY_EVENT||r.type===$.BINARY_ACK){let e=n+1;for(;t.charAt(++n)!==`-`&&n!=t.length;);let i=t.substring(e,n);if(i!=Number(i)||t.charAt(n)!==`-`)throw Error(`Illegal attachments`);r.attachments=Number(i)}if(t.charAt(n+1)===`/`){let e=n+1;for(;++n&&!(t.charAt(n)===`,`||n===t.length););r.nsp=t.substring(e,n)}else r.nsp=`/`;let i=t.charAt(n+1);if(i!==``&&Number(i)==i){let e=n+1;for(;++n;){let e=t.charAt(n);if(e==null||Number(e)!=e){--n;break}if(n===t.length)break}r.id=Number(t.substring(e,n+1))}if(t.charAt(++n)){let i=this.tryParse(t.substr(n));if(e.isPayloadValid(r.type,i))r.data=i;else throw Error(`invalid payload`)}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case $.CONNECT:return nd(t);case $.DISCONNECT:return t===void 0;case $.CONNECT_ERROR:return typeof t==`string`||nd(t);case $.EVENT:case $.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]==`number`||typeof t[0]==`string`&&Yu.indexOf(t[0])===-1);case $.ACK:case $.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&=(this.reconstructor.finishedReconstruction(),null)}},Qu=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let e=Ku(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function $u(e){return typeof e==`string`}var ed=Number.isInteger||function(e){return typeof e==`number`&&isFinite(e)&&Math.floor(e)===e};function td(e){return e===void 0||ed(e)}function nd(e){return Object.prototype.toString.call(e)===`[object Object]`}function rd(e,t){switch(e){case $.CONNECT:return t===void 0||nd(t);case $.DISCONNECT:return t===void 0;case $.EVENT:return Array.isArray(t)&&(typeof t[0]==`number`||typeof t[0]==`string`&&Yu.indexOf(t[0])===-1);case $.ACK:return Array.isArray(t);case $.CONNECT_ERROR:return typeof t==`string`||nd(t);default:return!1}}function id(e){return $u(e.nsp)&&td(e.id)&&rd(e.type,e.data)}function ad(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var od=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),sd=class extends Q{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[ad(e,`open`,this.onopen.bind(this)),ad(e,`packet`,this.onpacket.bind(this)),ad(e,`error`,this.onerror.bind(this)),ad(e,`close`,this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState===`open`&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift(`message`),this.emit.apply(this,e),this}emit(e,...t){if(od.hasOwnProperty(e))throw Error(`"`+e.toString()+`" is a reserved event name`);if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let n={type:$.EVENT,data:t};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof t[t.length-1]==`function`){let e=this.ids++,r=t.pop();this._registerAckCallback(e,r),n.id=e}let r=this.io.engine?.transport?.writable,i=this.connected&&!this.io.engine?._hasPingExpired();return this.flags.volatile&&!r||(i?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){let n=this.flags.timeout??this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}let r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error(`operation has timed out`))},n),i=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise((n,r)=>{let i=(e,t)=>e?r(e):n(t);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]==`function`&&(t=e.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>(this._queue[0],e===null?(this._queue.shift(),t&&t(null,...r)):n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;let t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth==`function`?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:$.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved(`connect_error`,e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved(`disconnect`,e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error(`socket has been disconnected`))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case $.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved(`connect_error`,Error(`It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)`));break;case $.EVENT:case $.BINARY_EVENT:this.onevent(e);break;case $.ACK:case $.BINARY_ACK:this.onack(e);break;case $.DISCONNECT:this.ondisconnect();break;case $.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved(`connect_error`,t);break}}onevent(e){let t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]==`string`&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,n=!1;return function(...r){n||(n=!0,t.packet({type:$.ACK,id:e,data:r}))}}onack(e){let t=this.acks[e.id];typeof t==`function`&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved(`connect`)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose(`io server disconnect`)}destroy(){this.subs&&=(this.subs.forEach(e=>e()),void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:$.DISCONNECT}),this.destroy(),this.connected&&this.onclose(`io client disconnect`),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let n of t)n.apply(this,e.data)}}};function cd(e){e||={},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}cd.prototype.duration=function(){var e=this.ms*this.factor**+ this.attempts++;if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0},cd.prototype.reset=function(){this.attempts=0},cd.prototype.setMin=function(e){this.ms=e},cd.prototype.setMax=function(e){this.max=e},cd.prototype.setJitter=function(e){this.jitter=e};var ld=class extends Q{constructor(e,t){super(),this.nsps={},this.subs=[],e&&typeof e==`object`&&(t=e,e=void 0),t||={},t.path=t.path||`/socket.io`,this.opts=t,ru(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor??.5),this.backoff=new cd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState=`closed`,this.uri=e;let n=t.parser||Ju;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)==null||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)==null||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)==null||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf(`open`))return this;this.engine=new Fu(this.uri,this.opts);let t=this.engine,n=this;this._readyState=`opening`,this.skipReconnect=!1;let r=ad(t,`open`,function(){n.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState=`closed`,this.emitReserved(`error`,t),e?e(t):this.maybeReconnectOnOpen()},a=ad(t,`error`,i);if(!1!==this._timeout){let e=this._timeout,n=this.setTimeoutFn(()=>{r(),i(Error(`timeout`)),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState=`open`,this.emitReserved(`open`);let e=this.engine;this.subs.push(ad(e,`ping`,this.onping.bind(this)),ad(e,`data`,this.ondata.bind(this)),ad(e,`error`,this.onerror.bind(this)),ad(e,`close`,this.onclose.bind(this)),ad(this.decoder,`decoded`,this.ondecoded.bind(this)))}onping(){this.emitReserved(`ping`)}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose(`parse error`,e)}}ondecoded(e){Ql(()=>{this.emitReserved(`packet`,e)},this.setTimeoutFn)}onerror(e){this.emitReserved(`error`,e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new sd(this,e,t),this.nsps[e]=n),n}_destroy(e){let t=Object.keys(this.nsps);for(let e of t)if(this.nsps[e].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose(`forced close`)}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)==null||n.close(),this.backoff.reset(),this._readyState=`closed`,this.emitReserved(`close`,e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved(`reconnect_failed`),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved(`reconnect_attempt`,e.backoff.attempts),!e.skipReconnect&&e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved(`reconnect_error`,t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved(`reconnect`,e)}},ud={};function dd(e,t){typeof e==`object`&&(t=e,e=void 0),t||={};let n=Iu(e,t.path||`/socket.io`),r=n.source,i=n.id,a=n.path,o=ud[i]&&a in ud[i].nsps,s=t.forceNew||t[`force new connection`]||!1===t.multiplex||o,c;return s?c=new ld(r,t):(ud[i]||(ud[i]=new ld(r,t)),c=ud[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(dd,{Manager:ld,Socket:sd,io:dd,connect:dd});var fd={class:`sidebar-nav`},pd={key:0,class:`badge`},md={class:`status-info`},hd={class:`pro-name`},gd={key:0,class:`pro-email`},_d={class:`pro-role`},vd=[`title`],yd=Z(L({__name:`SidebarProf`,props:{isOpen:{type:Boolean,required:!0},isConnected:{type:Boolean,required:!0},userName:{type:String,required:!0},userSpeciality:{type:String,required:!0},activeRequestsCount:{type:Number,default:0},activeView:{type:String,default:`requests`},userEmail:{type:String,default:``}},emits:[`logout`,`navigate`,`view-profile`],setup(e,{emit:t}){let n=t,r=()=>{n(`logout`)},i=e=>{n(`navigate`,e)};return(t,a)=>(B(),V(`aside`,{class:j([`sidebar`,{"is-open":e.isOpen}])},[a[17]||=U(`div`,{class:`sidebar-header`},[U(`div`,{class:`logo`},[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`sidebar-logo-img`})])],-1),U(`nav`,fd,[U(`a`,{href:`#`,class:j([`nav-item`,{active:e.activeView===`requests`}]),onClick:a[0]||=Y(e=>i(`requests`),[`prevent`])},[a[8]||=U(`span`,{class:`nav-icon`},``,-1),a[9]||=U(`span`,{class:`nav-label`},`En attente`,-1),e.activeRequestsCount?(B(),V(`span`,pd,M(e.activeRequestsCount),1)):K(``,!0)],2),U(`a`,{href:`#`,class:j([`nav-item`,{active:e.activeView===`all_history`}]),onClick:a[1]||=Y(e=>i(`all_history`),[`prevent`])},[...a[10]||=[U(`span`,{class:`nav-icon`},``,-1),U(`span`,{class:`nav-label`},`Demandes`,-1)]],2),U(`a`,{href:`#`,class:j([`nav-item`,{active:e.activeView===`accepted`}]),onClick:a[2]||=Y(e=>i(`accepted`),[`prevent`])},[...a[11]||=[U(`span`,{class:`nav-icon`},``,-1),U(`span`,{class:`nav-label`},`Accepts`,-1)]],2),U(`a`,{href:`#`,class:j([`nav-item`,{active:e.activeView===`completed`}]),onClick:a[3]||=Y(e=>i(`completed`),[`prevent`])},[...a[12]||=[U(`span`,{class:`nav-icon`},``,-1),U(`span`,{class:`nav-label`},`Compltes`,-1)]],2),U(`a`,{href:`#`,class:j([`nav-item`,{active:e.activeView===`calendar`}]),onClick:a[4]||=Y(e=>i(`calendar`),[`prevent`])},[...a[13]||=[U(`span`,{class:`nav-icon`},``,-1),U(`span`,{class:`nav-label`},`Calendrier`,-1)]],2),U(`a`,{href:`#`,class:j([`nav-item`,{active:e.activeView===`patients`}]),onClick:a[5]||=Y(e=>i(`patients`),[`prevent`])},[...a[14]||=[U(`span`,{class:`nav-icon`},``,-1),U(`span`,{class:`nav-label`},`Patients`,-1)]],2),U(`a`,{href:`#`,class:j([`nav-item`,{active:e.activeView===`analytics`}]),onClick:a[6]||=Y(e=>i(`analytics`),[`prevent`])},[...a[15]||=[U(`span`,{class:`nav-icon`},``,-1),U(`span`,{class:`nav-label`},`Analyses`,-1)]],2),U(`a`,{href:`#`,class:`nav-item logout`,onClick:Y(r,[`prevent`])},[...a[16]||=[U(`span`,{class:`nav-icon`},``,-1),U(`span`,{class:`nav-label`},`Quitter`,-1)]])]),U(`div`,{class:`pro-status`,onClick:a[7]||=e=>n(`view-profile`),title:`Voir mon profil`},[U(`div`,{class:j([`status-indicator`,e.isConnected?`online`:`offline`])},null,2),U(`div`,md,[U(`p`,hd,M(e.userName),1),e.userEmail?(B(),V(`p`,gd,M(e.userEmail),1)):K(``,!0),U(`p`,_d,M(e.userSpeciality||`Patientez...`),1)]),U(`div`,{class:`socket-status`,title:e.isConnected?`WebSocket Connect`:`WebSocket Dconnect`},null,8,vd)])],2))}}),[[`__scopeId`,`data-v-97a6bc16`]]),bd={class:`calendar-wrapper`},xd={class:`calendar-header-bar`},Sd={class:`month-nav`},Cd={class:`calendar-info`},wd={class:`event-count`},Td={class:`calendar-grid`},Ed=[`onClick`],Dd={class:`day-number`},Od={class:`day-events`},kd=[`onClick`,`title`],Ad={class:`event-meta`},jd={class:`event-time`},Md={class:`event-title`},Nd={key:0,class:`more-indicator`},Pd={class:`dropdown-header`},Fd={class:`dropdown-list`},Id=[`onClick`],Ld={class:`event-meta`},Rd={class:`event-time`},zd={class:`event-info`},Bd={class:`event-title`},Vd={class:`event-service`},Hd={class:`event-status-tag`},Ud=Z(L({__name:`AgendaComponent`,props:{activeRequests:{type:Array,required:!0,default:()=>[]},acceptedRequestsList:{type:Array,required:!0,default:()=>[]}},emits:[`show-details`],setup(e,{emit:t}){let n=e,r=t,i=F(new Date),a=F(null),o=q(()=>{let e=i.value.toLocaleString(`fr-FR`,{month:`long`,year:`numeric`});return e.charAt(0).toUpperCase()+e.slice(1)}),s=q(()=>{let e=i.value,t=e.getFullYear(),n=e.getMonth(),r=new Date(t,n,1).getDay();r=r===0?6:r-1;let a=new Date(t,n+1,0).getDate(),o=[],s=new Date(t,n,0).getDate();for(let e=r;e>0;e--){let r=new Date(t,n-1,s-e+1);o.push({day:r.getDate(),month:r.getMonth(),year:r.getFullYear(),currentMonth:!1})}for(let e=1;e<=a;e++)o.push({day:e,month:n,year:t,currentMonth:!0});let c=42-o.length;for(let e=1;e<=c;e++){let r=new Date(t,n+1,e);o.push({day:r.getDate(),month:r.getMonth(),year:r.getFullYear(),currentMonth:!1})}return o}),c=e=>{let t=new Date;return t.getDate()===e.day&&t.getMonth()===e.month&&t.getFullYear()===e.year},l=e=>{if(!e)return null;let t=new Date(e);if(isNaN(t.getTime()))return null;if(typeof e==`string`&&/^\d{4}-\d{2}-\d{2}$/.test(e)){let t=e.split(`-`).map(Number);if(t.length===3){let[e,n,r]=t;return new Date(e,n-1,r)}}return t},u=q(()=>{let e={};return[...n.activeRequests.map(e=>({...e,calendarStatus:`pending`})),...n.acceptedRequestsList.map(e=>({...e,calendarStatus:e.status}))].forEach(t=>{let n=l(t.startDate)||l(t.date)||l(t.createdAt);if(n){let r=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`;e[r]||(e[r]=[]),e[r].some(e=>e.id===t.id)||e[r].push(t)}}),e}),d=q(()=>n.activeRequests.length+n.acceptedRequestsList.length),f=()=>{i.value=new Date(i.value.getFullYear(),i.value.getMonth()-1,1)},p=()=>{i.value=new Date(i.value.getFullYear(),i.value.getMonth()+1,1)},m=(e,t)=>{t.stopPropagation(),a.value===e?a.value=null:a.value=e},h=e=>{let t=l(e);return t?t.toLocaleTimeString(`fr-FR`,{hour:`2-digit`,minute:`2-digit`}):``},g=e=>({"Post-partum help":`Soin post-partum`,"Wound Dressing":`Pansement`,"Medication Admin":`Admin. mdicaments`,nursing:`Soins infirmiers`,"post-partum":`Soin post-partum`,wound:`Pansement`,medication:`Admin. mdicaments`,kine:`Kinsithrapie`})[e]||e,_=e=>{r(`show-details`,e)};return(e,t)=>(B(),V(`div`,bd,[U(`div`,xd,[U(`div`,Sd,[U(`button`,{class:`btn-nav`,onClick:f},``),U(`h2`,null,M(o.value),1),U(`button`,{class:`btn-nav`,onClick:p},``)]),U(`div`,Cd,[U(`span`,wd,M(d.value)+` soins au total`,1)])]),U(`div`,Td,[t[2]||=G(`<div class="day-header" data-v-b4387198>Lundi</div><div class="day-header" data-v-b4387198>Mardi</div><div class="day-header" data-v-b4387198>Mercredi</div><div class="day-header" data-v-b4387198>Jeudi</div><div class="day-header" data-v-b4387198>Vendredi</div><div class="day-header" data-v-b4387198>Samedi</div><div class="day-header" data-v-b4387198>Dimanche</div>`,7),(B(!0),V(z,null,R(s.value,(e,n)=>(B(),V(`div`,{key:n,class:j([`calendar-day`,{"other-month":!e.currentMonth,today:c(e),"has-multiple":(u.value[`${e.year}-${e.month}-${e.day}`]?.length||0)>2,"is-expanded":a.value===`${e.year}-${e.month}-${e.day}`}]),onClick:t=>m(`${e.year}-${e.month}-${e.day}`,t)},[U(`span`,Dd,M(e.day),1),U(`div`,Od,[(B(!0),V(z,null,R(u.value[`${e.year}-${e.month}-${e.day}`]?.slice(0,2)||[],e=>(B(),V(`div`,{key:e.id,class:j([`calendar-event`,e.calendarStatus]),onClick:Y(t=>_(e),[`stop`]),title:`${e.patientFirstname} ${e.patientLastname} (${e.calendarStatus===`pending`?`En attente`:e.calendarStatus===`accepted`?`Accept`:e.calendarStatus===`validated`?`Valid`:`Refus`})`},[U(`div`,Ad,[U(`span`,jd,M(h(e.startDate||e.createdAt)),1),U(`span`,{class:j([`urgency-dot-mini`,e.urgency])},null,2)]),U(`div`,Md,M(e.patientFirstname)+` `+M(e.patientLastname?.charAt(0))+`.`,1)],10,kd))),128)),(u.value[`${e.year}-${e.month}-${e.day}`]?.length||0)>2?(B(),V(`div`,Nd,` + `+M((u.value[`${e.year}-${e.month}-${e.day}`]?.length||0)-2)+` de plus `,1)):K(``,!0)]),a.value===`${e.year}-${e.month}-${e.day}`?(B(),V(`div`,{key:0,class:`events-dropdown`,onClick:t[1]||=Y(()=>{},[`stop`])},[U(`header`,Pd,[U(`span`,null,M(e.day)+` `+M(o.value),1),U(`button`,{class:`close-dropdown`,onClick:t[0]||=e=>a.value=null},``)]),U(`div`,Fd,[(B(!0),V(z,null,R(u.value[`${e.year}-${e.month}-${e.day}`]||[],e=>(B(),V(`div`,{key:e.id,class:j([`dropdown-event`,e.calendarStatus]),onClick:t=>_(e)},[U(`div`,Ld,[U(`span`,Rd,M(h(e.startDate||e.createdAt)),1),U(`span`,{class:j([`urgency-dot-mini`,e.urgency])},null,2)]),U(`div`,zd,[U(`div`,Bd,M(e.patientFirstname)+` `+M(e.patientLastname),1),U(`div`,Vd,M(g(e.service?.name)),1)]),U(`div`,Hd,M(e.calendarStatus===`pending`?`Attente`:e.calendarStatus),1)],10,Id))),128))])])):K(``,!0)],10,Ed))),128))])]))}}),[[`__scopeId`,`data-v-b4387198`]]),Wd={class:`analytics-container`},Gd={key:0,class:`loading-state`},Kd={key:1,class:`error-state`},qd={key:2,class:`dashboard-content`},Jd={class:`summary-grid`},Yd={class:`kpi-card highlight`},Xd={class:`kpi-info`},Zd={class:`kpi-value`},Qd={class:`kpi-card`},$d={class:`kpi-info`},ef={class:`kpi-value`},tf={class:`kpi-card`},nf={class:`kpi-info`},rf={class:`kpi-value`},af={class:`kpi-card`},of={class:`kpi-info`},sf={class:`kpi-value`},cf={class:`charts-row`},lf={class:`chart-card main-chart`},uf={class:`bar-chart-container`},df={key:0,class:`empty-chart`},ff={key:1,class:`bar-chart`},pf={class:`bar-tooltip`},mf={class:`bar-label`},hf={class:`chart-card side-chart`},gf={class:`top-services-list`},_f={class:`service-rank`},vf={class:`service-details`},yf={class:`service-name`},bf={class:`service-stats`},xf={class:`service-gain`},Sf={key:0,class:`empty-list`},Cf={class:`activity-section`},wf={class:`table-responsive`},Tf={class:`activity-table`},Ef={class:`font-medium`},Df={class:`text-gray`},Of={class:`font-bold`},kf={key:0},Af=Z(L({__name:`AnalyticsDashboard`,setup(e){let t=F(null),n=F(!0),r=F(``),i=async()=>{n.value=!0,r.value=``;let e=X.getItem(`access_token`);try{let n=await fetch(`/api/professionals/analytics`,{headers:{Authorization:`Bearer ${e}`,accept:`application/json`}});n.ok?t.value=await n.json():r.value=`Impossible de charger les analyses.`}catch(e){console.error(`Error fetching analytics:`,e),r.value=`Erreur de connexion.`}finally{n.value=!1}};hr(i);let a=q(()=>t.value?.graphData?.monthlyEarnings?.length&&Math.max(...t.value.graphData.monthlyEarnings.map(e=>e.amount))||100),o=e=>{let t=e/a.value*100;return`${Math.max(t,5)}%`},s=e=>new Date(e).toLocaleDateString(`fr-FR`,{day:`numeric`,month:`short`,hour:`2-digit`,minute:`2-digit`}),c=e=>{switch(e?.toLowerCase()){case`accepted`:return`status-accepted`;case`denied`:case`rejected`:return`status-rejected`;case`done`:case`completed`:return`status-completed`;default:return`status-pending`}},l=e=>{switch(e?.toLowerCase()){case`accepted`:return`Accept`;case`denied`:case`rejected`:return`Refus`;case`done`:case`completed`:return`Termin`;case`pending`:return`En attente`;default:return e}};return(e,a)=>(B(),V(`div`,Wd,[n.value?(B(),V(`div`,Gd,[...a[0]||=[U(`div`,{class:`spinner`},null,-1),U(`p`,null,`Chargement de vos statistiques...`,-1)]])):r.value?(B(),V(`div`,Kd,[U(`p`,null,M(r.value),1),U(`button`,{class:`btn-retry`,onClick:i},`Ressayer`)])):t.value?(B(),V(`div`,qd,[U(`div`,Jd,[U(`div`,Yd,[a[2]||=U(`div`,{class:`kpi-icon`},``,-1),U(`div`,Xd,[a[1]||=U(`span`,{class:`kpi-label`},`Revenu Total`,-1),U(`span`,Zd,M(t.value.summary.totalEarning.toLocaleString())+` DT`,1)])]),U(`div`,Qd,[a[4]||=U(`div`,{class:`kpi-icon`},``,-1),U(`div`,$d,[a[3]||=U(`span`,{class:`kpi-label`},`Total Demandes`,-1),U(`span`,ef,M(t.value.summary.totalRequests),1)])]),U(`div`,tf,[a[6]||=U(`div`,{class:`kpi-icon`},``,-1),U(`div`,nf,[a[5]||=U(`span`,{class:`kpi-label`},`Taux d'Acceptation`,-1),U(`span`,rf,M(t.value.summary.acceptanceRate)+`%`,1)])]),U(`div`,af,[a[8]||=U(`div`,{class:`kpi-icon`},``,-1),U(`div`,of,[a[7]||=U(`span`,{class:`kpi-label`},`Taux de Compltion`,-1),U(`span`,sf,M(t.value.summary.completionRate)+`%`,1)])])]),U(`div`,cf,[U(`div`,lf,[a[9]||=U(`h3`,null,`Revenus Mensuels`,-1),U(`div`,uf,[t.value.graphData.monthlyEarnings.length?(B(),V(`div`,ff,[(B(!0),V(z,null,R(t.value.graphData.monthlyEarnings,e=>(B(),V(`div`,{key:e.month,class:`bar-column`},[U(`div`,pf,M(e.amount)+` DT`,1),U(`div`,{class:`bar-fill`,style:ue({height:o(e.amount)})},null,4),U(`span`,mf,M(e.month),1)]))),128))])):(B(),V(`div`,df,` Pas assez de donnes `))])]),U(`div`,hf,[a[10]||=U(`h3`,null,`Top Services`,-1),U(`div`,gf,[(B(!0),V(z,null,R(t.value.topServices,(e,t)=>(B(),V(`div`,{key:t,class:`service-item`},[U(`div`,_f,M(t+1),1),U(`div`,vf,[U(`span`,yf,M(e.name),1),U(`span`,bf,M(e.count)+` demandes`,1)]),U(`div`,xf,M(e.gains)+` DT`,1)]))),128)),t.value.topServices.length?K(``,!0):(B(),V(`div`,Sf,` Aucun service enregistr `))])])]),U(`div`,Cf,[a[13]||=U(`h3`,null,`Activit Rcente`,-1),U(`div`,wf,[U(`table`,Tf,[a[12]||=U(`thead`,null,[U(`tr`,null,[U(`th`,null,`Service`),U(`th`,null,`Date`),U(`th`,null,`Montant`),U(`th`,null,`Statut`)])],-1),U(`tbody`,null,[(B(!0),V(z,null,R(t.value.recentActivity,e=>(B(),V(`tr`,{key:e.requestId},[U(`td`,Ef,M(e.service),1),U(`td`,Df,M(s(e.date)),1),U(`td`,Of,M(e.price)+` DT`,1),U(`td`,null,[U(`span`,{class:j([`status-badge`,c(e.status)])},M(l(e.status)),3)])]))),128)),t.value.recentActivity.length?K(``,!0):(B(),V(`tr`,kf,[...a[11]||=[U(`td`,{colspan:`4`,class:`text-center py-4 text-gray`},`Aucune activit rcente`,-1)]]))])])])])])):K(``,!0)]))}}),[[`__scopeId`,`data-v-c33f3837`]]),jf={class:`dashboard-container`},Mf={class:`mobile-top-bar`},Nf={class:`mobile-actions`},Pf={class:`mobile-status`},Ff={class:`notifications-container`},If={class:`notif-content`},Lf={class:`notif-text`},Rf={class:`notif-header`},zf={key:0},Bf={key:1},Vf={key:0},Hf={key:0,class:`type-tag`},Uf={key:1,class:`loading-data`},Wf=[`onClick`],Gf={class:`notif-actions`},Kf=[`onClick`],qf=[`onClick`],Jf={class:`main-content`},Yf={class:`content-header`},Xf={class:`header-titles`},Zf={key:0},Qf={key:1},$f={key:2},ep={key:3},tp={key:4},np={key:5},rp={key:0},ip={key:1},ap={key:2},op={key:3},sp={key:4},cp={key:5,class:`offline-warning`},lp={class:`header-actions`},up=[`disabled`],dp={class:`filter-section`},fp={class:`filter-bar`},pp={key:0,class:`search-input`},mp=[`placeholder`],hp={id:`care-suggestions`},gp=[`value`],_p={key:1,class:`filter-group`},vp={key:2,class:`status-filters`},yp={class:`requests-grid`},bp={key:0,class:`loading-state`},xp={key:1,class:`empty-state`},Sp={class:`card-header`},Cp={class:`header-top`},wp={class:`patient-info`},Tp={class:`avatar`},Ep={class:`header-right`},Dp={key:0,class:`card-price-badge`},Op={class:`urgency-badge`},kp={class:`timestamp`},Ap={key:0,class:`card-distance-badge`},jp={class:`dist-val`},Mp={class:`card-body`},Np={class:`request-type`},Pp={class:`request-description`},Fp={key:0,class:`soins-tags`},Ip={class:`card-actions`},Lp=[`onClick`],Rp=[`onClick`],zp=[`onClick`],Bp={key:0,class:`pagination-controls`},Vp=[`disabled`],Hp={class:`page-numbers`},Up=[`onClick`],Wp=[`disabled`],Gp={key:1,class:`requests-grid`},Kp={key:0,class:`empty-state`},qp={class:`card-header`},Jp={class:`header-top`},Yp={class:`patient-info`},Xp={class:`avatar`},Zp={class:`header-right`},Qp={key:0,class:`card-price-badge`},$p={class:`timestamp`},em={key:0,class:`card-distance-badge`},tm={class:`dist-val`},nm={class:`card-body`},rm={class:`request-type`},im={class:`request-description`},am={key:0,class:`soins-tags`},om={class:`card-actions`},sm=[`onClick`],cm=[`onClick`],lm=[`onClick`],um=[`href`],dm={key:2,class:`requests-grid`},fm={key:0,class:`loading-state`},pm={key:1,class:`empty-state`},mm={class:`card-header`},hm={class:`header-top`},gm={class:`patient-info`},_m={class:`avatar`},vm={class:`header-right`},ym={key:0,class:`card-price-badge`},bm={class:`timestamp`},xm={key:0,class:`card-distance-badge`},Sm={class:`dist-val`},Cm={class:`card-body`},wm={class:`request-type`},Tm={class:`request-description`},Em={key:0,class:`soins-tags`},Dm={class:`card-actions accepted-actions`},Om=[`onClick`],km={class:`utility-actions`},Am=[`href`],jm=[`href`],Mm=[`onClick`],Nm={key:3,class:`requests-grid`},Pm={key:0,class:`loading-state`},Fm={key:1,class:`empty-state`},Im={class:`card-header`},Lm={class:`header-top`},Rm={class:`patient-info`},zm={class:`avatar`},Bm={class:`header-right`},Vm={key:0,class:`card-price-badge`},Hm={class:`timestamp`},Um={key:0,class:`card-distance-badge`},Wm={class:`dist-val`},Gm={class:`card-body`},Km={class:`request-type`},qm={key:0,class:`soins-tags`},Jm={class:`card-actions`},Ym=[`onClick`],Xm={key:5,class:`requests-grid`},Zm={key:0,class:`loading-state`},Qm={key:1,class:`empty-state`},$m={class:`card-header`},eh={class:`patient-info`},th={class:`avatar`},nh={class:`patient-name`},rh={class:`timestamp`},ih={class:`card-body`},ah={class:`patient-detail-row`},oh={class:`detail-content`},sh={key:0,class:`patient-detail-row`},ch={class:`detail-content`},lh={class:`patient-detail-row`},uh={class:`detail-content`},dh={class:`card-actions mt-auto`},fh=[`href`],ph={key:7,class:`empty-state`},mh={class:`modal-content`},hh={class:`modal-header`},gh={key:0,class:`modal-loading`},_h={key:1,class:`modal-body`},vh={class:`details-section`},yh={class:`patient-profile`},bh={class:`modal-avatar`},xh={class:`patient-main`},Sh={class:`patient-meta`},Ch={class:`status-indicators`},wh={class:`booking-schedule-section`},Th={class:`details-grid`},Eh={class:`detail-item`},Dh={class:`highlight-val`},Oh={class:`detail-item`},kh={class:`detail-item`},Ah={class:`highlight-val`},jh={class:`detail-item`},Mh={class:`detail-item price-item`},Nh={class:`price-tag-large`},Ph={key:0,class:`service-description-box`},Fh={class:`details-grid`},Ih={class:`detail-item`},Lh={class:`detail-item`},Rh={class:`detail-item full-width`},zh={class:`address-with-map`},Bh=[`href`],Vh={key:0,class:`distance-info-modal`},Hh={key:1,class:`address-complement`},Uh={key:0,class:`detail-item`},Wh={key:1,class:`detail-item`},Gh={class:`detail-item`},Kh={key:1,class:`soins-details`},qh={class:`soins-list`},Jh={class:`soin-header`},Yh={class:`soin-title-row`},Xh={class:`frequency-badge`},Zh={key:0,class:`soin-catalog-desc`},Qh={key:0,class:`soin-config mt-2`},$h={class:`answers-grid`},eg={class:`answer-key`},tg={class:`answer-val`},ng={key:2,class:`clinical-docs`},rg={class:`docs-grid-mini`},ig=[`onClick`],ag={class:`doc-meta`},og={class:`doc-name`},sg={class:`doc-secondary`},cg={class:`doc-actions-mini`},lg=[`onClick`],ug=[`onClick`],dg={key:2,class:`modal-footer`},fg={class:`modal-content profile-modal`},pg={class:`modal-header`},mg={class:`modal-body`},hg={class:`profile-header-section`},gg={class:`profile-avatar-large`},_g={class:`profile-main-info`},vg={class:`speciality-text`},yg={class:`profile-details-grid`},bg={class:`detail-item`},xg={class:`detail-item`},Sg={class:`detail-item full-width`},Cg={class:`documents-section`},wg={class:`documents-list`},Tg=[`onClick`],Eg={class:`doc-info`},Dg={class:`doc-type`},Og={class:`doc-desc`},kg={class:`doc-status-and-actions`},Ag=[`onClick`],jg={key:0,class:`no-documents`},Mg={class:`modal-footer`},Ng={class:`preview-container`},Pg={class:`preview-top-actions`},Fg=[`src`],Ig=4,Lg=Z(L({__name:`page1`,props:{requests:{type:Array,required:!0}},emits:[`navigate`],setup(e,{emit:t}){let n=X,r=F(n.getItem(`user_name`)||`Professionnel`),i=F(``),a=F(``),o=F(null),s=F([]),c=F(null),l=F(!1),u=F([]),d=F(!1),f=F(!1),p=F(!1),m=F(null),h=F(!1),g=F(`requests`),_=F([]),v=F({}),y=F(null),b=F([]),x=F(``),S=F(``),C=F(``),w=F(``),ee=F(``),T=F(``),E=F(1),D=F(null),te=F(!1),O=F(!1),ne=F(``),k=F(`all`),re=q(()=>{let e=[...u.value.map(e=>({...e,displayStatus:`pending`})),..._.value.map(e=>{let t=e.status?.toLowerCase(),n=e.assignmentStatus?.toLowerCase(),r=t===`done`||n===`done`?`done`:n||t;return{...e,displayStatus:r?.toLowerCase()}})];if(k.value!==`all`&&(e=e.filter(e=>e.displayStatus===k.value)),C.value){let t=C.value.toLowerCase();e=e.filter(e=>e.service?.name?.toLowerCase().includes(t)||N(e.service?.name).toLowerCase().includes(t)||(e.patientFirstname+` `+e.patientLastname).toLowerCase().includes(t))}return w.value&&(e=e.filter(e=>new Date(e.createdAt).toISOString().split(`T`)[0]===w.value)),e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}),ie=q(()=>{let e=[...u.value];if(x.value){let t=x.value.toLowerCase();e=e.filter(e=>{let n=e.service?.name?.toLowerCase().includes(t)||N(e.service?.name).toLowerCase().includes(t),r=e.requestSoins?.some(e=>e.soin?.name?.toLowerCase().includes(t));return n||r})}return S.value&&(e=e.filter(e=>new Date(e.createdAt).toISOString().split(`T`)[0]===S.value)),e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}),A=q(()=>{let e=_.value.filter(e=>{let t=e.status?.toLowerCase(),n=e.assignmentStatus?.toLowerCase();return t!==`done`&&n!==`done`});if(ee.value){let t=ee.value.toLowerCase();e=e.filter(e=>e.service?.name?.toLowerCase().includes(t)||N(e.service?.name).toLowerCase().includes(t)||(e.patientFirstname+` `+e.patientLastname).toLowerCase().includes(t))}return T.value&&(e=e.filter(e=>new Date(e.createdAt).toISOString().split(`T`)[0]===T.value)),e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}),ae=q(()=>{let e=_.value.filter(e=>{let t=e.status?.toLowerCase(),n=e.assignmentStatus?.toLowerCase();return t===`done`||n===`done`});if(ee.value){let t=ee.value.toLowerCase();e=e.filter(e=>e.service?.name?.toLowerCase().includes(t)||N(e.service?.name).toLowerCase().includes(t)||(e.patientFirstname+` `+e.patientLastname).toLowerCase().includes(t))}return T.value&&(e=e.filter(e=>new Date(e.createdAt).toISOString().split(`T`)[0]===T.value)),e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}),oe=async()=>{let e=n.getItem(`access_token`);if(e)try{let t=await fetch(`/api/services/professional/my-content`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});t.ok&&(D.value=await t.json(),console.log(` Professional Content loaded:`,D.value))}catch(e){console.error(`Error fetching professional content:`,e)}},se=q(()=>D.value?.soins||[]),ce=e=>se.value.find(t=>t.name===e)?.description||``,le=q(()=>Math.ceil(ie.value.length/Ig)),ue=q(()=>{let e=(E.value-1)*Ig;return ie.value.slice(e,e+Ig)}),de=e=>{E.value=e,window.scrollTo({top:0,behavior:`smooth`})},fe=()=>{f.value=!f.value},pe=t,me=()=>{console.log(` playNotificationSound called`),`vibrate`in navigator&&navigator.vibrate([200,100,200]);try{let e=new(window.AudioContext||window.webkitAudioContext);e.state===`suspended`&&e.resume();let t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type=`sine`,t.frequency.setValueAtTime(880,e.currentTime),n.gain.setValueAtTime(0,e.currentTime),n.gain.linearRampToValueAtTime(.1,e.currentTime+.05),n.gain.linearRampToValueAtTime(0,e.currentTime+.3),t.start(e.currentTime),t.stop(e.currentTime+.3)}catch(e){console.warn(`Audio playback failed:`,e)}},he=()=>{let e={id:Date.now(),type:`test`,message:`Ceci est une notification de test pour vrifier le son et la vibration.`,reference_id:0,created_at:new Date().toISOString()};me(),s.value.unshift(e),ye(`Daricare Test`,`Le systme de notification est oprationnel !`),setTimeout(()=>{Pe(e.id)},5e3)},ge=async()=>{`Notification`in window&&await Notification.requestPermission()===`granted`&&await ve()},_e=e=>{let t=(e+`=`.repeat((4-e.length%4)%4)).replace(/\-/g,`+`).replace(/_/g,`/`),n=window.atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r[e]=n.charCodeAt(e);return r},ve=async()=>{if(!(`serviceWorker`in navigator)||!(`PushManager`in window)){console.warn(`System notifications are not supported on this device/browser`);return}try{let e=await navigator.serviceWorker.ready,t=await e.pushManager.getSubscription();if(!t){console.log(`Registering device for background notifications...`);try{t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_e(`REPLACE_WITH_YOUR_BACKEND_VAPID_PUBLIC_KEY`)})}catch(e){console.error(`Push registration failed. Check your VAPID key.`,e);return}}console.log(`Device successfully registered for background push:`,t);let r=n.getItem(`access_token`);r&&(await fetch(`/api/notifications/subscribe`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`},body:JSON.stringify(t)}),console.log(`Subscription saved on backend. Background notifications are now active.`))}catch(e){console.error(`Error in background notification setup:`,e)}},ye=(e,t)=>{if(!(`Notification`in window)){console.warn(`This browser does not support desktop notification`);return}let n={body:t,icon:`/favicon.png`,badge:`/favicon.png`,tag:`new-booking`,vibrate:[200,100,200],data:window.location.origin,actions:[{action:`accept`,title:` Accepter`,icon:`/favicon.png`},{action:`decline`,title:` Refuser`,icon:`/favicon.png`}]};Notification.permission===`granted`?`serviceWorker`in navigator&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage({type:`SHOW_NOTIFICATION`,title:e,options:n}):navigator.serviceWorker.ready.then(t=>{t.showNotification(e,n)}):Notification.permission!==`denied`&&Notification.requestPermission().then(n=>{n===`granted`&&ye(e,t)})},be=async()=>{let e=n.getItem(`access_token`);if(e)try{let t=await fetch(`/api/auth/profile`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});if(t.ok){let e=await t.json();console.log(` Professional Profile:`,e),o.value=e,a.value=e.speciality,i.value=e.email,y.value=e.id,e.id&&n.setItem(`user_id`,e.id.toString()),a.value||console.warn(` No speciality found for this user. Speciality-based notifications will not work.`),we()}else console.error(` Failed to fetch profile:`,t.status)}catch(e){console.error(` Error in fetchUserProfile:`,e)}},xe=async e=>{let t=n.getItem(`access_token`);if(!t)return null;try{let n=await fetch(`/api/bookings/${e}`,{headers:{Authorization:`Bearer ${t}`,accept:`application/json`}});if(n.ok)return await n.json()}catch(t){console.error(`Error fetching booking ${e}:`,t)}return null},Se=async e=>{let t=n.getItem(`access_token`),r=y.value||parseInt(n.getItem(`user_id`)||`0`);if(!(!t||!r))try{let n=await fetch(`/api/bookings/distance/${e}/${r}`,{headers:{Authorization:`Bearer ${t}`,accept:`*/*`}});if(n.ok){let t=await n.json();v.value[e]=t.distance}}catch(t){console.error(`Error fetching distance for request ${e}:`,t)}},Ce=async()=>{let e=n.getItem(`access_token`),t=y.value||parseInt(n.getItem(`user_id`)||`0`);if(!(!e||!a.value)){d.value=!0;try{let n=[];if(t){let r=await fetch(`/api/bookings/professional/${t}/assignments`,{headers:{Authorization:`Bearer ${e}`,accept:`application/json`}});r.ok&&(n=await r.json(),console.log(` My Assignments:`,n))}let r=await fetch(`/api/bookings`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});if(r.ok){let e=await r.json();console.log(` All Bookings fetched:`,e),u.value=e.filter(e=>{if(!(e.status===`pending`||e.status===`en attente`)||!(e.service&&e.service.name===a.value))return!1;let t=n.find(t=>t.medicalRequestId===e.id);return!t||t.status===`pending`||t.status===`en attente`});let t=[];n.forEach(n=>{let r=n.status?.toLowerCase();if(r===`pending`||r===`en attente`)return;let i=e.find(e=>e.id===n.medicalRequestId);i&&t.push({...i,assignmentStatus:n.status})}),_.value=t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),console.log(` Filtered ${u.value.length} pending and ${_.value.length} history items.`),u.value.forEach(e=>Se(e.id)),_.value.forEach(e=>Se(e.id))}}catch(e){console.error(`Failed to fetch initial data:`,e)}finally{d.value=!1}}},we=()=>{if(!a.value){console.error(` Cannot init WebSocket: userSpeciality is empty`);return}console.log(` Initializing WebSocket for:`,a.value),c.value=dd({reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4}),c.value.on(`connect`,()=>{console.log(` WebSocket Connected`),l.value=!0,c.value?.emit(`joinSpeciality`,a.value)}),c.value.on(`connect_error`,e=>{console.error(` WebSocket Connection Error:`,e),l.value=!1}),c.value.on(`disconnect`,()=>{console.log(` WebSocket Disconnected`),l.value=!1}),c.value.on(`newBookingRequest`,async e=>{console.log(` RECEIVED newBookingRequest:`,e),e.id||=Date.now(),me(),s.value.unshift(e);let t=await xe(e.reference_id);if(t){let n=s.value.find(t=>t.reference_id===e.reference_id);n&&(n.bookingDetails=t),ye(` ${t.date?Fe(t.date):Fe(t.createdAt)} - ${t.patientFirstname} ${t.patientLastname}`,` Soin: ${N(t.service?.name)}\n ${t.address}\n Urgence: ${t.urgency}`),u.value.find(e=>e.id===t.id)||u.value.unshift(t),await Se(t.id)}else ye(`Nouvelle demande de soin`,e.message)}),c.value.on(`joined`,e=>{console.log(` Joined room: ${e}`)})},Te=async()=>{let e=n.getItem(`access_token`);if(e){d.value=!0;try{let t=await fetch(`/api/patients`,{headers:{Authorization:`Bearer ${e}`,accept:`application/json`}});t.ok&&(b.value=await t.json(),console.log(` Patients loaded:`,b.value))}catch(e){console.error(`Error fetching patients:`,e)}finally{d.value=!1}}};hr(async()=>{d.value=!0,await Promise.all([be(),oe()]),await Ce(),d.value=!1,ge()}),yr(()=>{c.value&&c.value.disconnect()});let Ee=()=>{X.clear(),pe(`navigate`,`landing`)},N=e=>({"Post-partum help":`Soin post-partum`,"Wound Dressing":`Pansement`,"Medication Admin":`Admin. mdicaments`,nursing:`Soins infirmiers`,"post-partum":`Soin post-partum`,wound:`Pansement`,medication:`Admin. mdicaments`,kine:`Kinsithrapie`})[e]||e,De=async e=>{let t=n.getItem(`access_token`);if(t)try{let n=await fetch(`/api/bookings/${e}/accept`,{method:`POST`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`}});if(n.ok)u.value=u.value.filter(t=>t.id!==e),s.value=s.value.filter(t=>t.reference_id!==e),await Ce(),alert(`Demande accepte avec succs !`);else{let e=await n.json();alert(`Erreur: ${e.message||`Impossible d'accepter la demande`}`)}}catch(e){console.error(`Error accepting request:`,e)}},Oe=async e=>{let t=n.getItem(`access_token`);if(t)try{let n=await fetch(`/api/bookings/${e}/deny`,{method:`POST`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`}});if(n.ok)u.value=u.value.filter(t=>t.id!==e),s.value=s.value.filter(t=>t.reference_id!==e),await Ce(),alert(`Demande refuse.`);else{let e=await n.json();alert(`Erreur: ${e.message||`Impossible de refuser la demande`}`)}}catch(e){console.error(`Error declining request:`,e)}},ke=async e=>{let t=n.getItem(`access_token`);if(t&&confirm(`Voulez-vous marquer cette demande comme termine ?`))try{let n=await fetch(`/api/bookings/${e}/complete`,{method:`POST`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`}});if(n.ok)await Ce(),alert(`Demande marque comme termine !`);else{let e=await n.json();alert(`Erreur: ${e.message||`Impossible de terminer la demande`}`)}}catch(e){console.error(`Error completing request:`,e)}},Ae=async e=>{m.value={...e},p.value=!0,h.value=!0;try{let t=await xe(e.id);t&&(m.value=t)}catch(e){console.error(`Failed to fetch full booking details:`,e)}finally{h.value=!1}},je=e=>{ne.value=e,O.value=!0},Me=()=>{O.value=!1,ne.value=``},Ne=(e,t)=>{let n=document.createElement(`a`);n.href=e,n.download=t||e.split(`/`).pop()||`document`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},Pe=e=>{s.value=s.value.filter(t=>t.id!==e)},Fe=e=>{if(!e)return``;let t=new Date(e);return t.toLocaleDateString()+` `+t.toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`})};return(e,t)=>(B(),V(`div`,jf,[U(`header`,Mf,[t[24]||=U(`div`,{class:`logo-compact`},[U(`img`,{src:`/daricarefront/assets/LOGO%20H-CEVX8XPM.png`,alt:`daricare logo`,class:`mobile-logo-img`})],-1),U(`div`,Nf,[U(`div`,Pf,[U(`div`,{class:j([`status-indicator`,l.value?`online`:`offline`])},null,2)]),U(`button`,{class:j([`pro-hamburger`,{"is-active":f.value}]),onClick:fe},[...t[23]||=[U(`span`,{class:`pro-bar`},null,-1),U(`span`,{class:`pro-bar`},null,-1),U(`span`,{class:`pro-bar`},null,-1)]],2)])]),f.value?(B(),V(`div`,{key:0,class:`pro-menu-overlay`,onClick:fe})):K(``,!0),U(`div`,Ff,[(B(!0),V(z,null,R(s.value,e=>(B(),V(`div`,{key:e.id,class:`notif-toast`},[U(`div`,If,[t[27]||=U(`div`,{class:`notif-icon pulsate`},``,-1),U(`div`,Lf,[U(`div`,Rf,[e.bookingDetails?(B(),V(`h4`,Bf,M(Fe(e.bookingDetails.date||e.bookingDetails.createdAt))+` - `+M(e.bookingDetails.patientFirstname)+` `+M(e.bookingDetails.patientLastname),1)):(B(),V(`h4`,zf,`Nouvelle Demande`)),e.bookingDetails?(B(),V(`span`,{key:2,class:j([`urgency-dot`,e.bookingDetails.urgency])},null,2)):K(``,!0)]),e.bookingDetails?(B(),V(`p`,Vf,[U(`strong`,null,M(e.bookingDetails.patientFirstname)+` `+M(e.bookingDetails.patientLastname),1),t[25]||=U(`br`,null,null,-1),W(` `+M(e.bookingDetails.address)+` `,1),t[26]||=U(`br`,null,null,-1),e.bookingDetails.service?(B(),V(`span`,Hf,M(N(e.bookingDetails.service.name)),1)):K(``,!0)])):(B(),V(`p`,Uf,M(e.message)+`...`,1))]),U(`button`,{class:`notif-close`,onClick:t=>Pe(e.id)},``,8,Wf)]),U(`div`,Gf,[U(`button`,{class:`btn-mini btn-decline`,onClick:t=>Oe(e.reference_id)},`Refuser`,8,Kf),U(`button`,{class:`btn-mini btn-accept`,onClick:t=>De(e.reference_id)},`Accepter`,8,qf)])]))),128))]),Xi(yd,{isOpen:f.value,isConnected:l.value,userName:r.value,userEmail:i.value,userSpeciality:a.value,activeRequestsCount:u.value.length,activeView:g.value,onLogout:Ee,onNavigate:t[0]||=e=>{g.value=e,f.value=!1,e===`patients`&&Te()},onViewProfile:t[1]||=e=>te.value=!0,onToggle:fe},null,8,[`isOpen`,`isConnected`,`userName`,`userEmail`,`userSpeciality`,`activeRequestsCount`,`activeView`]),U(`main`,Jf,[U(`header`,Yf,[U(`div`,Xf,[g.value===`requests`?(B(),V(`h1`,Zf,`Demandes en attente`)):g.value===`all_history`?(B(),V(`h1`,Qf,`Toutes les demandes`)):g.value===`accepted`?(B(),V(`h1`,$f,`Demandes Acceptes`)):g.value===`completed`?(B(),V(`h1`,ep,`Demandes Compltes`)):g.value===`calendar`?(B(),V(`h1`,tp,`Agenda Professionnel`)):(B(),V(`h1`,np,M(g.value.charAt(0).toUpperCase()+g.value.slice(1)),1)),U(`p`,null,[t[28]||=W(` Notifications en temps rel des patients dans votre zone. `,-1),g.value===`requests`?(B(),V(`span`,rp,`Nouveaux soins disponibles pour votre spcialit.`)):K(``,!0),g.value===`all_history`?(B(),V(`span`,ip,`Visualisez l'tat de toutes les sollicitations (Accepts, Refuss, Attente).`)):K(``,!0),g.value===`accepted`?(B(),V(`span`,ap,`Retrouvez ici vos demandes acceptes en attente d'intervention.`)):K(``,!0),g.value===`completed`?(B(),V(`span`,op,`Visualisez ici toutes les demandes que vous avez termines.`)):K(``,!0),g.value===`calendar`?(B(),V(`span`,sp,`Grez vos rendez-vous et visualisez votre planning mensuel.`)):K(``,!0),l.value?K(``,!0):(B(),V(`span`,cp,` Dconnect`))])]),U(`div`,lp,[U(`button`,{class:`btn-test-notif`,onClick:he,title:`Tester les notifications`},` Test `),U(`button`,{class:`btn-refresh`,onClick:Ce,disabled:d.value},M(d.value?`Chargement...`:`Actualiser le flux`),9,up)])]),U(`section`,dp,[U(`div`,fp,[g.value===`all_history`?K(``,!0):(B(),V(`div`,pp,[t[29]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`circle`,{cx:`11`,cy:`11`,r:`8`}),U(`line`,{x1:`21`,y1:`21`,x2:`16.65`,y2:`16.65`})],-1),g.value===`requests`?I((B(),V(`input`,{key:0,type:`text`,"onUpdate:modelValue":t[2]||=e=>x.value=e,list:`care-suggestions`,placeholder:`Rechercher dans En attente...`,onInput:t[3]||=e=>E.value=1},null,544)),[[J,x.value]]):I((B(),V(`input`,{key:1,type:`text`,"onUpdate:modelValue":t[4]||=e=>ee.value=e,list:`care-suggestions`,placeholder:g.value===`completed`?`Rechercher dans Compltes...`:`Rechercher dans Accepts...`},null,8,mp)),[[J,ee.value]]),U(`datalist`,hp,[(B(!0),V(z,null,R(se.value,e=>(B(),V(`option`,{key:e.id,value:e.name},null,8,gp))),128))])])),g.value===`all_history`?K(``,!0):(B(),V(`div`,_p,[t[30]||=U(`label`,null,`Filtrer par date:`,-1),g.value===`requests`?I((B(),V(`input`,{key:0,type:`date`,"onUpdate:modelValue":t[5]||=e=>S.value=e,class:`date-picker-filter`,onChange:t[6]||=e=>E.value=1},null,544)),[[J,S.value]]):I((B(),V(`input`,{key:1,type:`date`,"onUpdate:modelValue":t[7]||=e=>T.value=e,class:`date-picker-filter`},null,512)),[[J,T.value]])])),g.value===`all_history`?(B(),V(`div`,vp,[U(`button`,{class:j([`status-tab`,{active:k.value===`all`}]),onClick:t[8]||=e=>k.value=`all`},`Tout`,2),U(`button`,{class:j([`status-tab pending`,{active:k.value===`pending`}]),onClick:t[9]||=e=>k.value=`pending`},`En attente`,2),U(`button`,{class:j([`status-tab accepted`,{active:k.value===`accepted`}]),onClick:t[10]||=e=>k.value=`accepted`},`Accepts`,2),U(`button`,{class:j([`status-tab denied`,{active:k.value===`denied`}]),onClick:t[11]||=e=>k.value=`denied`},`Refuss`,2)])):K(``,!0)])]),g.value===`requests`?(B(),V(z,{key:0},[U(`div`,yp,[d.value?(B(),V(`div`,bp,[...t[31]||=[U(`div`,{class:`spinner`},null,-1),U(`p`,null,`Rcupration des soins disponibles...`,-1)]])):ie.value.length===0?(B(),V(`div`,xp,[...t[32]||=[U(`div`,{class:`empty-icon`},null,-1),U(`h3`,null,`Aucun rsultat`,-1),U(`p`,null,`Aucune demande ne correspond  vos filtres.`,-1)]])):K(``,!0),(B(!0),V(z,null,R(ue.value,e=>(B(),V(`div`,{key:e.id,class:j([`request-card`,`urgency-${e.urgency||`low`}`])},[U(`div`,Sp,[U(`div`,Cp,[U(`div`,wp,[U(`div`,Tp,M(e.patientFirstname?.charAt(0)||`P`),1),U(`div`,null,[U(`h3`,null,M(e.patientFirstname)+` `+M(e.patientLastname),1)])]),U(`div`,Ep,[e.totalPrice?(B(),V(`div`,Dp,M(e.totalPrice)+` DT `,1)):K(``,!0),U(`div`,Op,M(e.urgency===`high`?`Urgent`:e.urgency===`medium`?`Moyen`:`Faible`),1)])]),U(`span`,kp,M(Fe(e.createdAt))+`   `+M(e.address),1),v.value[e.id]===void 0?K(``,!0):(B(),V(`div`,Ap,[t[33]||=U(`span`,{class:`dist-icon`},``,-1),U(`span`,jp,M(v.value[e.id])+` km`,1),t[34]||=U(`span`,{class:`dist-label`},`de vous`,-1)]))]),U(`div`,Mp,[U(`div`,Np,M(N(e.service?.name)),1),U(`p`,Pp,`Demande de soin pour le service `+M(e.service?.name)+`.`,1),e.requestSoins?.length?(B(),V(`div`,Fp,[(B(!0),V(z,null,R(e.requestSoins,e=>(B(),V(`span`,{key:e.id,class:`soin-tag`},M(e.soin?.name),1))),128))])):K(``,!0)]),U(`div`,Ip,[U(`button`,{class:`btn btn-details`,onClick:t=>Ae(e)},`Dtails`,8,Lp),U(`button`,{class:`btn btn-decline`,onClick:t=>Oe(e.id)},`Refuser`,8,Rp),U(`button`,{class:`btn btn-accept`,onClick:t=>De(e.id)},`Accepter la demande`,8,zp)])],2))),128))]),le.value>1?(B(),V(`div`,Bp,[U(`button`,{disabled:E.value===1,onClick:t[12]||=e=>de(E.value-1),class:`btn-pagination`},` Prcdent `,8,Vp),U(`div`,Hp,[(B(!0),V(z,null,R(le.value,e=>(B(),V(`span`,{key:e,class:j({active:E.value===e}),onClick:t=>de(e)},M(e),11,Up))),128))]),U(`button`,{disabled:E.value===le.value,onClick:t[13]||=e=>de(E.value+1),class:`btn-pagination`},` Suivant `,8,Wp)])):K(``,!0)],64)):g.value===`all_history`?(B(),V(`div`,Gp,[re.value.length===0?(B(),V(`div`,Kp,[...t[35]||=[U(`div`,{class:`empty-icon`},``,-1),U(`h3`,null,`Aucune demande trouve`,-1),U(`p`,null,`Essayez de modifier vos filtres ou le statut slectionn.`,-1)]])):K(``,!0),(B(!0),V(z,null,R(re.value,e=>(B(),V(`div`,{key:e.id,class:j([`request-card`,e.displayStatus])},[U(`div`,qp,[U(`div`,Jp,[U(`div`,Yp,[U(`div`,Xp,M(e.patientFirstname?.charAt(0)||`P`),1),U(`div`,null,[U(`h3`,null,M(e.patientFirstname)+` `+M(e.patientLastname),1)])]),U(`div`,Zp,[e.totalPrice?(B(),V(`div`,Qp,M(e.totalPrice)+` DT `,1)):K(``,!0),U(`div`,{class:j([`status-pill`,e.displayStatus])},M(e.displayStatus===`pending`?`En attente`:e.displayStatus===`accepted`||e.displayStatus===`done`?`Accept`:e.displayStatus===`validated`?`Valid`:`Refus`),3)])]),U(`span`,$p,M(Fe(e.createdAt))+`   `+M(e.address),1),v.value[e.id]===void 0?K(``,!0):(B(),V(`div`,em,[t[36]||=U(`span`,{class:`dist-icon`},``,-1),U(`span`,tm,M(v.value[e.id])+` km`,1),t[37]||=U(`span`,{class:`dist-label`},`de vous`,-1)]))]),U(`div`,nm,[U(`div`,rm,M(N(e.service?.name)),1),U(`p`,im,`Demande de soin pour le service `+M(e.service?.name)+`.`,1),e.requestSoins?.length?(B(),V(`div`,am,[(B(!0),V(z,null,R(e.requestSoins,e=>(B(),V(`span`,{key:e.id,class:`soin-tag`},M(e.soin?.name),1))),128))])):K(``,!0)]),U(`div`,om,[U(`button`,{class:`btn btn-details`,onClick:t=>Ae(e)},`Dtails`,8,sm),e.displayStatus===`pending`?(B(),V(z,{key:0},[U(`button`,{class:`btn btn-decline`,onClick:t=>Oe(e.id)},`Refuser`,8,cm),U(`button`,{class:`btn btn-accept`,onClick:t=>De(e.id)},`Accepter`,8,lm)],64)):K(``,!0),e.displayStatus===`accepted`&&e.phone?(B(),V(`a`,{key:1,href:`tel:`+e.phone,class:`btn btn-contact`},`Appeler`,8,um)):K(``,!0)])],2))),128))])):g.value===`accepted`?(B(),V(`div`,dm,[d.value?(B(),V(`div`,fm,[...t[38]||=[U(`div`,{class:`spinner`},null,-1),U(`p`,null,`Chargement de vos engagements...`,-1)]])):A.value.length===0?(B(),V(`div`,pm,[...t[39]||=[U(`div`,{class:`empty-icon`},``,-1),U(`h3`,null,`Aucun historique trouv`,-1),U(`p`,null,`Vous n'avez pas encore d'historique de demandes traites.`,-1)]])):K(``,!0),(B(!0),V(z,null,R(A.value,e=>(B(),V(`div`,{key:e.id,class:j([`request-card`,`status-${e.status}`])},[U(`div`,mm,[U(`div`,hm,[U(`div`,gm,[U(`div`,_m,M(e.patientFirstname?.charAt(0)||`P`),1),U(`div`,null,[U(`h3`,null,M(e.patientFirstname)+` `+M(e.patientLastname),1)])]),U(`div`,vm,[e.totalPrice?(B(),V(`div`,ym,M(e.totalPrice)+` DT `,1)):K(``,!0),U(`div`,{class:j([`status-pill`,e.status])},M(e.status===`accepted`?`Accept`:e.status===`validated`?`Valid`:`Refus`),3)])]),U(`span`,bm,M(Fe(e.createdAt))+`   `+M(e.address),1),v.value[e.id]===void 0?K(``,!0):(B(),V(`div`,xm,[t[40]||=U(`span`,{class:`dist-icon`},``,-1),U(`span`,Sm,M(v.value[e.id])+` km`,1),t[41]||=U(`span`,{class:`dist-label`},`de vous`,-1)]))]),U(`div`,Cm,[U(`div`,wm,M(N(e.service?.name)),1),U(`p`,Tm,`Soin programm pour `+M(e.patientFirstname)+`.`,1),e.requestSoins?.length?(B(),V(`div`,Em,[(B(!0),V(z,null,R(e.requestSoins,e=>(B(),V(`span`,{key:e.id,class:`soin-tag`},M(e.soin?.name),1))),128))])):K(``,!0)]),U(`div`,Dm,[U(`button`,{class:`btn btn-details`,onClick:t=>Ae(e)},`Dossier`,8,Om),U(`div`,km,[e.phone?(B(),V(`a`,{key:0,href:`tel:`+e.phone,class:`btn btn-util`,title:`Appeler`},[...t[42]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l2.27-2.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z`})],-1)]],8,Am)):K(``,!0),e.latitude&&e.longitude?(B(),V(`a`,{key:1,href:`https://www.google.com/maps?q=${e.latitude},${e.longitude}`,target:`_blank`,class:`btn btn-util`,title:`Voir sur la carte`},[...t[43]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z`}),U(`circle`,{cx:`12`,cy:`10`,r:`3`})],-1)]],8,jm)):K(``,!0)]),e.assignmentStatus===`accepted`?(B(),V(`button`,{key:0,class:`btn btn-accept`,onClick:t=>ke(e.id)},`Terminer`,8,Mm)):K(``,!0)])],2))),128))])):g.value===`completed`?(B(),V(`div`,Nm,[d.value?(B(),V(`div`,Pm,[...t[44]||=[U(`div`,{class:`spinner`},null,-1),U(`p`,null,`Chargement des demandes compltes...`,-1)]])):ae.value.length===0?(B(),V(`div`,Fm,[...t[45]||=[U(`div`,{class:`empty-icon`},``,-1),U(`h3`,null,`Aucune demande complte`,-1),U(`p`,null,`Vous n'avez pas encore de demandes marques comme termines.`,-1)]])):K(``,!0),(B(!0),V(z,null,R(ae.value,e=>(B(),V(`div`,{key:e.id,class:`request-card status-done`},[U(`div`,Im,[U(`div`,Lm,[U(`div`,Rm,[U(`div`,zm,M(e.patientFirstname?.charAt(0)||`P`),1),U(`div`,null,[U(`h3`,null,M(e.patientFirstname)+` `+M(e.patientLastname),1)])]),U(`div`,Bm,[e.totalPrice?(B(),V(`div`,Vm,M(e.totalPrice)+` DT `,1)):K(``,!0),t[46]||=U(`div`,{class:`status-pill done`},`Termine`,-1)])]),U(`span`,Hm,M(Fe(e.createdAt))+`   `+M(e.address),1),v.value[e.id]===void 0?K(``,!0):(B(),V(`div`,Um,[t[47]||=U(`span`,{class:`dist-icon`},``,-1),U(`span`,Wm,M(v.value[e.id])+` km`,1),t[48]||=U(`span`,{class:`dist-label`},`de vous`,-1)]))]),U(`div`,Gm,[U(`div`,Km,M(N(e.service?.name)),1),t[49]||=U(`p`,{class:`request-description`},`Soin termin avec succs.`,-1),e.requestSoins?.length?(B(),V(`div`,qm,[(B(!0),V(z,null,R(e.requestSoins,e=>(B(),V(`span`,{key:e.id,class:`soin-tag`},M(e.soin?.name),1))),128))])):K(``,!0)]),U(`div`,Jm,[U(`button`,{class:`btn btn-details`,onClick:t=>Ae(e)},`Dtails`,8,Ym)])]))),128))])):g.value===`calendar`?(B(),H(Ud,{key:4,activeRequests:u.value,acceptedRequestsList:_.value,onShowDetails:Ae},null,8,[`activeRequests`,`acceptedRequestsList`])):g.value===`patients`?(B(),V(`div`,Xm,[d.value?(B(),V(`div`,Zm,[...t[50]||=[U(`div`,{class:`spinner`},null,-1),U(`p`,null,`Chargement des patients...`,-1)]])):b.value.length===0?(B(),V(`div`,Qm,[...t[51]||=[U(`div`,{class:`empty-icon`},``,-1),U(`h3`,null,`Aucun patient`,-1),U(`p`,null,`Vous n'avez pas encore de patients enregistrs.`,-1)]])):K(``,!0),(B(!0),V(z,null,R(b.value,e=>(B(),V(`div`,{key:e.id,class:`request-card patient-card`},[U(`div`,$m,[U(`div`,eh,[U(`div`,th,M(e.firstname?.charAt(0)||`P`),1),U(`div`,null,[U(`h3`,nh,M(e.civility)+` `+M(e.firstname)+` `+M(e.lastname),1),U(`span`,rh,`Membre depuis `+M(Fe(e.createdAt)),1)])])]),U(`div`,ih,[U(`div`,ah,[t[53]||=U(`div`,{class:`detail-icon-wrapper`},[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l2.27-2.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z`})])],-1),U(`div`,oh,[t[52]||=U(`label`,null,`Tlphone`,-1),U(`span`,null,M(e.phone),1)])]),e.email?(B(),V(`div`,sh,[t[55]||=U(`div`,{class:`detail-icon-wrapper`},[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7`}),U(`rect`,{width:`20`,height:`16`,x:`2`,y:`4`,rx:`2`})])],-1),U(`div`,ch,[t[54]||=U(`label`,null,`Email`,-1),U(`span`,null,M(e.email),1)])])):K(``,!0),U(`div`,lh,[t[57]||=G(`<div class="detail-icon-wrapper" data-v-ae5f27a5><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ae5f27a5><rect width="18" height="18" x="3" y="4" rx="2" ry="2" data-v-ae5f27a5></rect><line x1="16" x2="16" y1="2" y2="6" data-v-ae5f27a5></line><line x1="8" x2="8" y1="2" y2="6" data-v-ae5f27a5></line><line x1="3" x2="21" y1="10" y2="10" data-v-ae5f27a5></line></svg></div>`,1),U(`div`,uh,[t[56]||=U(`label`,null,`Date de naissance`,-1),U(`span`,null,M(Fe(e.birthdate)),1)])])]),U(`div`,dh,[e.phone?(B(),V(`a`,{key:0,href:`tel:`+e.phone,class:`btn btn-accept`},` Contacter le patient `,8,fh)):K(``,!0)])]))),128))])):g.value===`analytics`?(B(),H(Af,{key:6})):(B(),V(`div`,ph,[t[60]||=U(`div`,{class:`empty-icon`},``,-1),t[61]||=U(`h3`,null,`En construction`,-1),U(`p`,null,[t[58]||=W(`La section `,-1),U(`strong`,null,M(g.value),1),t[59]||=W(` sera bientt disponible.`,-1)]),U(`button`,{class:`btn btn-refresh`,onClick:t[14]||=e=>g.value=`requests`},`Retour aux demandes`)])),(B(),H(Zn,{to:`body`},[p.value?(B(),V(`div`,{key:0,class:`modal-overlay`,onClick:t[18]||=Y(e=>p.value=!1,[`self`])},[U(`div`,mh,[U(`header`,hh,[t[62]||=U(`h2`,null,`Dtails de la demande`,-1),U(`button`,{class:`close-modal`,onClick:t[15]||=e=>p.value=!1},``)]),h.value?(B(),V(`div`,gh,[...t[63]||=[U(`div`,{class:`spinner`},null,-1),U(`p`,null,`Chargement des dtails...`,-1)]])):m.value?(B(),V(`div`,_h,[U(`section`,vh,[U(`div`,yh,[U(`div`,bh,M(m.value.patientFirstname?.charAt(0)),1),U(`div`,xh,[U(`h3`,null,M(m.value.patientCivility)+` `+M(m.value.patientFirstname)+` `+M(m.value.patientLastname),1),U(`p`,Sh,`N(e) le: `+M(Fe(m.value.patientBirthdate)||`Non renseign`),1)]),U(`div`,Ch,[U(`div`,{class:j([`status-pill-mini`,m.value.status])},M(m.value.status===`pending`?`En attente`:m.value.status),3),U(`div`,{class:j([`urgency-badge`,m.value.urgency])},M(m.value.urgency===`high`?`Urgent`:m.value.urgency===`medium`?`Moyen`:`Faible`),3)])])]),U(`section`,wh,[t[69]||=U(`div`,{class:`section-title`},` Planification & Disponibilit`,-1),U(`div`,Th,[U(`div`,Eh,[t[64]||=U(`label`,null,`Date de dbut`,-1),U(`span`,Dh,M(Fe(m.value.startDate)),1)]),U(`div`,Oh,[t[65]||=U(`label`,null,`Dure de l'intervention`,-1),U(`span`,null,M(m.value.durationValue)+` jour(s) (`+M(m.value.durationMode===`fixed`?`Fixe`:`Rcurrent`)+`)`,1)]),U(`div`,kh,[t[66]||=U(`label`,null,`Fentre de disponibilit`,-1),U(`span`,Ah,M(m.value.availabilityStart?.substring(0,5))+`  `+M(m.value.availabilityEnd?.substring(0,5)),1)]),U(`div`,jh,[t[67]||=U(`label`,null,`Prfrence "Indiffrent"`,-1),U(`span`,{class:j(m.value.isIndifferent?`text-success`:`text-muted`)},M(m.value.isIndifferent?` Oui (Peut intervenir  tout moment)`:` Non (Respecter les horaires)`),3)]),U(`div`,Mh,[t[68]||=U(`label`,null,`Montant Total`,-1),U(`span`,Nh,M(m.value.totalPrice||0)+` DT`,1)])])]),D.value?.description?(B(),V(`div`,Ph,[U(`label`,null,` propos du service `+M(D.value.name),1),U(`p`,null,M(D.value.description),1)])):K(``,!0),U(`div`,Fh,[U(`div`,Ih,[t[70]||=U(`label`,null,`Service`,-1),U(`span`,null,M(N(m.value.service?.name)),1)]),U(`div`,Lh,[t[71]||=U(`label`,null,`Date de la demande`,-1),U(`span`,null,M(Fe(m.value.createdAt)),1)]),U(`div`,Rh,[t[73]||=U(`label`,null,` Adresse de l'intervention`,-1),U(`div`,zh,[U(`span`,null,M(m.value.address),1),m.value.latitude&&m.value.longitude?(B(),V(`a`,{key:0,href:`https://www.google.com/maps?q=${m.value.latitude},${m.value.longitude}`,target:`_blank`,class:`map-link-inline`},` Voir sur Google Maps  `,8,Bh)):K(``,!0)]),v.value[m.value.id]?(B(),V(`p`,Vh,[U(`small`,null,[t[72]||=W(` Distance: `,-1),U(`strong`,null,M(v.value[m.value.id])+` km`,1)])])):K(``,!0),m.value.addressComplement?(B(),V(`p`,Hh,[U(`small`,null,`Complment: `+M(m.value.addressComplement),1)])):K(``,!0)]),m.value.patientPhone?(B(),V(`div`,Uh,[t[74]||=U(`label`,null,` Tlphone`,-1),U(`span`,null,M(m.value.patientPhone),1)])):K(``,!0),m.value.patientEmail?(B(),V(`div`,Wh,[t[75]||=U(`label`,null,` Email`,-1),U(`span`,null,M(m.value.patientEmail),1)])):K(``,!0),U(`div`,Gh,[t[76]||=U(`label`,null,` Statut Ordonnance`,-1),U(`span`,{class:j([`prescription-status`,m.value.prescriptionStatus])},M(m.value.prescriptionStatus===`available`?`Disponible`:m.value.prescriptionStatus),3)])]),m.value.requestSoins?.length?(B(),V(`section`,Kh,[t[78]||=U(`div`,{class:`section-title`},` Soins spcifiques demands`,-1),U(`div`,qh,[(B(!0),V(z,null,R(m.value.requestSoins,e=>(B(),V(`div`,{key:e.id,class:`soin-detail-card`},[U(`div`,Jh,[U(`div`,Yh,[U(`strong`,null,M(e.soin?.name),1),U(`span`,Xh,[W(M(e.visitType===`once`?`Une seule fois`:`Rcurrent`)+` `,1),e.visitType===`recurring`?(B(),V(z,{key:0},[W(`  `+M(e.frequencyCount)+` fois / `+M(e.frequencyPeriod),1)],64)):K(``,!0)])]),ce(e.soin?.name)?(B(),V(`p`,Zh,M(ce(e.soin?.name)),1)):K(``,!0)]),e.questionAnswers&&e.questionAnswers.length?(B(),V(`div`,Qh,[t[77]||=U(`label`,{class:`config-label`},`Rponses au questionnaire :`,-1),U(`div`,$h,[(B(!0),V(z,null,R(e.questionAnswers,(e,t)=>(B(),V(`div`,{key:t,class:`answer-item`},[U(`span`,eg,M(e.question)+` :`,1),U(`span`,tg,M(Array.isArray(e.answer)?e.answer.join(`, `):e.answer),1)]))),128))])])):K(``,!0)]))),128))])])):K(``,!0),m.value.documents?.length?(B(),V(`section`,ng,[t[80]||=U(`div`,{class:`section-title`},` Documents cliniques`,-1),U(`div`,rg,[(B(!0),V(z,null,R(m.value.documents,e=>(B(),V(`div`,{key:e.id,class:`doc-link-card`},[U(`div`,{class:`doc-main-click`,onClick:t=>je(`/${e.filePath}`)},[t[79]||=U(`div`,{class:`doc-icon`},``,-1),U(`div`,ag,[U(`span`,og,M(e.fileOriginalName||`Document`),1),U(`span`,sg,M(e.mimeType),1)])],8,ig),U(`div`,cg,[U(`button`,{class:`btn-icon-mini`,onClick:t=>je(`/${e.filePath}`),title:`Voir`},``,8,lg),U(`button`,{class:`btn-icon-mini`,onClick:t=>Ne(`/${e.filePath}`,e.fileOriginalName),title:`Tlcharger`},``,8,ug)])]))),128))])])):K(``,!0)])):K(``,!0),m.value.status===`pending`?(B(),V(`footer`,dg,[U(`button`,{class:`btn btn-decline`,onClick:t[16]||=e=>{Oe(m.value.id),p.value=!1}},`Refuser`),U(`button`,{class:`btn btn-accept`,onClick:t[17]||=e=>{De(m.value.id),p.value=!1}},`Accepter la demande`)])):K(``,!0)])])):K(``,!0)])),(B(),H(Zn,{to:`body`},[te.value?(B(),V(`div`,{key:0,class:`modal-overlay`,onClick:t[21]||=Y(e=>te.value=!1,[`self`])},[U(`div`,fg,[U(`header`,pg,[t[81]||=U(`h2`,null,`Mon Profil Professionnel`,-1),U(`button`,{class:`close-modal`,onClick:t[19]||=e=>te.value=!1},``)]),U(`div`,mg,[U(`section`,hg,[U(`div`,gg,M(r.value.charAt(0)),1),U(`div`,_g,[U(`h3`,null,M(r.value),1),U(`p`,vg,M(a.value),1),U(`span`,{class:j([`status-pill`,o.value?.status?.toLowerCase()])},M(o.value?.status||`VRIFICATION EN COURS`),3)])]),U(`div`,yg,[U(`div`,bg,[t[82]||=U(`label`,null,`Email`,-1),U(`span`,null,M(i.value),1)]),U(`div`,xg,[t[83]||=U(`label`,null,`Tlphone Professionnel`,-1),U(`span`,null,M(o.value?.professionalPhone||`Non renseign`),1)]),U(`div`,Sg,[t[84]||=U(`label`,null,`Adresse Professionnelle`,-1),U(`span`,null,M(o.value?.professionalAddress||`Non renseign`),1)])]),U(`section`,Cg,[t[86]||=U(`h4`,null,`Documents de vrification`,-1),U(`div`,wg,[(B(!0),V(z,null,R(o.value?.documents,e=>(B(),V(`div`,{key:e.id,class:`document-card clickable`},[U(`div`,{class:`doc-main-click`,onClick:t=>je(`/${e.filePath}`)},[t[85]||=U(`div`,{class:`doc-icon`},``,-1),U(`div`,Eg,[U(`span`,Dg,M(e.type),1),U(`span`,Og,M(e.description),1)])],8,Tg),U(`div`,kg,[U(`div`,{class:j([`doc-status`,{verified:e.verified}])},M(e.verified?`Vrifi`:`En attente`),3),U(`button`,{class:`btn-icon-mini`,onClick:t=>Ne(`/${e.filePath}`),title:`Tlcharger`},``,8,Ag)])]))),128)),o.value?.documents?.length?K(``,!0):(B(),V(`div`,jg,` Aucun document tlcharg. `))])])]),U(`footer`,Mg,[U(`button`,{class:`btn btn-details`,onClick:t[20]||=e=>te.value=!1},`Fermer`)])])])):K(``,!0)])),(B(),H(Zn,{to:`body`},[O.value?(B(),V(`div`,{key:0,class:`preview-overlay`,onClick:Y(Me,[`self`])},[U(`div`,Ng,[U(`div`,Pg,[U(`button`,{class:`btn-preview-action`,onClick:t[22]||=e=>Ne(ne.value),title:`Tlcharger`},[...t[87]||=[U(`span`,{class:`icon`},``,-1),W(` Tlcharger `,-1)]]),U(`button`,{class:`close-preview`,onClick:Me},``)]),U(`img`,{src:ne.value,alt:`Clinical Document`,class:`preview-image`},null,8,Fg)])])):K(``,!0)]))])]))}}),[[`__scopeId`,`data-v-ae5f27a5`]]),Rg={class:`verification-container`},zg={key:0,class:`alert alert-error`},Bg={key:1,class:`alert alert-success`},Vg={class:`grid-card full-width`},Hg={class:`card-header`},Ug={class:`header-main`},Wg={class:`subtitle`},Gg={class:`header-actions`},Kg={class:`filter-group`},qg=[`disabled`],Jg={class:`table-wrapper admin-card`},Yg={key:0,class:`admin-table`},Xg={class:`user-info`},Zg={class:`user-avatar-small`},Qg={class:`user-details`},$g={class:`user-name`},e_={class:`user-email`},t_={class:`spec-badge`},n_={class:`doc-stacks`},r_={key:0,class:`doc-count`},i_={key:1,class:`no-docs`},a_={key:0,class:`table-update-badge`},o_={key:1,class:`table-progress-badge`},s_={key:2,class:`no-alert-info`},c_={class:`text-right`},l_={class:`table-actions`},u_=[`onClick`],d_={key:1,class:`empty-state`},f_={key:0},p_={key:1},m_={key:2},h_={class:`mobile-cards`},g_=[`onClick`],__={class:`mobile-card-header`},v_={class:`mobile-user-info`},y_={class:`user-avatar-small`},b_={class:`user-name`},x_={class:`user-email`},S_={class:`mobile-card-body`},C_={class:`info-row`},w_={class:`value`},T_={class:`info-row`},E_={class:`value`},D_={class:`info-row`},O_={class:`value doc-count-mobile`},k_={class:`mobile-card-footer`},A_={key:0,class:`table-update-badge`},j_={key:1,class:`table-progress-badge`},M_={class:`modal-card`},N_={class:`modal-header`},P_={class:`modal-title-area`},F_={class:`modal-content`},I_={class:`pro-info-grid`},L_={class:`info-group`},R_={class:`info-group`},z_={class:`info-group full-width`},B_={class:`documents-section`},V_={key:0,class:`docs-grid`},H_={class:`doc-preview`},U_=[`src`],W_={key:1,class:`doc-icon`},G_={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`32`,height:`32`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},K_={key:1,xmlns:`http://www.w3.org/2000/svg`,width:`32`,height:`32`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},q_=[`href`],J_={class:`doc-info`},Y_={class:`doc-header-row`},X_={class:`doc-type`},Z_=[`onClick`],Q_={key:1,class:`verified-group`},$_=[`onClick`],ev={class:`doc-desc`},tv={key:1,class:`no-docs-empty`},nv={class:`alerts-section`},rv={class:`section-header`},iv={class:`badge`},av={key:0,class:`alerts-list`},ov={class:`alert-item-header`},sv={class:`alert-main-info`},cv={class:`alert-date`},lv=[`onClick`,`title`],uv={class:`alert-comment`},dv={class:`alert-docs`},fv={key:1,class:`no-alerts`},pv={class:`new-alert-form`},mv={class:`form-group`},hv={class:`doc-selection`},gv=[`value`,`disabled`],_v={class:`doc-selection-text`},vv={key:0,class:`selection-verified-tag`},yv={class:`form-group`},bv=[`disabled`],xv={class:`modal-footer`},Sv={class:`verify-actions`},Cv=[`disabled`],wv={key:0,class:`validation-hint`},Tv=Z(L({__name:`ProfessionalVerification`,setup(e){let t=F([]),n=F(!1),r=F(null),i=F(``),a=F(``),o=F([]),s=F([]),c=F(``),l=F([]),u=F(!1),d=F(`PENDING`),f=q(()=>d.value===`ALL`?t.value:d.value===`PENDING`?t.value.filter(e=>e.status===`PENDING`):d.value===`ACCEPTED`?t.value.filter(e=>e.status===`ACCEPTED`||e.status===`VALIDATED`):t.value),p=async e=>{let t=X.getItem(`access_token`);if(t)try{let n=await fetch(`/api/alerts/professional/${e}`,{headers:{Authorization:`Bearer ${t}`,accept:`*/*`}});n.ok&&(o.value=await n.json())}catch(e){console.error(`Failed to fetch alerts:`,e)}},m=async()=>{if(!r.value||l.value.length===0||!c.value){i.value=`Veuillez slectionner au moins un document et ajouter un commentaire.`;return}let e=X.getItem(`access_token`);if(e)try{u.value=!0;let t=await fetch(`/api/alerts`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${e}`,accept:`*/*`},body:JSON.stringify({professionalId:r.value.id,documentIds:l.value,comment:c.value,update:!1})});if(t.ok)a.value=`Alerte envoye avec succs.`,c.value=``,l.value=[],await p(r.value.id),await _(),setTimeout(()=>a.value=``,3e3);else{let e=await t.json().catch(()=>({}));throw Error(e.message||`chec de l'envoi de l'alerte.`)}}catch(e){console.error(`Send alert error:`,e),i.value=e.message}finally{u.value=!1}},h=async e=>{let t=X.getItem(`access_token`);if(t)try{let n=await fetch(`/api/alerts/${e.id}/toggle-update`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`,accept:`*/*`}});if(n.ok){let t=await n.json();e.update=t.update;let r=s.value.findIndex(t=>t.id===e.id);r===-1?s.value.push(t):s.value[r]=t,a.value=`Alerte ${t.update?`rsolue`:`ractive`} avec succs.`,setTimeout(()=>a.value=``,3e3)}else throw Error(`chec de la mise  jour de l'alerte.`)}catch(e){console.error(`Toggle alert error:`,e),i.value=e.message}},g=async e=>{r.value=e,o.value=[],c.value=``,l.value=[],e&&await p(e.id)},_=async()=>{let e=X.getItem(`access_token`);if(e)try{n.value=!0;let r=await fetch(`/api/auth/professionals/documents`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});if(r.ok){t.value=await r.json();let n=t.value.map(async t=>{try{let n=await fetch(`/api/alerts/professional/${t.id}`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});if(n.ok)return await n.json()}catch(e){console.warn(`Failed to fetch alerts for pro ${t.id}:`,e)}return[]});s.value=(await Promise.all(n)).flat()}}catch(e){console.error(`Failed to fetch professionals:`,e),i.value=`Erreur lors de la rcupration des professionnels.`}finally{n.value=!1}},v=e=>{let t=s.value.filter(t=>t.professionalId===e);return t.length===0?`NONE`:t.some(e=>e.update===!1)?`IN_PROGRESS`:`VERIFY`},y=async(e,t)=>{let n=X.getItem(`access_token`);if(n)try{if((await fetch(`/api/documents/${e}`,{method:`PATCH`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`,accept:`*/*`},body:JSON.stringify({verified:t})})).ok){if(r.value){let i=r.value.documents.find(t=>t.id===e);if(i&&(i.verified=t),!t&&(r.value.status===`ACCEPTED`||r.value.status===`VALIDATED`))try{(await fetch(`/api/auth/admin/user/${r.value.id}`,{method:`PATCH`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`,accept:`*/*`},body:JSON.stringify({status:`PENDING`})})).ok&&(r.value.status=`PENDING`,await _())}catch(e){console.error(`Failed to demote professional status:`,e)}if(!t){let e=o.value.find(e=>e.update===!0);e&&await h(e)}}a.value=t?`Document vrifi avec succs.`:`Vrification retire.`,setTimeout(()=>a.value=``,3e3)}else throw Error(t?`chec de la vrification.`:`chec du retrait de vrification.`)}catch(e){console.error(`Toggle document verification error:`,e),i.value=e.message}},b=async(e,t)=>{let n=X.getItem(`access_token`);if(n)try{let i=await fetch(`/api/auth/admin/user/${e}`,{method:`PATCH`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`,accept:`*/*`},body:JSON.stringify({status:t===`VALIDATED`?`ACCEPTED`:t})});if(!i.ok){let e=await i.json().catch(()=>({}));throw console.error(`Server error details:`,e),Error(e.message||`chec de la mise  jour du statut.`)}a.value=`Professionnel ${t===`VALIDATED`?`valid`:`rejet`} avec succs.`,r.value=null,await _(),setTimeout(()=>a.value=``,3e3)}catch(e){console.error(`Update status error:`,e),i.value=e.message}};hr(_);let x=e=>{switch(e){case`VALIDATED`:case`ACCEPTED`:return`status-validated`;case`PENDING`:return`status-pending`;case`REJECTED`:return`status-rejected`;default:return``}},S=e=>{if(!e)return!1;let t=e.split(`.`).pop()?.toLowerCase();return[`jpg`,`jpeg`,`png`,`gif`,`webp`].includes(t||``)};return(e,s)=>(B(),V(`div`,Rg,[i.value?(B(),V(`div`,zg,[W(M(i.value)+` `,1),U(`button`,{onClick:s[0]||=e=>i.value=``},``)])):K(``,!0),a.value?(B(),V(`div`,Bg,[W(M(a.value)+` `,1),U(`button`,{onClick:s[1]||=e=>a.value=``},``)])):K(``,!0),U(`div`,Vg,[U(`div`,Hg,[U(`div`,Ug,[s[11]||=U(`h3`,null,`Vrification des Professionnels`,-1),U(`p`,Wg,M(t.value.length)+` professionnels enregistrs`,1)]),U(`div`,Gg,[U(`div`,Kg,[U(`button`,{class:j([`filter-btn`,{active:d.value===`ALL`}]),onClick:s[2]||=e=>d.value=`ALL`},` Tous `,2),U(`button`,{class:j([`filter-btn`,{active:d.value===`PENDING`}]),onClick:s[3]||=e=>d.value=`PENDING`},` En attente `,2),U(`button`,{class:j([`filter-btn`,{active:d.value===`ACCEPTED`}]),onClick:s[4]||=e=>d.value=`ACCEPTED`},` Valids `,2)]),U(`button`,{class:`refresh-btn`,onClick:_,disabled:n.value},[(B(),V(`svg`,{class:j({spinning:n.value}),xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[...s[12]||=[U(`path`,{d:`M23 4v6h-6`},null,-1),U(`path`,{d:`M20.49 15a9 9 0 1 1-2.12-9.36L23 10`},null,-1)]],2)),W(` `+M(n.value?`Chargement...`:`Actualiser`),1)],8,qg)])]),U(`div`,Jg,[f.value.length>0?(B(),V(`table`,Yg,[s[16]||=U(`thead`,null,[U(`tr`,null,[U(`th`,null,`Professionnel`),U(`th`,null,`Spcialit`),U(`th`,null,`Ville`),U(`th`,null,`Documents`),U(`th`,null,`Statut`),U(`th`,null,`Alerte`),U(`th`,{class:`text-right`},`Actions`)])],-1),U(`tbody`,null,[(B(!0),V(z,null,R(f.value,e=>(B(),V(`tr`,{key:e.id,class:`pro-row`},[U(`td`,null,[U(`div`,Xg,[U(`div`,Zg,M(e.name[0]),1),U(`div`,Qg,[U(`span`,$g,M(e.name),1),U(`span`,e_,M(e.email),1)])])]),U(`td`,null,[U(`span`,t_,M(e.speciality||`N/A`),1)]),U(`td`,null,M(e.city||``),1),U(`td`,null,[U(`div`,n_,[e.documents?.length>0?(B(),V(`span`,r_,M(e.documents.length)+` document(s) `,1)):(B(),V(`span`,i_,`Aucun document`))])]),U(`td`,null,[U(`span`,{class:j([`status-badge`,x(e.status)])},M(e.status===`PENDING`?`En attente`:e.status),3)]),U(`td`,null,[v(e.id)===`VERIFY`?(B(),V(`div`,a_,[...s[13]||=[U(`span`,{class:`pulse`},null,-1),W(`  vrifier `,-1)]])):v(e.id)===`IN_PROGRESS`?(B(),V(`div`,o_,[...s[14]||=[U(`span`,{class:`pulse-orange`},null,-1),W(` En cours `,-1)]])):(B(),V(`span`,s_,``))]),U(`td`,c_,[U(`div`,l_,[U(`button`,{class:`action-btn view-btn`,onClick:t=>g(e)},[...s[15]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`}),U(`circle`,{cx:`12`,cy:`12`,r:`3`})],-1),W(` Ouvrir `,-1)]],8,u_)])])]))),128))])])):n.value?K(``,!0):(B(),V(`div`,d_,[s[17]||=U(`div`,{class:`empty-icon`},``,-1),d.value===`ALL`?(B(),V(`p`,f_,`Aucun professionnel enregistr.`)):d.value===`PENDING`?(B(),V(`p`,p_,`Aucun professionnel en attente de vrification.`)):(B(),V(`p`,m_,`Aucun professionnel valid.`))])),U(`div`,h_,[(B(!0),V(z,null,R(f.value,e=>(B(),V(`div`,{key:e.id,class:`mobile-pro-card`,onClick:t=>g(e)},[U(`div`,__,[U(`div`,v_,[U(`div`,y_,M(e.name[0]),1),U(`div`,null,[U(`span`,b_,M(e.name),1),U(`span`,x_,M(e.email),1)])]),U(`span`,{class:j([`status-badge`,x(e.status)])},M(e.status===`PENDING`?`En attente`:e.status),3)]),U(`div`,S_,[U(`div`,C_,[s[18]||=U(`span`,{class:`label`},`Spcialit:`,-1),U(`span`,w_,M(e.speciality||`N/A`),1)]),U(`div`,T_,[s[19]||=U(`span`,{class:`label`},`Ville:`,-1),U(`span`,E_,M(e.city||``),1)]),U(`div`,D_,[s[20]||=U(`span`,{class:`label`},`Documents:`,-1),U(`span`,O_,M(e.documents?.length||0)+` docs `,1)])]),U(`div`,k_,[v(e.id)===`VERIFY`?(B(),V(`div`,A_,[...s[21]||=[U(`span`,{class:`pulse`},null,-1),W(`  vrifier `,-1)]])):v(e.id)===`IN_PROGRESS`?(B(),V(`div`,j_,[...s[22]||=[U(`span`,{class:`pulse-orange`},null,-1),W(` En cours `,-1)]])):K(``,!0),s[23]||=U(`button`,{class:`action-btn view-btn mobile-view-btn`},` Ouvrir `,-1)])],8,g_))),128))])])]),r.value?(B(),V(`div`,{key:2,class:`modal-overlay`,onClick:s[10]||=Y(e=>g(null),[`self`])},[U(`div`,M_,[U(`header`,N_,[U(`div`,P_,[U(`h2`,null,`Profil de `+M(r.value.name),1),U(`span`,{class:j([`status-badge`,x(r.value.status)])},M(r.value.status),3)]),U(`button`,{class:`close-btn`,onClick:s[5]||=e=>g(null)},[...s[24]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),U(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})],-1)]])]),U(`div`,F_,[U(`div`,I_,[U(`div`,L_,[s[28]||=U(`label`,null,`Informations Personnelles`,-1),U(`p`,null,[s[25]||=U(`strong`,null,`Email:`,-1),W(` `+M(r.value.email),1)]),U(`p`,null,[s[26]||=U(`strong`,null,`Tlphone:`,-1),W(` `+M(r.value.phone||r.value.personalPhone||`N/A`),1)]),U(`p`,null,[s[27]||=U(`strong`,null,`CIN:`,-1),W(` `+M(r.value.cin||`N/A`),1)])]),U(`div`,R_,[s[32]||=U(`label`,null,`Expertise Professionnelle`,-1),U(`p`,null,[s[29]||=U(`strong`,null,`Spcialit:`,-1),W(` `+M(r.value.speciality),1)]),U(`p`,null,[s[30]||=U(`strong`,null,`Exprience:`,-1),W(` `+M(r.value.yearsOfExperience)+` ans`,1)]),U(`p`,null,[s[31]||=U(`strong`,null,`Numro ADELI/RPPS:`,-1),W(` `+M(r.value.adeliRppsNumber||`N/A`),1)])]),U(`div`,z_,[s[34]||=U(`label`,null,`Localisation`,-1),U(`p`,null,[s[33]||=U(`strong`,null,`Adresse:`,-1),W(` `+M(r.value.professionalAddress||`N/A`)+`, `+M(r.value.city||`N/A`),1)])])]),U(`div`,B_,[s[39]||=U(`h3`,null,`Documents Justificatifs`,-1),r.value.documents&&r.value.documents.length>0?(B(),V(`div`,V_,[(B(!0),V(z,null,R(r.value.documents,e=>(B(),V(`div`,{key:e.id,class:`document-card`},[U(`div`,H_,[S(e.filePath)?(B(),V(`img`,{key:0,src:`/api/`+e.filePath,class:`doc-image-preview`,alt:`Aperu du document`},null,8,U_)):(B(),V(`div`,W_,[e.type===`ID_CARD`?(B(),V(`svg`,G_,[...s[35]||=[U(`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2`},null,-1),U(`circle`,{cx:`9`,cy:`7`,r:`4`},null,-1),U(`path`,{d:`M23 21v-2a4 4 0 0 0-3-3.87`},null,-1),U(`circle`,{cx:`19`,cy:`11`,r:`2`},null,-1)]])):(B(),V(`svg`,K_,[...s[36]||=[G(`<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-c03ab165></path><polyline points="14 2 14 8 20 8" data-v-c03ab165></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-c03ab165></line><line x1="16" y1="17" x2="8" y2="17" data-v-c03ab165></line><polyline points="10 9 9 9 8 9" data-v-c03ab165></polyline>`,5)]]))])),U(`a`,{href:`/api/`+e.filePath,target:`_blank`,class:`view-doc-link`},`Ouvrir le document`,8,q_)]),U(`div`,J_,[U(`div`,Y_,[U(`span`,X_,M(e.type),1),e.verified?(B(),V(`div`,Q_,[s[38]||=U(`span`,{class:`doc-verified-badge`},[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`3`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`20 6 9 17 4 12`})]),W(` Vrifi `)],-1),U(`button`,{class:`btn-unverify-doc`,onClick:t=>y(e.id,!1),title:`Retirer la vrification`},[...s[37]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),U(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})],-1)]],8,$_)])):(B(),V(`button`,{key:0,class:`btn-verify-doc`,onClick:t=>y(e.id,!0)},`Vrifier`,8,Z_))]),U(`p`,ev,M(e.description),1)])]))),128))])):(B(),V(`div`,tv,` Aucun document soumis. `))]),U(`div`,nv,[U(`div`,rv,[s[40]||=U(`h3`,null,`Historique des Alertes`,-1),U(`span`,iv,M(o.value.length),1)]),o.value.length>0?(B(),V(`div`,av,[(B(!0),V(z,null,R(o.value,e=>(B(),V(`div`,{key:e.id,class:`alert-item`},[U(`div`,ov,[U(`div`,sv,[U(`span`,cv,M(new Date(e.createdAt).toLocaleDateString(`fr-FR`,{day:`2-digit`,month:`short`,hour:`2-digit`,minute:`2-digit`})),1),U(`span`,{class:j([`update-badge`,{updated:e.update}])},M(e.update?` Mise  jour reue`:` En cours`),3)]),U(`button`,{class:j([`btn-resolve-alert`,{resolved:e.update}]),onClick:t=>h(e),title:e.update?`Marquer comme en attente`:`Marquer comme rsolu`},M(e.update?`Ractiver`:`Rsoudre`),11,lv)]),U(`p`,uv,M(e.comment),1),U(`div`,dv,[(B(!0),V(z,null,R(e.unverifiedDocIds,e=>(B(),V(`span`,{key:e,class:`mini-doc-tag`},` ID Document: `+M(e),1))),128))])]))),128))])):(B(),V(`div`,fv,` Aucune alerte envoye pour ce professionnel. `)),U(`div`,pv,[s[44]||=U(`h4`,null,`Envoyer une nouvelle alerte de re-vrification`,-1),U(`div`,mv,[s[42]||=U(`label`,null,`Slectionner les documents  re-vrifier`,-1),U(`div`,hv,[(B(!0),V(z,null,R(r.value.documents,e=>(B(),V(`label`,{key:e.id,class:j([`checkbox-label`,{"is-verified":e.verified}])},[I(U(`input`,{type:`checkbox`,value:e.id,"onUpdate:modelValue":s[6]||=e=>l.value=e,disabled:e.verified},null,8,gv),[[go,l.value]]),s[41]||=U(`span`,{class:`check-custom`},null,-1),U(`span`,_v,[W(M(e.type)+` (ID: `+M(e.id)+`) `,1),e.verified?(B(),V(`span`,vv,`Vrifi`)):K(``,!0)])],2))),128))])]),U(`div`,yv,[s[43]||=U(`label`,null,`Commentaire / Instructions`,-1),I(U(`textarea`,{"onUpdate:modelValue":s[7]||=e=>c.value=e,placeholder:`Expliquez pourquoi ces documents ncessitent une re-vrification...`,rows:`3`},null,512),[[J,c.value]])]),U(`button`,{class:`btn-send-alert`,onClick:m,disabled:u.value||l.value.length===0||!c.value},M(u.value?`Envoi...`:`Envoyer l'alerte`),9,bv)])])]),U(`footer`,xv,[U(`div`,Sv,[U(`button`,{class:`btn-reject`,onClick:s[8]||=e=>b(r.value.id,`REJECTED`)},`Rejeter`),U(`button`,{class:`btn-validate`,onClick:s[9]||=e=>b(r.value.id,`VALIDATED`),disabled:!r.value.documents.every(e=>e.verified)},` Valider le profil `,8,Cv)]),r.value.documents.every(e=>e.verified)?K(``,!0):(B(),V(`p`,wv,` Tous les documents doivent tre vrifis avant de valider le profil. `))])])])):K(``,!0)]))}}),[[`__scopeId`,`data-v-c03ab165`]]),Ev={class:`services-management`},Dv={class:`header-section`},Ov={class:`management-grid`},kv={class:`grid-card`},Av={class:`card-header`},jv={class:`count`},Mv={class:`services-list`},Nv=[`onClick`],Pv={class:`service-info`},Fv={class:`service-name`},Iv={class:`service-desc`},Lv={class:`item-actions`},Rv=[`onClick`],zv=[`onClick`],Bv={class:`grid-card`},Vv={class:`card-header`},Hv={class:`header-with-context`},Uv={key:0,class:`context-tag`},Wv={key:0,class:`empty-selection`},Gv={key:1,class:`soins-list`},Kv={key:0,class:`no-items`},qv=[`onClick`],Jv={class:`soin-info`},Yv={class:`soin-name-row`},Xv={class:`soin-name`},Zv={key:0,class:`price-tag`},Qv={class:`soin-desc`},$v={class:`item-actions`},ey=[`onClick`],ty=[`onClick`],ny={key:0,class:`soin-content-section`},ry={class:`content-list`},iy={key:0,class:`no-content`},ay={class:`item-main`},oy={class:`item-label`},sy={class:`item-actions`},cy=[`onClick`],ly=[`onClick`],uy={class:`item-main`},dy={class:`item-label`},fy={class:`item-actions`},py=[`onClick`],my=[`onClick`],hy={class:`item-main`},gy={class:`item-label`},_y={class:`item-actions`},vy=[`onClick`],yy=[`onClick`],by={class:`item-main`},xy={class:`item-label`},Sy={class:`item-actions`},Cy=[`onClick`],wy=[`onClick`],Ty={class:`modal-content`},Ey={class:`form-group`},Dy={class:`form-group`},Oy={class:`modal-actions`},ky={class:`modal-content`},Ay={class:`modal-subtitle`},jy={class:`form-group`},My={class:`form-group`},Ny={class:`form-group`},Py={class:`modal-actions`},Fy={class:`modal-content field-modal`},Iy={class:`modal-subtitle`},Ly={class:`form-group`},Ry={class:`form-group`},zy={key:0,class:`choices-section`},By={class:`choice-input-group`},Vy=[`onKeyup`],Hy={class:`choices-list`},Uy=[`onClick`],Wy={class:`modal-actions`},Gy={type:`submit`,class:`submit-btn`},Ky=Z(L({__name:`ServicesManagement`,setup(e){let t=X,n=F([]),r=F(!1),i=F(!1),a=F(!1),o=F(!1),s=F(null),c=F(null),l=F(null),u=F(null),d=F([]),f=F({name:``,description:``}),p=F({name:``,description:``,price:0,serviceId:0}),m=F({id:null,type:`text`,name:``,choices:[],newChoice:``}),h=F(null),g=F(``),_=async()=>{let e=t.getItem(`access_token`);try{r.value=!0;let t=await fetch(`/api/services`,{headers:{accept:`*/*`,Authorization:`Bearer ${e}`}});t.ok&&(n.value=await t.json())}catch(e){console.error(`Failed to fetch services:`,e)}finally{r.value=!1}},v=async e=>{let n=t.getItem(`access_token`);try{let t=await fetch(`/api/soins/service/${e}`,{headers:{accept:`*/*`,Authorization:`Bearer ${n}`}});t.ok&&(d.value=await t.json())}catch(e){console.error(`Failed to fetch soins:`,e)}},y=async()=>{let e=t.getItem(`access_token`),n=s.value?`PATCH`:`POST`,r=s.value?`/api/services/${s.value.id}`:`/api/services`;try{let t=await fetch(r,{method:n,headers:{accept:`*/*`,"Content-Type":`application/json`,Authorization:`Bearer ${e}`},body:JSON.stringify({name:f.value.name,description:f.value.description})});if(t.ok)i.value=!1,_(),O();else{let e=await t.json().catch(()=>({}));alert(`Erreur: `+(e.message||`chec de l'opration`))}}catch(e){console.error(`Failed to save service:`,e),alert(`Une erreur rseau est survenue.`)}},b=async e=>{if(!confirm(`tes-vous sr de vouloir supprimer ce service ?`))return;let n=t.getItem(`access_token`);try{(await fetch(`/api/services/${e}`,{method:`DELETE`,headers:{accept:`*/*`,Authorization:`Bearer ${n}`}})).ok&&(_(),l.value?.id===e&&(l.value=null))}catch(e){console.error(`Failed to delete service:`,e)}},x=async()=>{let e=t.getItem(`access_token`),n=c.value?`PATCH`:`POST`,r=c.value?`/api/soins/${c.value.id}`:`/api/soins`,i={name:p.value.name,description:p.value.description,price:Number(p.value.price),serviceId:Number(l.value.id)};try{let t=await fetch(r,{method:n,headers:{accept:`*/*`,"Content-Type":`application/json`,Authorization:`Bearer ${e}`},body:JSON.stringify(i)});if(t.ok)a.value=!1,v(l.value.id),ne();else{let e=await t.json().catch(()=>({}));alert(`Erreur: `+(e.message||`chec de l'opration`))}}catch(e){console.error(`Failed to save soin:`,e),alert(`Une erreur rseau est survenue.`)}},S=async e=>{if(!confirm(`tes-vous sr de vouloir supprimer ce soin ?`))return;let n=t.getItem(`access_token`);try{(await fetch(`/api/soins/${e}`,{method:`DELETE`,headers:{accept:`*/*`,Authorization:`Bearer ${n}`}})).ok&&(v(l.value.id),u.value?.id===e&&(u.value=null))}catch(e){console.error(`Failed to delete soin:`,e)}},C=async()=>{let e=t.getItem(`access_token`),n=m.value.type,r=h.value&&n!==g.value;if(r)try{await fetch(`/api/soins/content/${g.value}/${m.value.id}`,{method:`DELETE`,headers:{accept:`*/*`,Authorization:`Bearer ${e}`}})}catch(e){console.error(`Failed to delete old content during type change:`,e)}let i=m.value.id&&!r?`PATCH`:`POST`,a=m.value.id&&!r?`/api/soins/content/${n}/${m.value.id}`:`/api/soins/content/${n}`,s={name:m.value.name,soinId:Number(u.value.id)};n!==`text`&&(s.choices=m.value.choices);try{let t=await fetch(a,{method:i,headers:{accept:`*/*`,"Content-Type":`application/json`,Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(t.ok)o.value=!1,v(l.value.id),k();else{let e=await t.json().catch(()=>({}));alert(`Erreur: `+(e.message||`chec de l'opration`))}}catch(e){console.error(`Failed to save content:`,e)}},w=async(e,n)=>{if(!confirm(`tes-vous sr de vouloir supprimer ce champ ?`))return;let r=t.getItem(`access_token`);try{(await fetch(`/api/soins/content/${n}/${e.id}`,{method:`DELETE`,headers:{accept:`*/*`,Authorization:`Bearer ${r}`}})).ok&&v(l.value.id)}catch(e){console.error(`Failed to delete content:`,e)}},ee=()=>{m.value.newChoice.trim()&&(m.value.choices.push(m.value.newChoice.trim()),m.value.newChoice=``)},T=e=>{m.value.choices.splice(e,1)},E=(e=null)=>{e?(s.value=e,f.value={name:e.name,description:e.description}):O(),i.value=!0},D=(e=null)=>{e?(c.value=e,p.value={name:e.name,description:e.description,price:e.price||0,serviceId:l.value.id}):ne(),a.value=!0},te=(e=null,t=`text`)=>{e?(h.value=e,g.value=t,m.value={id:e.id,type:t,name:e.name,choices:e.choices?[...e.choices]:[],newChoice:``}):k(),o.value=!0},O=()=>{s.value=null,f.value={name:``,description:``}},ne=()=>{c.value=null,p.value={name:``,description:``,price:0,serviceId:0}},k=()=>{h.value=null,g.value=``,m.value={id:null,type:`text`,name:``,choices:[],newChoice:``}},re=e=>{l.value=e,u.value=null,v(e.id)};return hr(_),(e,t)=>(B(),V(`div`,Ev,[U(`div`,Dv,[t[17]||=U(`div`,{class:`header-content`},[U(`h1`,null,`Gestion des Services et Soins`),U(`p`,{class:`subtitle`},`Configurez les services mdicaux et les actes de soin associs.`)],-1),U(`button`,{class:`add-btn`,onClick:t[0]||=e=>E()},[...t[16]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`12`,y1:`5`,x2:`12`,y2:`19`}),U(`line`,{x1:`5`,y1:`12`,x2:`19`,y2:`12`})],-1),W(` Nouveau Service `,-1)]])]),U(`div`,Ov,[U(`div`,kv,[U(`div`,Av,[t[18]||=U(`h3`,null,`Services`,-1),U(`span`,jv,M(n.value.length),1)]),U(`div`,Mv,[(B(!0),V(z,null,R(n.value,e=>(B(),V(`div`,{key:e.id,class:j([`service-item`,{active:l.value?.id===e.id}]),onClick:t=>re(e)},[U(`div`,Pv,[U(`span`,Fv,M(e.name),1),U(`p`,Iv,M(e.description),1)]),U(`div`,Lv,[U(`button`,{class:`icon-btn edit`,onClick:Y(t=>E(e),[`stop`])},[...t[19]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`}),U(`path`,{d:`M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z`})],-1)]],8,Rv),U(`button`,{class:`icon-btn delete`,onClick:Y(t=>b(e.id),[`stop`])},[...t[20]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`3 6 5 6 21 6`}),U(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})],-1)]],8,zv)])],10,Nv))),128))])]),U(`div`,Bv,[U(`div`,Vv,[U(`div`,Hv,[t[21]||=U(`h3`,null,`Soins`,-1),l.value?(B(),V(`span`,Uv,M(l.value.name),1)):K(``,!0)]),l.value?(B(),V(`button`,{key:0,class:`add-small-btn`,onClick:t[1]||=e=>D()},` Ajouter un soin `)):K(``,!0)]),l.value?(B(),V(`div`,Gv,[d.value.length===0?(B(),V(`div`,Kv,` Aucun soin configur pour ce service. `)):K(``,!0),(B(!0),V(z,null,R(d.value,e=>(B(),V(`div`,{key:e.id,class:`soin-container`},[U(`div`,{class:j([`soin-item`,{active:u.value?.id===e.id}]),onClick:t=>u.value=e},[U(`div`,Jv,[U(`div`,Yv,[U(`span`,Xv,M(e.name),1),e.price?(B(),V(`span`,Zv,M(e.price)+` DT`,1)):K(``,!0)]),U(`p`,Qv,M(e.description),1)]),U(`div`,$v,[U(`button`,{class:`icon-btn edit`,onClick:Y(t=>D(e),[`stop`])},[...t[23]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`}),U(`path`,{d:`M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z`})],-1)]],8,ey),U(`button`,{class:`icon-btn delete`,onClick:Y(t=>S(e.id),[`stop`])},[...t[24]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`3 6 5 6 21 6`}),U(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})],-1)]],8,ty)])],10,qv),u.value?.id===e.id?(B(),V(`div`,ny,[U(`div`,{class:`content-header`},[t[25]||=U(`h4`,null,`lments du formulaire`,-1),U(`button`,{class:`add-content-btn`,onClick:te},` + Ajouter un champ `)]),U(`div`,ry,[!e.checkboxes?.length&&!e.radios?.length&&!e.dropdowns?.length&&!e.texts?.length?(B(),V(`div`,iy,` Aucun champ configur pour ce formulaire. `)):K(``,!0),(B(!0),V(z,null,R(e.checkboxes||[],e=>(B(),V(`div`,{key:e.id,class:`content-item`},[U(`div`,ay,[t[26]||=U(`span`,{class:`type-badge checkbox`},`Multi`,-1),U(`span`,oy,M(e.name),1)]),U(`div`,sy,[U(`button`,{class:`mini-icon-btn`,onClick:Y(t=>te(e,`checkbox`),[`stop`])},[...t[27]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`}),U(`path`,{d:`M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z`})],-1)]],8,cy),U(`button`,{class:`mini-icon-btn delete`,onClick:Y(t=>w(e,`checkbox`),[`stop`])},[...t[28]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`3 6 5 6 21 6`}),U(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})],-1)]],8,ly)])]))),128)),(B(!0),V(z,null,R(e.radios||[],e=>(B(),V(`div`,{key:e.id,class:`content-item`},[U(`div`,uy,[t[29]||=U(`span`,{class:`type-badge radio`},`Unique`,-1),U(`span`,dy,M(e.name),1)]),U(`div`,fy,[U(`button`,{class:`mini-icon-btn`,onClick:Y(t=>te(e,`radio`),[`stop`])},[...t[30]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`}),U(`path`,{d:`M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z`})],-1)]],8,py),U(`button`,{class:`mini-icon-btn delete`,onClick:Y(t=>w(e,`radio`),[`stop`])},[...t[31]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`3 6 5 6 21 6`}),U(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})],-1)]],8,my)])]))),128)),(B(!0),V(z,null,R(e.dropdowns||[],e=>(B(),V(`div`,{key:e.id,class:`content-item`},[U(`div`,hy,[t[32]||=U(`span`,{class:`type-badge dropdown`},`Liste`,-1),U(`span`,gy,M(e.name),1)]),U(`div`,_y,[U(`button`,{class:`mini-icon-btn`,onClick:Y(t=>te(e,`dropdown`),[`stop`])},[...t[33]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`}),U(`path`,{d:`M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z`})],-1)]],8,vy),U(`button`,{class:`mini-icon-btn delete`,onClick:Y(t=>w(e,`dropdown`),[`stop`])},[...t[34]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`3 6 5 6 21 6`}),U(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})],-1)]],8,yy)])]))),128)),(B(!0),V(z,null,R(e.texts||[],e=>(B(),V(`div`,{key:e.id,class:`content-item`},[U(`div`,by,[t[35]||=U(`span`,{class:`type-badge text`},`Texte`,-1),U(`span`,xy,M(e.name),1)]),U(`div`,Sy,[U(`button`,{class:`mini-icon-btn`,onClick:Y(t=>te(e,`text`),[`stop`])},[...t[36]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`}),U(`path`,{d:`M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z`})],-1)]],8,Cy),U(`button`,{class:`mini-icon-btn delete`,onClick:Y(t=>w(e,`text`),[`stop`])},[...t[37]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`3 6 5 6 21 6`}),U(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})],-1)]],8,wy)])]))),128))])])):K(``,!0)]))),128))])):(B(),V(`div`,Wv,[...t[22]||=[U(`div`,{class:`empty-icon`},``,-1),U(`p`,null,`Slectionnez un service pour grer ses soins`,-1)]]))])]),i.value?(B(),V(`div`,{key:0,class:`modal-overlay`,onClick:t[5]||=Y(e=>i.value=!1,[`self`])},[U(`div`,Ty,[U(`h2`,null,M(s.value?`Modifier le Service`:`Nouveau Service`),1),U(`form`,{onSubmit:Y(y,[`prevent`]),class:`admin-form`},[U(`div`,Ey,[t[38]||=U(`label`,null,`Nom du service`,-1),I(U(`input`,{"onUpdate:modelValue":t[2]||=e=>f.value.name=e,type:`text`,placeholder:`Ex: Soins Infirmiers`,required:``},null,512),[[J,f.value.name]])]),U(`div`,Dy,[t[39]||=U(`label`,null,`Description`,-1),I(U(`textarea`,{"onUpdate:modelValue":t[3]||=e=>f.value.description=e,placeholder:`Description du service...`},null,512),[[J,f.value.description]])]),U(`div`,Oy,[U(`button`,{type:`button`,class:`cancel-btn`,onClick:t[4]||=e=>i.value=!1},`Annuler`),t[40]||=U(`button`,{type:`submit`,class:`submit-btn`},`Enregistrer`,-1)])],32)])])):K(``,!0),a.value?(B(),V(`div`,{key:1,class:`modal-overlay`,onClick:t[10]||=Y(e=>a.value=!1,[`self`])},[U(`div`,ky,[U(`h2`,null,M(c.value?`Modifier le Soin`:`Nouveau Soin`),1),U(`p`,Ay,`Pour le service: `+M(l.value?.name),1),U(`form`,{onSubmit:Y(x,[`prevent`]),class:`admin-form`},[U(`div`,jy,[t[41]||=U(`label`,null,`Nom du soin`,-1),I(U(`input`,{"onUpdate:modelValue":t[6]||=e=>p.value.name=e,type:`text`,placeholder:`Ex: Pansement simple`,required:``},null,512),[[J,p.value.name]])]),U(`div`,My,[t[42]||=U(`label`,null,`Prix (DT)`,-1),I(U(`input`,{"onUpdate:modelValue":t[7]||=e=>p.value.price=e,type:`number`,step:`0.001`,placeholder:`Ex: 15.500`,required:``},null,512),[[J,p.value.price]])]),U(`div`,Ny,[t[43]||=U(`label`,null,`Description`,-1),I(U(`textarea`,{"onUpdate:modelValue":t[8]||=e=>p.value.description=e,placeholder:`Description du soin...`},null,512),[[J,p.value.description]])]),U(`div`,Py,[U(`button`,{type:`button`,class:`cancel-btn`,onClick:t[9]||=e=>a.value=!1},`Annuler`),t[44]||=U(`button`,{type:`submit`,class:`submit-btn`},`Enregistrer`,-1)])],32)])])):K(``,!0),o.value?(B(),V(`div`,{key:2,class:`modal-overlay`,onClick:t[15]||=Y(e=>o.value=!1,[`self`])},[U(`div`,Fy,[U(`h2`,null,M(h.value?`Modifier le champ`:`Ajouter un champ`),1),U(`p`,Iy,`Configurez l'lment pour le soin: `+M(u.value?.name),1),U(`form`,{onSubmit:Y(C,[`prevent`]),class:`admin-form`},[U(`div`,Ly,[t[46]||=U(`label`,null,`Type de champ`,-1),I(U(`select`,{"onUpdate:modelValue":t[11]||=e=>m.value.type=e,class:`type-select`},[...t[45]||=[U(`option`,{value:`text`},`Saisie de texte`,-1),U(`option`,{value:`dropdown`},`Liste droulante (Dropdown)`,-1),U(`option`,{value:`radio`},`Choix unique (Radio)`,-1),U(`option`,{value:`checkbox`},`Choix multiples (Checkbox)`,-1)]],512),[[yo,m.value.type]])]),U(`div`,Ry,[t[47]||=U(`label`,null,`Question / Libell`,-1),I(U(`input`,{"onUpdate:modelValue":t[12]||=e=>m.value.name=e,type:`text`,placeholder:`Ex: Avez-vous une ordonnance ?`,required:``},null,512),[[J,m.value.name]])]),m.value.type===`text`?K(``,!0):(B(),V(`div`,zy,[t[48]||=U(`label`,null,`Options de rponse`,-1),U(`div`,By,[I(U(`input`,{"onUpdate:modelValue":t[13]||=e=>m.value.newChoice=e,type:`text`,placeholder:`Ajouter une option...`,onKeyup:ko(Y(ee,[`prevent`]),[`enter`])},null,40,Vy),[[J,m.value.newChoice]]),U(`button`,{type:`button`,class:`add-choice-btn`,onClick:ee},`Ajouter`)]),U(`div`,Hy,[(B(!0),V(z,null,R(m.value.choices,(e,t)=>(B(),V(`div`,{key:t,class:`choice-tag`},[W(M(e)+` `,1),U(`span`,{class:`remove-choice`,onClick:e=>T(t)},``,8,Uy)]))),128))])])),U(`div`,Wy,[U(`button`,{type:`button`,class:`cancel-btn`,onClick:t[14]||=e=>o.value=!1},`Annuler`),U(`button`,Gy,M(h.value?`Enregistrer les modifications`:`Ajouter au formulaire`),1)])],32)])])):K(``,!0)]))}}),[[`__scopeId`,`data-v-7f23556f`]]),qy={class:`services-catalog`},Jy={class:`header-section`},Yy={class:`stats-badges`},Xy={class:`stat-badge`},Zy={class:`stat-value`},Qy={key:0,class:`loading-state`},$y={key:1,class:`catalog-grid`},eb={key:0,class:`empty-state`},tb={class:`service-header`},nb={class:`service-main-info`},rb={class:`soin-count`},ib={class:`soins-container`},ab={class:`soin-info`},ob={class:`soin-text`},sb={class:`soin-name-header`},cb={class:`soin-name`},lb={key:0,class:`catalog-price-tag`},ub={class:`soin-desc`},db={class:`form-elements-preview`},fb={key:0,class:`no-fields`},pb={class:`fields-grid`},mb={class:`field-info`},hb={class:`field-name`},gb={class:`field-choices`},_b={class:`field-info`},vb={class:`field-name`},yb={class:`field-choices`},bb={class:`field-info`},xb={class:`field-name`},Sb={class:`field-choices`},Cb={class:`field-info`},wb={class:`field-name`},Tb={key:2,class:`pagination-section`},Eb=[`disabled`],Db={class:`page-numbers`},Ob=[`onClick`],kb=[`disabled`],Ab=Z(L({__name:`ServicesCatalog`,setup(e){let t=F([]),n=F(!1),r=F(1),i=F(5),a=async()=>{let e=localStorage.getItem(`access_token`);try{n.value=!0;let r=await fetch(`/api/services`,{headers:{accept:`*/*`,Authorization:`Bearer ${e}`}});r.ok&&(t.value=await r.json())}catch(e){console.error(`Failed to fetch services catalog:`,e)}finally{n.value=!1}},o=q(()=>{let e=(r.value-1)*i.value,n=e+i.value;return t.value.slice(e,n)}),s=q(()=>Math.ceil(t.value.length/i.value));return hr(a),(e,i)=>(B(),V(`div`,qy,[U(`div`,Jy,[i[3]||=U(`div`,{class:`header-content`},[U(`h1`,null,`Catalogue des Services`),U(`p`,{class:`subtitle`},`Vue d'ensemble complte de la structure mdicale et des formulaires.`)],-1),U(`div`,Yy,[U(`div`,Xy,[U(`span`,Zy,M(t.value.length),1),i[2]||=U(`span`,{class:`stat-label`},`Services`,-1)])])]),n.value?(B(),V(`div`,Qy,[...i[4]||=[U(`div`,{class:`loader`},null,-1),U(`p`,null,`Chargement du catalogue...`,-1)]])):(B(),V(`div`,$y,[t.value.length===0?(B(),V(`div`,eb,[...i[5]||=[U(`p`,null,`Aucun service configur pour le moment.`,-1)]])):K(``,!0),(B(!0),V(z,null,R(o.value,e=>(B(),V(`div`,{key:e.id,class:`service-card`},[U(`div`,tb,[U(`div`,nb,[i[6]||=G(`<div class="service-icon" data-v-35a5e0c6><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-35a5e0c6><path d="M12 2v20" data-v-35a5e0c6></path><path d="M2 12h20" data-v-35a5e0c6></path><path d="m12 12 4 4" data-v-35a5e0c6></path><path d="m12 12-4-4" data-v-35a5e0c6></path><path d="m12 12 4-4" data-v-35a5e0c6></path><path d="m12 12-4 4" data-v-35a5e0c6></path></svg></div>`,1),U(`div`,null,[U(`h3`,null,M(e.name),1),U(`p`,null,M(e.description||`Aucune description`),1)])]),U(`span`,rb,M(e.soins?.length||0)+` Soins`,1)]),U(`div`,ib,[(B(!0),V(z,null,R(e.soins,e=>(B(),V(`div`,{key:e.id,class:`soin-block`},[U(`div`,ab,[i[7]||=U(`div`,{class:`soin-dot`},null,-1),U(`div`,ob,[U(`div`,sb,[U(`span`,cb,M(e.name),1),e.price?(B(),V(`span`,lb,M(e.price)+` DT`,1)):K(``,!0)]),U(`p`,ub,M(e.description),1)])]),U(`div`,db,[!e.checkboxes?.length&&!e.radios?.length&&!e.dropdowns?.length&&!e.texts?.length?(B(),V(`div`,fb,` Aucun champ de formulaire `)):K(``,!0),U(`div`,pb,[(B(!0),V(z,null,R(e.checkboxes,e=>(B(),V(`div`,{key:`cb-`+e.id,class:`field-card`},[U(`div`,mb,[i[8]||=U(`span`,{class:`field-type checkbox`},`Multi`,-1),U(`span`,hb,M(e.name),1)]),U(`div`,gb,[(B(!0),V(z,null,R(e.choices,e=>(B(),V(`span`,{key:e,class:`choice-dot`},M(e),1))),128))])]))),128)),(B(!0),V(z,null,R(e.radios,e=>(B(),V(`div`,{key:`rd-`+e.id,class:`field-card`},[U(`div`,_b,[i[9]||=U(`span`,{class:`field-type radio`},`Unique`,-1),U(`span`,vb,M(e.name),1)]),U(`div`,yb,[(B(!0),V(z,null,R(e.choices,e=>(B(),V(`span`,{key:e,class:`choice-dot`},M(e),1))),128))])]))),128)),(B(!0),V(z,null,R(e.dropdowns,e=>(B(),V(`div`,{key:`dr-`+e.id,class:`field-card`},[U(`div`,bb,[i[10]||=U(`span`,{class:`field-type dropdown`},`Liste`,-1),U(`span`,xb,M(e.name),1)]),U(`div`,Sb,[(B(!0),V(z,null,R(e.choices,e=>(B(),V(`span`,{key:e,class:`choice-dot`},M(e),1))),128))])]))),128)),(B(!0),V(z,null,R(e.texts,e=>(B(),V(`div`,{key:`txt-`+e.id,class:`field-card`},[U(`div`,Cb,[i[11]||=U(`span`,{class:`field-type text`},`Texte`,-1),U(`span`,wb,M(e.name),1)]),i[12]||=U(`div`,{class:`field-placeholder`},`Champ de saisie libre`,-1)]))),128))])])]))),128))])]))),128))])),s.value>1?(B(),V(`div`,Tb,[U(`button`,{class:`page-btn`,disabled:r.value===1,onClick:i[0]||=e=>r.value--},[...i[13]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`15 18 9 12 15 6`})],-1),W(` Prcdent `,-1)]],8,Eb),U(`div`,Db,[(B(!0),V(z,null,R(s.value,e=>(B(),V(`button`,{key:e,class:j([`page-number`,{active:r.value===e}]),onClick:t=>r.value=e},M(e),11,Ob))),128))]),U(`button`,{class:`page-btn`,disabled:r.value===s.value,onClick:i[1]||=e=>r.value++},[...i[14]||=[W(` Suivant `,-1),U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`9 18 15 12 9 6`})],-1)]],8,kb)])):K(``,!0)]))}}),[[`__scopeId`,`data-v-35a5e0c6`]]),jb={class:`booking-management`},Mb={key:0,class:`alert alert-error`},Nb={class:`grid-card full-width`},Pb={class:`card-header`},Fb={class:`header-main`},Ib={class:`subtitle`},Lb=[`disabled`],Rb={class:`table-wrapper admin-card`},zb={key:0,class:`admin-table`},Bb={class:`user-info`},Vb={class:`user-avatar-small`},Hb={class:`user-details`},Ub={class:`user-name`},Wb={class:`user-email`},Gb={class:`service-info`},Kb={class:`spec-badge`},qb={class:`soins-tags`},Jb={class:`date-info`},Yb={class:`date-val`},Xb={class:`time-val`},Zb=[`title`],Qb={key:0,class:`pro-info`},$b={class:`pro-name`},ex={class:`pro-spec`},tx={key:1,class:`no-pro`},nx={key:0,class:`price-tag`},rx={key:1,class:`text-muted`},ix={class:`text-right`},ax={class:`table-actions`},ox=[`onClick`],sx={key:1,class:`empty-state`},cx={class:`mobile-cards`},lx=[`onClick`],ux={class:`mobile-card-header`},dx={class:`mobile-user-info`},fx={class:`user-avatar-small`},px={class:`user-name`},mx={class:`user-email`},hx={class:`mobile-card-body`},gx={class:`info-row`},_x={class:`value`},vx={class:`info-row`},yx={class:`value`},bx={class:`info-row`},xx={class:`value`},Sx={key:0,class:`info-row`},Cx={class:`value`},wx={class:`modal-card`},Tx={class:`modal-header`},Ex={class:`modal-title-area`},Dx={class:`modal-content`},Ox={class:`pro-info-grid`},kx={class:`info-group`},Ax={class:`info-group`},jx={class:`price-tag-large`},Mx={class:`info-group full-width`},Nx={key:0},Px={class:`soins-section mb-2`},Fx={class:`soins-list`},Ix={class:`soin-detail-header`},Lx={class:`frequency-badge`},Rx={class:`soin-answers`},zx={class:`answer-key`},Bx={class:`answer-val`},Vx={class:`documents-section`},Hx={class:`section-header-row`},Ux={key:0,class:`docs-grid`},Wx={class:`doc-preview`},Gx=[`href`],Kx={class:`doc-info`},qx={class:`doc-name`},Jx={class:`doc-type`},Yx={key:1,class:`no-docs-empty`},Xx=Z(L({__name:`BookingManagement`,setup(e){let t=F([]),n=F(!1),r=F(null),i=F(``),a=async()=>{let e=X.getItem(`access_token`);if(e)try{n.value=!0,i.value=``;let r=await fetch(`/api/admin/requests/summary`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});if(r.ok)t.value=(await r.json()).map(e=>({...e.request,acceptedProfessional:e.acceptedProfessional,distance:e.distance,assignmentStatus:e.assignmentStatus}));else throw Error(`chec du chargement des rservations`)}catch(e){console.error(`Failed to fetch bookings:`,e),i.value=e.message}finally{n.value=!1}},o=e=>{switch(e?.toLowerCase()){case`pending`:return`status-pending`;case`accepted`:return`status-validated`;case`confirmed`:return`status-validated`;case`cancelled`:return`status-rejected`;case`rejected`:return`status-rejected`;default:return`status-pending`}},s=e=>e?new Date(e).toLocaleDateString(`fr-FR`,{day:`2-digit`,month:`short`,year:`numeric`}):``,c=e=>e?e.substring(0,5):``;return hr(a),(e,l)=>(B(),V(`div`,jb,[i.value?(B(),V(`div`,Mb,[W(M(i.value)+` `,1),U(`button`,{onClick:l[0]||=e=>i.value=``},``)])):K(``,!0),U(`div`,Nb,[U(`div`,Pb,[U(`div`,Fb,[l[3]||=U(`h3`,null,`Rservations de Soins`,-1),U(`p`,Ib,M(t.value.length)+` demandes enregistres`,1)]),U(`button`,{class:`refresh-btn`,onClick:a,disabled:n.value},[(B(),V(`svg`,{class:j({spinning:n.value}),xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[...l[4]||=[U(`path`,{d:`M23 4v6h-6`},null,-1),U(`path`,{d:`M20.49 15a9 9 0 1 1-2.12-9.36L23 10`},null,-1)]],2)),W(` `+M(n.value?`Chargement...`:`Actualiser`),1)],8,Lb)]),U(`div`,Rb,[t.value.length>0?(B(),V(`table`,zb,[l[6]||=U(`thead`,null,[U(`tr`,null,[U(`th`,null,`Patient`),U(`th`,null,`Service`),U(`th`,null,`Date Dbut`),U(`th`,null,`Lieu`),U(`th`,null,`Professionnel`),U(`th`,null,`Montant`),U(`th`,null,`Status`),U(`th`,{class:`text-right`},`Actions`)])],-1),U(`tbody`,null,[(B(!0),V(z,null,R(t.value,e=>(B(),V(`tr`,{key:e.id,class:`pro-row`},[U(`td`,null,[U(`div`,Bb,[U(`div`,Vb,M(e.patientFirstname[0]),1),U(`div`,Hb,[U(`span`,Ub,M(e.patientCivility)+` `+M(e.patientFirstname)+` `+M(e.patientLastname),1),U(`span`,Wb,M(e.patientPhone),1)])])]),U(`td`,null,[U(`div`,Gb,[U(`span`,Kb,M(e.service?.name),1),U(`div`,qb,[(B(!0),V(z,null,R(e.requestSoins,e=>(B(),V(`span`,{key:e.id,class:`soin-mini-tag`},M(e.soin?.name),1))),128))])])]),U(`td`,null,[U(`div`,Jb,[U(`span`,Yb,M(s(e.startDate)),1),U(`span`,Xb,M(c(e.availabilityStart))+` - `+M(c(e.availabilityEnd)),1)])]),U(`td`,null,[U(`span`,{class:`address-text`,title:e.address},M(e.isIndifferent?` Indiffrent`:e.address),9,Zb)]),U(`td`,null,[e.acceptedProfessional?(B(),V(`div`,Qb,[U(`span`,$b,M(e.acceptedProfessional.name),1),U(`span`,ex,M(e.acceptedProfessional.speciality),1)])):(B(),V(`span`,tx,`Non assign`))]),U(`td`,null,[e.totalPrice?(B(),V(`span`,nx,M(e.totalPrice)+` DT`,1)):(B(),V(`span`,rx,``))]),U(`td`,null,[U(`span`,{class:j([`status-badge`,o(e.assignmentStatus||e.status)])},M(e.assignmentStatus===`PENDING`?`En attente`:e.assignmentStatus===`ACCEPTED`?`Accept`:e.status),3)]),U(`td`,ix,[U(`div`,ax,[U(`button`,{class:`action-btn view-btn`,onClick:t=>r.value=e,title:`Voir les dtails`},[...l[5]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`}),U(`circle`,{cx:`12`,cy:`12`,r:`3`})],-1)]],8,ox)])])]))),128))])])):n.value?K(``,!0):(B(),V(`div`,sx,[...l[7]||=[U(`div`,{class:`empty-icon`},``,-1),U(`p`,null,`Aucune rservation trouve.`,-1)]])),U(`div`,cx,[(B(!0),V(z,null,R(t.value,e=>(B(),V(`div`,{key:e.id,class:`mobile-booking-card`,onClick:t=>r.value=e},[U(`div`,ux,[U(`div`,dx,[U(`div`,fx,M(e.patientFirstname[0]),1),U(`div`,null,[U(`span`,px,M(e.patientCivility)+` `+M(e.patientFirstname)+` `+M(e.patientLastname),1),U(`span`,mx,M(e.patientPhone),1)])]),U(`span`,{class:j([`status-badge`,o(e.assignmentStatus||e.status)])},M(e.assignmentStatus===`PENDING`?`En attente`:e.assignmentStatus===`ACCEPTED`?`Accept`:e.status),3)]),U(`div`,hx,[U(`div`,gx,[l[8]||=U(`span`,{class:`label`},`Service:`,-1),U(`span`,_x,M(e.service?.name),1)]),U(`div`,vx,[l[9]||=U(`span`,{class:`label`},`Date:`,-1),U(`span`,yx,M(s(e.startDate)),1)]),U(`div`,bx,[l[10]||=U(`span`,{class:`label`},`Horaire:`,-1),U(`span`,xx,M(c(e.availabilityStart))+` - `+M(c(e.availabilityEnd)),1)]),e.acceptedProfessional?(B(),V(`div`,Sx,[l[11]||=U(`span`,{class:`label`},`Pro:`,-1),U(`span`,Cx,M(e.acceptedProfessional.name),1)])):K(``,!0)])],8,lx))),128))])])]),r.value?(B(),V(`div`,{key:1,class:`modal-overlay`,onClick:l[2]||=Y(e=>r.value=null,[`self`])},[U(`div`,wx,[U(`header`,Tx,[U(`div`,Ex,[U(`h2`,null,`Dtails de la demande #`+M(r.value.id),1),U(`span`,{class:j([`status-badge`,o(r.value.status)])},M(r.value.status),3)]),U(`button`,{class:`close-btn`,onClick:l[1]||=e=>r.value=null},[...l[12]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),U(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})],-1)]])]),U(`div`,Dx,[U(`div`,Ox,[U(`div`,kx,[l[17]||=U(`label`,null,`Informations Patient`,-1),U(`p`,null,[l[13]||=U(`strong`,null,`Nom:`,-1),W(` `+M(r.value.patientCivility)+` `+M(r.value.patientFirstname)+` `+M(r.value.patientLastname),1)]),U(`p`,null,[l[14]||=U(`strong`,null,`N(e) le:`,-1),W(` `+M(s(r.value.patientBirthdate)),1)]),U(`p`,null,[l[15]||=U(`strong`,null,`Tlphone:`,-1),W(` `+M(r.value.patientPhone),1)]),U(`p`,null,[l[16]||=U(`strong`,null,`Email:`,-1),W(` `+M(r.value.patientEmail),1)])]),U(`div`,Ax,[l[24]||=U(`label`,null,`Dtails du Service`,-1),U(`p`,null,[l[18]||=U(`strong`,null,`Service:`,-1),W(` `+M(r.value.service?.name),1)]),U(`p`,null,[l[19]||=U(`strong`,null,`Prix Total:`,-1),l[20]||=W(),U(`span`,jx,M(r.value.totalPrice||0)+` DT`,1)]),U(`p`,null,[l[21]||=U(`strong`,null,`Dbut:`,-1),W(` `+M(s(r.value.startDate)),1)]),U(`p`,null,[l[22]||=U(`strong`,null,`Dure:`,-1),W(` `+M(r.value.durationValue)+` jour(s) (`+M(r.value.durationMode)+`)`,1)]),U(`p`,null,[l[23]||=U(`strong`,null,`Crneau:`,-1),W(` `+M(c(r.value.availabilityStart))+` - `+M(c(r.value.availabilityEnd)),1)])]),U(`div`,Mx,[l[27]||=U(`label`,null,`Lieu des soins`,-1),U(`p`,null,[l[25]||=U(`strong`,null,`Adresse:`,-1),W(` `+M(r.value.isIndifferent?`Indiffrent`:r.value.address),1)]),r.value.addressComplement?(B(),V(`p`,Nx,[l[26]||=U(`strong`,null,`Complment:`,-1),W(` `+M(r.value.addressComplement),1)])):K(``,!0)])]),U(`div`,Px,[l[28]||=U(`h3`,null,`Soins Demands`,-1),U(`div`,Fx,[(B(!0),V(z,null,R(r.value.requestSoins,e=>(B(),V(`div`,{key:e.id,class:`soin-detail-card`},[U(`div`,Ix,[U(`h4`,null,M(e.soin?.name),1),U(`span`,Lx,M(e.frequencyCount)+` fois / `+M(e.frequencyPeriod===`day`?`jour`:e.frequencyPeriod),1)]),U(`div`,Rx,[(B(!0),V(z,null,R(e.answers,(e,t)=>(B(),V(`div`,{key:t,class:`answer-row`},[U(`span`,zx,M(t)+`:`,1),U(`span`,Bx,M(Array.isArray(e)?e.join(`, `):e),1)]))),128))])]))),128))])]),U(`div`,Vx,[U(`div`,Hx,[l[29]||=U(`h3`,null,`Ordonnances & Documents`,-1),U(`span`,{class:j([`p-status-badge`,r.value.prescriptionStatus])},` Statut: `+M(r.value.prescriptionStatus),3)]),r.value.documents&&r.value.documents.length>0?(B(),V(`div`,Ux,[(B(!0),V(z,null,R(r.value.documents,e=>(B(),V(`div`,{key:e.id,class:`document-card`},[U(`div`,Wx,[l[30]||=U(`div`,{class:`doc-icon`},``,-1),U(`a`,{href:`/api/`+e.filePath,target:`_blank`,class:`view-doc-link`},`Voir le document`,8,Gx)]),U(`div`,Kx,[U(`span`,qx,M(e.fileOriginalName),1),U(`span`,Jx,M(e.mimeType),1)])]))),128))])):(B(),V(`div`,Yx,` Aucun document joint  cette demande. `))])])])])):K(``,!0)]))}}),[[`__scopeId`,`data-v-4b0b92f7`]]),Zx={class:`sidebar-header`},Qx={class:`brand`},$x=[`src`],eS={class:`sidebar-nav`},tS=Z(L({__name:`SidebarAdmin`,props:{activeTab:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},emits:[`navigate`,`logout`,`close`],setup(e,{emit:t}){let n=t,r=e=>{n(`navigate`,e)},i=()=>{n(`logout`)};return(t,a)=>(B(),V(`aside`,{class:j([`sidebar`,{open:e.isOpen}])},[U(`div`,Zx,[U(`div`,Qx,[U(`img`,{src:Xt(Io),alt:`daricare`,class:`logo-img`},null,8,$x)]),U(`button`,{class:`mobile-close`,onClick:a[0]||=e=>n(`close`)},[...a[10]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),U(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})],-1)]])]),U(`nav`,eS,[U(`button`,{class:j([`nav-item`,{active:e.activeTab===`overview`}]),onClick:a[1]||=e=>r(`overview`)},[...a[11]||=[G(`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-57d76f6e><rect x="3" y="3" width="7" height="7" data-v-57d76f6e></rect><rect x="14" y="3" width="7" height="7" data-v-57d76f6e></rect><rect x="14" y="14" width="7" height="7" data-v-57d76f6e></rect><rect x="3" y="14" width="7" height="7" data-v-57d76f6e></rect></svg> Vue d&#39;ensemble `,2)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`verification-professional`}]),onClick:a[2]||=e=>r(`verification-professional`)},[...a[12]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2`}),U(`circle`,{cx:`9`,cy:`7`,r:`4`}),U(`polyline`,{points:`16 11 18 13 22 9`})],-1),W(` Vrification Professionnels `,-1)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`professionals`}]),onClick:a[3]||=e=>r(`professionals`)},[...a[13]||=[G(`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-57d76f6e><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" data-v-57d76f6e></path><circle cx="9" cy="7" r="4" data-v-57d76f6e></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87" data-v-57d76f6e></path><circle cx="19" cy="11" r="2" data-v-57d76f6e></circle></svg> Professionnels `,2)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`patients`}]),onClick:a[4]||=e=>r(`patients`)},[...a[14]||=[G(`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-57d76f6e><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" data-v-57d76f6e></path><circle cx="9" cy="7" r="4" data-v-57d76f6e></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87" data-v-57d76f6e></path><circle cx="19" cy="11" r="2" data-v-57d76f6e></circle></svg> Patients `,2)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`requests`}]),onClick:a[5]||=e=>r(`requests`)},[...a[15]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M22 12h-4l-3 9L9 3l-3 9H2`})],-1),W(` Demandes de soins `,-1)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`services-catalog`}]),onClick:a[6]||=e=>r(`services-catalog`)},[...a[16]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`nav-icon`},[U(`path`,{d:`M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z`}),U(`path`,{d:`M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z`})],-1),W(` Catalogue des Services `,-1)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`detailed-requests`}]),onClick:a[7]||=e=>r(`detailed-requests`)},[...a[17]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`nav-icon`},[U(`line`,{x1:`12`,y1:`1`,x2:`12`,y2:`23`}),U(`path`,{d:`M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6`})],-1),W(` Audit de Facturation `,-1)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`services-management`}]),onClick:a[8]||=e=>r(`services-management`)},[...a[18]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`nav-icon`},[U(`path`,{d:`M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z`})],-1),W(` Grer les Services `,-1)]],2),U(`button`,{class:j([`nav-item`,{active:e.activeTab===`settings`}]),onClick:a[9]||=e=>r(`settings`)},[...a[19]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`circle`,{cx:`12`,cy:`12`,r:`3`}),U(`path`,{d:`M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z`})],-1),W(` Configuration `,-1)]],2)]),U(`div`,{class:`sidebar-footer`},[U(`button`,{class:`logout-btn`,onClick:i},[...a[20]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`}),U(`polyline`,{points:`16 17 21 12 16 7`}),U(`line`,{x1:`21`,y1:`12`,x2:`9`,y2:`12`})],-1),W(` Dconnexion `,-1)]])])],2))}}),[[`__scopeId`,`data-v-57d76f6e`]]),nS={class:`configuration-management`},rS={key:0,class:`alert success`},iS={key:1,class:`alert error`},aS={class:`management-grid`},oS={class:`grid-card`},sS={class:`card-content`},cS={class:`grid-card`},lS={class:`card-content`},uS={class:`form-group`},dS={class:`form-group`},fS=[`disabled`],pS={class:`modal-content`},mS={class:`form-group`},hS={class:`form-group`},gS={class:`modal-actions`},_S=[`disabled`],vS=Z(L({__name:`Configuration`,setup(e){let t=X,n=F(!1),r=F(!1),i=F(null),a=F(null),o=F({email:``,password:``}),s=F({newPassword:``,confirmPassword:``}),c=async()=>{let e=t.getItem(`access_token`);i.value=null,a.value=null,r.value=!0;try{let t=await fetch(`/api/auth/admin/register`,{method:`POST`,headers:{accept:`*/*`,Authorization:`Bearer ${e}`,"Content-Type":`application/json`},body:JSON.stringify({email:o.value.email,password:o.value.password})});t.ok?(a.value=`Administrateur enregistr avec succs`,n.value=!1,o.value={email:``,password:``},setTimeout(()=>{a.value=null},3e3)):i.value=(await t.json().catch(()=>({}))).message||`chec de l'enregistrement`}catch(e){console.error(`Failed to register admin:`,e),i.value=`Une erreur rseau est survenue.`}finally{r.value=!1}},l=async()=>{if(s.value.newPassword!==s.value.confirmPassword){i.value=`Les mots de passe ne correspondent pas.`;return}if(s.value.newPassword.length<6){i.value=`Le mot de passe doit contenir au moins 6 caractres.`;return}let e=t.getItem(`access_token`);i.value=null,a.value=null,r.value=!0;try{let t=await fetch(`/api/auth/reset-password`,{method:`POST`,headers:{"Content-Type":`application/json`,accept:`*/*`},body:JSON.stringify({token:e,newPassword:s.value.newPassword})});if(t.ok)a.value=`Mot de passe modifi avec succs`,s.value={newPassword:``,confirmPassword:``},setTimeout(()=>{a.value=null},3e3);else{let e=await t.json().catch(()=>({}));t.status===401?i.value=`Session expire ou token invalide. Veuillez vous reconnecter.`:i.value=e.message||`chec de la modification du mot de passe`}}catch(e){console.error(`Failed to change password:`,e),i.value=`Une erreur rseau est survenue.`}finally{r.value=!1}};return(e,t)=>(B(),V(`div`,nS,[t[15]||=U(`div`,{class:`header-section`},[U(`div`,{class:`header-content`},[U(`h1`,null,`Configuration`),U(`p`,{class:`subtitle`},`Grez les paramtres de la plateforme et les administrateurs.`)])],-1),a.value?(B(),V(`div`,rS,M(a.value),1)):K(``,!0),i.value?(B(),V(`div`,iS,M(i.value),1)):K(``,!0),U(`div`,aS,[U(`div`,oS,[t[9]||=U(`div`,{class:`card-header`},[U(`h3`,null,`Gestion des Administrateurs`)],-1),U(`div`,sS,[t[8]||=U(`p`,{class:`card-desc`},`Ajoutez de nouveaux administrateurs  la plateforme.`,-1),U(`button`,{class:`add-btn`,onClick:t[0]||=e=>n.value=!0},[...t[7]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`12`,y1:`5`,x2:`12`,y2:`19`}),U(`line`,{x1:`5`,y1:`12`,x2:`19`,y2:`12`})],-1),W(` Ajouter un administrateur `,-1)]])])]),U(`div`,cS,[t[11]||=U(`div`,{class:`card-header`},[U(`h3`,null,`Scurit`)],-1),U(`div`,lS,[t[10]||=U(`p`,{class:`card-desc`},`Modifiez votre mot de passe administrateur.`,-1),U(`form`,{onSubmit:Y(l,[`prevent`]),class:`inline-form`},[U(`div`,uS,[I(U(`input`,{"onUpdate:modelValue":t[1]||=e=>s.value.newPassword=e,type:`password`,placeholder:`Nouveau mot de passe`,required:``,minlength:`6`},null,512),[[J,s.value.newPassword]])]),U(`div`,dS,[I(U(`input`,{"onUpdate:modelValue":t[2]||=e=>s.value.confirmPassword=e,type:`password`,placeholder:`Confirmer le mot de passe`,required:``,minlength:`6`},null,512),[[J,s.value.confirmPassword]])]),U(`button`,{type:`submit`,class:`submit-btn`,disabled:r.value},M(r.value?`Modification...`:`Modifier le mot de passe`),9,fS)],32)])])]),n.value?(B(),V(`div`,{key:2,class:`modal-overlay`,onClick:t[6]||=Y(e=>n.value=!1,[`self`])},[U(`div`,pS,[t[14]||=U(`h2`,null,`Nouveau Administrateur`,-1),U(`form`,{onSubmit:Y(c,[`prevent`]),class:`admin-form`},[U(`div`,mS,[t[12]||=U(`label`,null,`Email`,-1),I(U(`input`,{"onUpdate:modelValue":t[3]||=e=>o.value.email=e,type:`email`,placeholder:`admin@example.com`,required:``},null,512),[[J,o.value.email]])]),U(`div`,hS,[t[13]||=U(`label`,null,`Mot de passe`,-1),I(U(`input`,{"onUpdate:modelValue":t[4]||=e=>o.value.password=e,type:`password`,placeholder:`Mot de passe scuris`,required:``,minlength:`6`},null,512),[[J,o.value.password]])]),U(`div`,gS,[U(`button`,{type:`button`,class:`cancel-btn`,onClick:t[5]||=e=>n.value=!1},`Annuler`),U(`button`,{type:`submit`,class:`submit-btn`,disabled:r.value},M(r.value?`Enregistrement...`:`Enregistrer`),9,_S)])],32)])])):K(``,!0)]))}}),[[`__scopeId`,`data-v-41bae655`]]),yS={class:`admin-patients`},bS={key:0,class:`alert alert-error`},xS={key:1,class:`alert alert-success`},SS={class:`grid-card full-width`},CS={class:`card-header`},wS={class:`header-main`},TS={class:`subtitle`},ES={class:`header-actions`},DS={class:`search-bar`},OS=[`disabled`],kS={class:`table-wrapper admin-card`},AS={key:0,class:`admin-table`},jS={class:`user-info`},MS={class:`user-avatar-small`},NS={class:`user-details`},PS={class:`user-name`},FS={class:`user-id`},IS={class:`contact-info`},LS={class:`user-email`},RS={class:`user-phone`},zS={class:`date-val`},BS={class:`location-cell`},VS=[`title`],HS=[`onClick`],US={class:`text-right`},WS={class:`table-actions`},GS=[`onClick`],KS=[`onClick`,`title`],qS={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},JS={key:1,xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},YS={key:1,class:`empty-state`},XS={class:`modal-card`},ZS={class:`modal-header`},QS={class:`modal-title-area`},$S={class:`modal-content`},eC={class:`pro-info-grid`},tC={class:`info-group`},nC={class:`info-group`},rC={class:`info-group full-width`},iC={class:`address-box`},aC={class:`modal-footer`},oC=Z(L({__name:`AdminPatients`,setup(e){let t=F([]),n=F(!1),r=F(``),i=F(``),a=F(``),o=F(null),s=async()=>{let e=X.getItem(`access_token`);if(e)try{n.value=!0,i.value=``;let r=await fetch(`/api/patients`,{headers:{Authorization:`Bearer ${e}`,accept:`application/json`}});if(r.ok)t.value=await r.json();else throw Error(`chec du chargement des patients`)}catch(e){console.error(`Failed to fetch patients:`,e),i.value=e.message}finally{n.value=!1}},c=async e=>{let t=X.getItem(`access_token`);if(t&&confirm(`Voulez-vous vraiment ${e.isBanned?`dbloquer`:`bloquer`} ce patient ?`))try{if((await fetch(`/api/admin/users/${e.id}/ban`,{method:`PATCH`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`,accept:`*/*`},body:JSON.stringify({ban:!e.isBanned})})).ok)e.isBanned=!e.isBanned,a.value=`Patient ${e.isBanned?`bloqu`:`dbloqu`} avec succs.`,setTimeout(()=>a.value=``,3e3);else throw Error(`Opration choue. L'ID du patient correspond peut-tre  une table diffrente de celle des utilisateurs.`)}catch(e){console.error(`Ban error:`,e),i.value=e.message}},l=(e,t)=>{e&&t&&window.open(`https://www.google.com/maps?q=${e},${t}`,`_blank`)},u=q(()=>{if(!r.value)return t.value;let e=r.value.toLowerCase();return t.value.filter(t=>t.firstname?.toLowerCase().includes(e)||t.lastname?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)||t.phone?.includes(e))}),d=e=>e?new Date(e).toLocaleDateString(`fr-FR`,{day:`2-digit`,month:`short`,year:`numeric`}):``;return hr(s),(e,f)=>(B(),V(`div`,yS,[i.value?(B(),V(`div`,bS,[W(M(i.value)+` `,1),U(`button`,{onClick:f[0]||=e=>i.value=``},``)])):K(``,!0),a.value?(B(),V(`div`,xS,[W(M(a.value)+` `,1),U(`button`,{onClick:f[1]||=e=>a.value=``},``)])):K(``,!0),U(`div`,SS,[U(`div`,CS,[U(`div`,wS,[f[7]||=U(`h3`,null,`Gestion des Patients`,-1),U(`p`,TS,M(t.value.length)+` patients enregistrs`,1)]),U(`div`,ES,[U(`div`,DS,[f[8]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`circle`,{cx:`11`,cy:`11`,r:`8`}),U(`line`,{x1:`21`,y1:`21`,x2:`16.65`,y2:`16.65`})],-1),I(U(`input`,{type:`text`,"onUpdate:modelValue":f[2]||=e=>r.value=e,placeholder:`Rechercher un patient...`},null,512),[[J,r.value]])]),U(`button`,{class:`refresh-btn`,onClick:s,disabled:n.value},[(B(),V(`svg`,{class:j({spinning:n.value}),xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[...f[9]||=[U(`path`,{d:`M23 4v6h-6`},null,-1),U(`path`,{d:`M20.49 15a9 9 0 1 1-2.12-9.36L23 10`},null,-1)]],2)),W(` `+M(n.value?`Chargement...`:`Actualiser`),1)],8,OS)])]),U(`div`,kS,[u.value.length>0?(B(),V(`table`,AS,[f[13]||=U(`thead`,null,[U(`tr`,null,[U(`th`,null,`Patient`),U(`th`,null,`Contact`),U(`th`,null,`Date d'inscription`),U(`th`,null,`Localisation`),U(`th`,null,`Statut`),U(`th`,{class:`text-right`},`Actions`)])],-1),U(`tbody`,null,[(B(!0),V(z,null,R(u.value,e=>(B(),V(`tr`,{key:e.id,class:`pro-row`},[U(`td`,null,[U(`div`,jS,[U(`div`,MS,M(e.firstname?.[0]||`?`),1),U(`div`,NS,[U(`span`,PS,M(e.civility)+` `+M(e.firstname)+` `+M(e.lastname),1),U(`span`,FS,`ID: #`+M(e.id),1)])])]),U(`td`,null,[U(`div`,IS,[U(`span`,LS,M(e.email),1),U(`span`,RS,M(e.phone||`N/A`),1)])]),U(`td`,null,[U(`span`,zS,M(d(e.createdAt)),1)]),U(`td`,null,[U(`div`,BS,[U(`span`,{class:`address-text`,title:e.address||``},M(e.address||``),9,VS),e.latitude&&e.longitude?(B(),V(`button`,{key:0,class:`mini-map-btn`,onClick:Y(t=>l(e.latitude,e.longitude),[`stop`]),title:`Voir sur Maps`},`  `,8,HS)):K(``,!0)])]),U(`td`,null,[U(`span`,{class:j([`status-badge`,e.isBanned?`status-rejected`:`status-validated`])},M(e.isBanned?`Bloqu`:`Actif`),3)]),U(`td`,US,[U(`div`,WS,[U(`button`,{class:`action-btn view-btn`,onClick:t=>o.value=e,title:`Voir dtails`},[...f[10]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`}),U(`circle`,{cx:`12`,cy:`12`,r:`3`})],-1)]],8,GS),U(`button`,{class:j([`action-btn ban-btn`,{unban:e.isBanned}]),onClick:t=>c(e),title:e.isBanned?`Dbloquer`:`Bloquer`},[e.isBanned?(B(),V(`svg`,JS,[...f[12]||=[U(`path`,{d:`M22 11.08V12a10 10 0 1 1-5.93-9.14`},null,-1),U(`polyline`,{points:`22 4 12 14.01 9 11.01`},null,-1)]])):(B(),V(`svg`,qS,[...f[11]||=[U(`circle`,{cx:`12`,cy:`12`,r:`10`},null,-1),U(`line`,{x1:`4.93`,y1:`4.93`,x2:`19.07`,y2:`19.07`},null,-1)]]))],10,KS)])])]))),128))])])):n.value?K(``,!0):(B(),V(`div`,YS,[...f[14]||=[U(`div`,{class:`empty-icon`},``,-1),U(`p`,null,`Aucun patient trouv.`,-1)]]))])]),o.value?(B(),V(`div`,{key:2,class:`modal-overlay`,onClick:f[6]||=Y(e=>o.value=null,[`self`])},[U(`div`,XS,[U(`header`,ZS,[U(`div`,QS,[U(`h2`,null,`Fiche Patient #`+M(o.value.id),1),U(`span`,{class:j([`status-badge`,o.value.isBanned?`status-rejected`:`status-validated`])},M(o.value.isBanned?`Compte bloqu`:`Compte actif`),3)]),U(`button`,{class:`close-btn`,onClick:f[3]||=e=>o.value=null},[...f[15]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),U(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})],-1)]])]),U(`div`,$S,[U(`div`,eC,[U(`div`,tC,[f[20]||=U(`label`,null,`Identit`,-1),U(`p`,null,[f[16]||=U(`strong`,null,`Civilit:`,-1),W(` `+M(o.value.civility),1)]),U(`p`,null,[f[17]||=U(`strong`,null,`Prnom:`,-1),W(` `+M(o.value.firstname),1)]),U(`p`,null,[f[18]||=U(`strong`,null,`Nom:`,-1),W(` `+M(o.value.lastname),1)]),U(`p`,null,[f[19]||=U(`strong`,null,`Date de naissance:`,-1),W(` `+M(d(o.value.birthdate)),1)])]),U(`div`,nC,[f[24]||=U(`label`,null,`Coordonnes`,-1),U(`p`,null,[f[21]||=U(`strong`,null,`Email:`,-1),W(` `+M(o.value.email),1)]),U(`p`,null,[f[22]||=U(`strong`,null,`Tlphone:`,-1),W(` `+M(o.value.phone||`Non renseign`),1)]),U(`p`,null,[f[23]||=U(`strong`,null,`Inscription:`,-1),W(` `+M(d(o.value.createdAt)),1)])]),U(`div`,rC,[f[26]||=U(`label`,null,`Localisation`,-1),U(`div`,iC,[U(`p`,null,[f[25]||=U(`strong`,null,`Adresse:`,-1),W(` `+M(o.value.address||`Non spcifie`),1)]),o.value.latitude&&o.value.longitude?(B(),V(`button`,{key:0,class:`map-link-btn`,onClick:f[4]||=e=>l(o.value.latitude,o.value.longitude)},`  Voir sur Google Maps  `)):K(``,!0)])])])]),U(`footer`,aC,[U(`button`,{class:j([`footer-ban-btn`,{"is-banned":o.value.isBanned}]),onClick:f[5]||=e=>c(o.value)},M(o.value.isBanned?`Dbloquer le compte patient`:`Bloquer le compte patient`),3)])])])):K(``,!0)]))}}),[[`__scopeId`,`data-v-d924197c`]]),sC={class:`detailed-requests-container`},cC={class:`page-header`},lC=[`disabled`],uC={class:`stats-grid`},dC={class:`stat-info`},fC={class:`stat-label`},pC={class:`stat-value`},mC={class:`filters-bar`},hC={class:`search-box`},gC={class:`filter-group`},_C={key:0,class:`loading-state`},vC={key:1,class:`requests-list`},yC={class:`card-header`},bC={class:`req-id`},xC={class:`req-date`},SC={class:`card-body`},CC={class:`info-section main-info`},wC={class:`service-name`},TC={class:`total-price`},EC={class:`details-grid`},DC={class:`detail-col`},OC={class:`person-info`},kC={class:`name`},AC={class:`sub`},jC={class:`sub`},MC={class:`address-tiny`},NC={class:`detail-col`},PC={key:0,class:`person-info pro`},FC={class:`name`},IC={class:`sub speciality`},LC={class:`sub`},RC={class:`pro-revenue-tool`},zC=[`onClick`],BC={key:1,class:`computed-total`},VC=[`onClick`],HC={key:1,class:`no-pro`},UC={key:2,class:`distance-info`},WC={class:`detail-col assignments`},GC={class:`assignments-mini-list`},KC={class:`assign-name`},qC={class:`assign-dist`},JC={key:0,class:`empty-assign`},YC={key:2,class:`empty-audit`},XC=Z(L({__name:`DetailedRequests`,setup(e){let t=F([]),n=F(!0),r=F(``),i=F(`all`),a=F({}),o=e=>{let n=t.value.filter(t=>t.acceptedProfessional?.id===e).reduce((e,t)=>e+(t.totalPrice||0),0);a.value[e]=n},s=async()=>{let e=X.getItem(`access_token`);if(e)try{n.value=!0;let r=await fetch(`/api/admin/requests/detailed`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});r.ok&&(t.value=await r.json())}catch(e){console.error(`Failed to fetch detailed requests:`,e)}finally{n.value=!1}};hr(s);let c=q(()=>t.value.filter(e=>{let t=e.patient?.name?.toLowerCase().includes(r.value.toLowerCase())||e.acceptedProfessional?.name?.toLowerCase().includes(r.value.toLowerCase())||e.service?.name?.toLowerCase().includes(r.value.toLowerCase()),n=i.value===`all`||e.status?.toUpperCase()===i.value.toUpperCase()||i.value===`COMPLETED`&&e.status?.toUpperCase()===`DONE`;return t&&n})),l=q(()=>{let e=t.value.reduce((e,t)=>e+(t.totalPrice||0),0),n=t.value.length,r=n>0?e/n:0;return[{label:`Revenu Total`,value:`${e.toLocaleString()} DT`,icon:``,color:`#10b981`},{label:`Demandes Totales`,value:n,icon:``,color:`#2b69ad`},{label:`Moyenne / Demande`,value:`${r.toFixed(2)} DT`,icon:``,color:`#f59e0b`}]}),u=e=>new Date(e).toLocaleDateString(`fr-FR`,{day:`2-digit`,month:`short`,year:`numeric`,hour:`2-digit`,minute:`2-digit`}),d=e=>{switch(e?.toUpperCase()){case`ACCEPTED`:return`Accept`;case`DONE`:case`COMPLETED`:return`Termin`;case`PENDING`:return`En attente`;case`REJECTED`:return`Rejet`;case`CANCELLED`:return`Annul`;case`VALIDATED`:return`Valid`;default:return e||`N/A`}},f=e=>{switch(e?.toUpperCase()){case`ACCEPTED`:return`status-accepted`;case`DONE`:case`COMPLETED`:return`status-completed`;case`PENDING`:return`status-pending`;case`REJECTED`:return`status-rejected`;case`CANCELLED`:return`status-cancelled`;default:return``}};return(e,t)=>(B(),V(`div`,sC,[U(`header`,cC,[t[3]||=U(`div`,{class:`header-titles`},[U(`h1`,null,`Audit de Facturation`),U(`p`,null,`Analyse dtaille des revenus et des affectations professionnelles`)],-1),U(`button`,{class:`btn-refresh`,onClick:s,disabled:n.value},[U(`span`,{class:j({spinning:n.value})},``,2),t[2]||=W(` Actualiser les donnes `,-1)],8,lC)]),U(`div`,uC,[(B(!0),V(z,null,R(l.value,e=>(B(),V(`div`,{key:e.label,class:`stat-card`},[U(`div`,{class:`stat-icon`,style:ue({backgroundColor:e.color+`15`,color:e.color})},M(e.icon),5),U(`div`,dC,[U(`span`,fC,M(e.label),1),U(`span`,pC,M(e.value),1)])]))),128))]),U(`div`,mC,[U(`div`,hC,[t[4]||=U(`span`,{class:`search-icon`},``,-1),I(U(`input`,{"onUpdate:modelValue":t[0]||=e=>r.value=e,type:`text`,placeholder:`Rechercher un patient, pro ou service...`},null,512),[[J,r.value]])]),U(`div`,gC,[I(U(`select`,{"onUpdate:modelValue":t[1]||=e=>i.value=e,class:`status-select`},[...t[5]||=[G(`<option value="all" data-v-6acf8879>Tous les statuts</option><option value="ACCEPTED" data-v-6acf8879>Accept</option><option value="COMPLETED" data-v-6acf8879>Termin</option><option value="PENDING" data-v-6acf8879>En attente</option><option value="REJECTED" data-v-6acf8879>Rejet</option><option value="CANCELLED" data-v-6acf8879>Annul</option>`,6)]],512),[[yo,i.value]])])]),n.value?(B(),V(`div`,_C,[...t[6]||=[U(`div`,{class:`loader`},null,-1),U(`p`,null,`Chargement de l'audit...`,-1)]])):c.value.length>0?(B(),V(`div`,vC,[(B(!0),V(z,null,R(c.value,e=>(B(),V(`div`,{key:e.requestId,class:`request-audit-card`},[U(`div`,yC,[U(`div`,bC,`#`+M(e.requestId),1),U(`div`,xC,M(u(e.createdAt)),1),U(`div`,{class:j([`status-pill`,f(e.status)])},M(d(e.status)),3)]),U(`div`,SC,[U(`div`,CC,[U(`div`,wC,M(e.service?.name),1),U(`div`,TC,M(e.totalPrice)+` DT`,1)]),U(`div`,EC,[U(`div`,DC,[t[7]||=U(`label`,null,`Patient`,-1),U(`div`,OC,[U(`span`,kC,M(e.patient?.name),1),U(`span`,AC,M(e.patient?.email),1),U(`span`,jC,M(e.patient?.phone),1)]),U(`div`,MC,M(e.patient?.address),1)]),U(`div`,NC,[t[10]||=U(`label`,null,`Professionnel Assign`,-1),e.acceptedProfessional?(B(),V(`div`,PC,[U(`span`,FC,M(e.acceptedProfessional.name),1),U(`span`,IC,M(e.acceptedProfessional.speciality),1),U(`span`,LC,M(e.acceptedProfessional.email),1),U(`div`,RC,[a.value[e.acceptedProfessional.id]===void 0?(B(),V(`button`,{key:0,class:`btn-calc-total`,onClick:t=>o(e.acceptedProfessional.id)},`  Somme des revenus `,8,zC)):(B(),V(`div`,BC,[t[8]||=W(` Total Pro: `,-1),U(`strong`,null,M(a.value[e.acceptedProfessional.id]?.toLocaleString())+` DT`,1),U(`button`,{class:`btn-reset-calc`,title:`Rinitialiser`,onClick:t=>delete a.value[e.acceptedProfessional.id]},``,8,VC)]))])])):(B(),V(`div`,HC,`Aucun professionnel assign`)),e.distance===void 0?K(``,!0):(B(),V(`div`,UC,[t[9]||=W(`  Distance: `,-1),U(`strong`,null,M(e.distance)+`km`,1)]))]),U(`div`,WC,[U(`label`,null,`Historique des Assignations (`+M(e.allAssignments?.length||0)+`)`,1),U(`div`,GC,[(B(!0),V(z,null,R(e.allAssignments,(e,t)=>(B(),V(`div`,{key:t,class:`assign-item`},[U(`span`,KC,M(e.professionalName),1),U(`span`,qC,M(e.distance)+`km`,1),U(`span`,{class:j([`assign-status`,e.status?.toLowerCase()])},M(d(e.status)),3)]))),128)),e.allAssignments?.length?K(``,!0):(B(),V(`div`,JC,`Aucune assignation`))])])])])]))),128))])):(B(),V(`div`,YC,[...t[11]||=[U(`div`,{class:`empty-icon`},``,-1),U(`h3`,null,`Aucune donne trouve`,-1),U(`p`,null,`Ajustez vos filtres ou effectuez une nouvelle recherche.`,-1)]]))]))}}),[[`__scopeId`,`data-v-6acf8879`]]),ZC={class:`admin-layout`},QC={class:`main-content`},$C={class:`mobile-header`},ew={class:`mobile-brand`},tw=[`src`],nw={class:`dashboard-grid`},rw={key:0,class:`stats-container`},iw={class:`stat-header`},aw={class:`stat-label`},ow={class:`stat-body`},sw={class:`stat-value`},cw={key:1,class:`grid-card full-width`},lw={class:`card-header`},uw={class:`header-main`},dw={class:`subtitle`},fw=[`disabled`],pw={class:`table-wrapper admin-card`},mw={key:0,class:`admin-table`},hw={class:`user-info`},gw={class:`user-avatar-small`},_w={class:`user-details`},vw={class:`user-name`},yw={class:`user-email`},bw={class:`spec-badge`},xw={class:`doc-stacks`},Sw={key:0,class:`doc-count`},Cw={key:1,class:`no-docs`},ww={class:`text-right`},Tw={class:`table-actions`},Ew=[`onClick`,`title`],Dw={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},Ow={key:1,xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},kw=[`onClick`],Aw={key:1,class:`empty-state`},jw={class:`mobile-cards`},Mw=[`onClick`],Nw={class:`mobile-card-header`},Pw={class:`mobile-user-info`},Fw={class:`user-avatar-small`},Iw={class:`user-name`},Lw={class:`user-email`},Rw={class:`mobile-card-body`},zw={class:`info-row`},Bw={class:`value`},Vw={class:`info-row`},Hw={class:`value`},Uw={class:`info-row`},Ww={class:`value doc-count-mobile`},Gw={class:`info-row`},Kw={class:`modal-card`},qw={class:`modal-header`},Jw={class:`modal-title-area`},Yw={class:`modal-content`},Xw={class:`pro-info-grid`},Zw={class:`info-group`},Qw={class:`info-group`},$w={class:`info-group full-width`},eT={class:`documents-section`},tT={key:0,class:`docs-grid`},nT={class:`doc-preview`},rT={class:`doc-icon`},iT={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`32`,height:`32`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},aT={key:1,xmlns:`http://www.w3.org/2000/svg`,width:`32`,height:`32`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},oT=[`href`],sT={class:`doc-info`},cT={class:`doc-type`},lT={class:`doc-desc`},uT={key:0,xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},dT={key:1,class:`no-docs-empty`},fT={key:10,class:`content-grid`},pT={class:`grid-card main-area`},mT={class:`card-header-simple`},hT={key:0,class:`mini-loader-box`},gT={key:1,class:`recent-requests-table`},_T={class:`patient-name-mini`},vT={class:`service-pill-mini`},yT={class:`date-text-mini`},bT={key:2,class:`empty-state-mini`},xT={class:`grid-card side-area`},ST={key:0,class:`mini-loader-box`},CT={key:1,class:`top-services-list`},wT={class:`service-info-mini`},TT={class:`service-name-mini`},ET={class:`service-count-mini`},DT={class:`service-revenue-mini`},OT={key:2,class:`empty-state-mini`},kT={class:`quick-actions-section`},AT={class:`quick-actions`},jT=Z(L({__name:`Dashboaed`,emits:[`navigate`],setup(e,{emit:t}){let n=X,r=t,i=F(`overview`),a=F([]),o=q(()=>a.value.filter(e=>e.status!==`PENDING`)),s=F(!1),c=F(null),l=F(!1),u=F(null),d=F(!1),f=q(()=>{if(!u.value)return[{label:`Professionnels`,value:`...`,trend:``,icon:`users`},{label:`Demandes`,value:`...`,trend:``,icon:`clock`},{label:`Vrifications`,value:`...`,trend:``,icon:`check-circle`},{label:`Revenus (HT)`,value:`...`,trend:``,icon:`trending-up`}];let e=u.value.summary;return[{label:`Professionnels`,value:e.totalProfessionals.toString(),trend:`+${e.totalProfessionals}`,icon:`users`},{label:`Demandes`,value:e.totalRequests.toString(),trend:``,icon:`file-text`},{label:`Vrifications`,value:e.pendingProfessionals.toString(),trend:e.pendingProfessionals>0?`Action requise`:` jour`,icon:`check-circle`},{label:`Revenus (HT)`,value:`${e.totalRevenue.toLocaleString()} DT`,trend:``,icon:`trending-up`}]}),p=async()=>{let e=X.getItem(`access_token`);if(e)try{d.value=!0;let t=await fetch(`/api/admin/dashboard/stats`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});t.ok&&(u.value=await t.json())}catch(e){console.error(`Failed to fetch dashboard stats:`,e)}finally{d.value=!1}},m=async()=>{let e=X.getItem(`access_token`);if(e)try{s.value=!0;let t=await fetch(`/api/auth/professionals/documents`,{headers:{Authorization:`Bearer ${e}`,accept:`*/*`}});t.ok&&(a.value=await t.json())}catch(e){console.error(`Failed to fetch professionals:`,e)}finally{s.value=!1}};hr(()=>{i.value===`verification-professional`?m():i.value===`overview`&&p()}),Ln(i,e=>{e===`verification-professional`||e===`professionals`?m():e===`overview`&&p()});let h=()=>{n.clear(),sessionStorage.clear(),r(`navigate`,`landing`)},g=async(e,t)=>{let n=X.getItem(`access_token`);if(n)try{(await fetch(`/api/admin/users/${e}/ban`,{method:`PATCH`,headers:{Authorization:`Bearer ${n}`,"Content-Type":`application/json`,accept:`*/*`},body:JSON.stringify({ban:!t})})).ok?await m():console.error(`Failed to toggle ban status`)}catch(e){console.error(`Error toggling ban status:`,e)}},_=e=>{switch(e){case`VALIDATED`:return`status-validated`;case`PENDING`:return`status-pending`;case`REJECTED`:return`status-rejected`;default:return``}};return(e,t)=>(B(),V(`div`,ZC,[Xi(tS,{activeTab:i.value,isOpen:l.value,onNavigate:t[0]||=e=>{i.value=e,l.value=!1},onLogout:h,onClose:t[1]||=e=>l.value=!1},null,8,[`activeTab`,`isOpen`]),U(`main`,QC,[U(`header`,$C,[U(`div`,ew,[U(`img`,{src:Xt(Io),alt:`daricare`,class:`mobile-logo-img`},null,8,tw)]),U(`button`,{class:`menu-toggle`,onClick:t[2]||=e=>l.value=!0},[...t[8]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`3`,y1:`12`,x2:`21`,y2:`12`}),U(`line`,{x1:`3`,y1:`6`,x2:`21`,y2:`6`}),U(`line`,{x1:`3`,y1:`18`,x2:`21`,y2:`18`})],-1)]])]),U(`div`,nw,[i.value===`overview`?(B(),V(`div`,rw,[(B(!0),V(z,null,R(f.value,e=>(B(),V(`div`,{key:e.label,class:`stat-card`},[U(`div`,iw,[U(`span`,aw,M(e.label),1),U(`span`,{class:j([`stat-trend`,e.trend.startsWith(`+`)?`up`:`down`])},M(e.trend),3)]),U(`div`,ow,[U(`span`,sw,M(e.value),1)])]))),128))])):K(``,!0),i.value===`professionals`?(B(),V(`div`,cw,[U(`div`,lw,[U(`div`,uw,[t[9]||=U(`h3`,null,`Liste des Professionnels`,-1),U(`p`,dw,M(o.value.length)+` professionnels enregistrs`,1)]),U(`button`,{class:`refresh-btn`,onClick:m,disabled:s.value},[(B(),V(`svg`,{class:j({spinning:s.value}),xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[...t[10]||=[U(`path`,{d:`M23 4v6h-6`},null,-1),U(`path`,{d:`M20.49 15a9 9 0 1 1-2.12-9.36L23 10`},null,-1)]],2)),W(` `+M(s.value?`Chargement...`:`Actualiser`),1)],8,fw)]),U(`div`,pw,[o.value.length>0?(B(),V(`table`,mw,[t[14]||=U(`thead`,null,[U(`tr`,null,[U(`th`,null,`Professionnel`),U(`th`,null,`Spcialit`),U(`th`,null,`Ville`),U(`th`,null,`Documents`),U(`th`,null,`Statut`),U(`th`,null,`Ban`),U(`th`,{class:`text-right`},`Actions`)])],-1),U(`tbody`,null,[(B(!0),V(z,null,R(o.value,e=>(B(),V(`tr`,{key:e.id,class:`pro-row`},[U(`td`,null,[U(`div`,hw,[U(`div`,gw,M(e.name[0]),1),U(`div`,_w,[U(`span`,vw,M(e.name),1),U(`span`,yw,M(e.email),1)])])]),U(`td`,null,[U(`span`,bw,M(e.speciality||`N/A`),1)]),U(`td`,null,M(e.city||``),1),U(`td`,null,[U(`div`,xw,[e.documents?.length>0?(B(),V(`span`,Sw,M(e.documents.length)+` document(s) `,1)):(B(),V(`span`,Cw,`Aucun document`))])]),U(`td`,null,[U(`span`,{class:j([`status-badge`,_(e.status)])},M(e.status===`PENDING`?`En attente`:e.status),3)]),U(`td`,null,[U(`span`,{class:j([`ban-badge`,e.ban?`banned`:`active`])},M(e.ban?`Banni`:`Actif`),3)]),U(`td`,ww,[U(`div`,Tw,[U(`button`,{class:j([`action-btn`,e.ban?`unban-btn`:`ban-btn`]),onClick:t=>g(e.id,e.ban),title:e.ban?`Dbannir`:`Bannir`},[e.ban?(B(),V(`svg`,Ow,[...t[12]||=[U(`path`,{d:`M22 11.08V12a10 10 0 1 1-5.93-9.14`},null,-1),U(`polyline`,{points:`22 4 12 14.01 9 11.01`},null,-1)]])):(B(),V(`svg`,Dw,[...t[11]||=[U(`circle`,{cx:`12`,cy:`12`,r:`10`},null,-1),U(`line`,{x1:`4.93`,y1:`4.93`,x2:`19.07`,y2:`19.07`},null,-1)]]))],10,Ew),U(`button`,{class:`action-btn view-btn`,onClick:t=>c.value=e,title:`Voir les dtails`},[...t[13]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`}),U(`circle`,{cx:`12`,cy:`12`,r:`3`})],-1)]],8,kw)])])]))),128))])])):s.value?K(``,!0):(B(),V(`div`,Aw,[...t[15]||=[U(`div`,{class:`empty-icon`},``,-1),U(`p`,null,`Aucun professionnel enregistr.`,-1)]])),U(`div`,jw,[(B(!0),V(z,null,R(o.value,e=>(B(),V(`div`,{key:e.id,class:`mobile-pro-card`,onClick:t=>c.value=e},[U(`div`,Nw,[U(`div`,Pw,[U(`div`,Fw,M(e.name[0]),1),U(`div`,null,[U(`span`,Iw,M(e.name),1),U(`span`,Lw,M(e.email),1)])]),U(`span`,{class:j([`status-badge`,_(e.status)])},M(e.status===`PENDING`?`En attente`:e.status),3)]),U(`div`,Rw,[U(`div`,zw,[t[16]||=U(`span`,{class:`label`},`Spcialit:`,-1),U(`span`,Bw,M(e.speciality||`N/A`),1)]),U(`div`,Vw,[t[17]||=U(`span`,{class:`label`},`Ville:`,-1),U(`span`,Hw,M(e.city||``),1)]),U(`div`,Uw,[t[18]||=U(`span`,{class:`label`},`Documents:`,-1),U(`span`,Ww,M(e.documents?.length||0)+` docs `,1)]),U(`div`,Gw,[t[19]||=U(`span`,{class:`label`},`Status:`,-1),U(`span`,{class:j([`ban-badge`,e.ban?`banned`:`active`])},M(e.ban?`Banni`:`Actif`),3)])])],8,Mw))),128))])])])):K(``,!0),i.value===`verification-professional`?(B(),H(Tv,{key:2})):K(``,!0),i.value===`services-catalog`?(B(),H(Ab,{key:3})):K(``,!0),i.value===`services-management`?(B(),H(Ky,{key:4})):K(``,!0),i.value===`patients`?(B(),H(oC,{key:5})):K(``,!0),i.value===`requests`?(B(),H(Xx,{key:6})):K(``,!0),i.value===`detailed-requests`?(B(),H(XC,{key:7})):K(``,!0),i.value===`settings`?(B(),H(vS,{key:8})):K(``,!0),c.value&&i.value===`professionals`?(B(),V(`div`,{key:9,class:`modal-overlay`,onClick:t[4]||=Y(e=>c.value=null,[`self`])},[U(`div`,Kw,[U(`header`,qw,[U(`div`,Jw,[U(`h2`,null,`Profil de `+M(c.value.name),1),U(`span`,{class:j([`status-badge`,_(c.value.status)])},M(c.value.status),3)]),U(`button`,{class:`close-btn`,onClick:t[3]||=e=>c.value=null},[...t[20]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),U(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})],-1)]])]),U(`div`,Yw,[U(`div`,Xw,[U(`div`,Zw,[t[24]||=U(`label`,null,`Informations Personnelles`,-1),U(`p`,null,[t[21]||=U(`strong`,null,`Email:`,-1),W(` `+M(c.value.email),1)]),U(`p`,null,[t[22]||=U(`strong`,null,`Tlphone:`,-1),W(` `+M(c.value.phone||c.value.personalPhone||`N/A`),1)]),U(`p`,null,[t[23]||=U(`strong`,null,`CIN:`,-1),W(` `+M(c.value.cin||`N/A`),1)])]),U(`div`,Qw,[t[28]||=U(`label`,null,`Expertise Professionnelle`,-1),U(`p`,null,[t[25]||=U(`strong`,null,`Spcialit:`,-1),W(` `+M(c.value.speciality),1)]),U(`p`,null,[t[26]||=U(`strong`,null,`Exprience:`,-1),W(` `+M(c.value.yearsOfExperience)+` ans`,1)]),U(`p`,null,[t[27]||=U(`strong`,null,`Numro ADELI/RPPS:`,-1),W(` `+M(c.value.adeliRppsNumber||`N/A`),1)])]),U(`div`,$w,[t[30]||=U(`label`,null,`Localisation`,-1),U(`p`,null,[t[29]||=U(`strong`,null,`Adresse:`,-1),W(` `+M(c.value.professionalAddress||`N/A`)+`, `+M(c.value.city||`N/A`),1)])])]),U(`div`,eT,[t[34]||=U(`h3`,null,`Documents Justificatifs`,-1),c.value.documents&&c.value.documents.length>0?(B(),V(`div`,tT,[(B(!0),V(z,null,R(c.value.documents,e=>(B(),V(`div`,{key:e.id,class:`document-card`},[U(`div`,nT,[U(`div`,rT,[e.type===`ID_CARD`?(B(),V(`svg`,iT,[...t[31]||=[U(`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2`},null,-1),U(`circle`,{cx:`9`,cy:`7`,r:`4`},null,-1),U(`path`,{d:`M23 21v-2a4 4 0 0 0-3-3.87`},null,-1),U(`circle`,{cx:`19`,cy:`11`,r:`2`},null,-1)]])):(B(),V(`svg`,aT,[...t[32]||=[G(`<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-3572569f></path><polyline points="14 2 14 8 20 8" data-v-3572569f></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-3572569f></line><line x1="16" y1="17" x2="8" y2="17" data-v-3572569f></line><polyline points="10 9 9 9 8 9" data-v-3572569f></polyline>`,5)]]))]),U(`a`,{href:`/api/`+e.filePath,target:`_blank`,class:`view-doc-link`},`Ouvrir le document`,8,oT)]),U(`div`,sT,[U(`span`,cT,M(e.type),1),U(`p`,lT,M(e.description),1),U(`div`,{class:j([`doc-status`,{verified:e.verified}])},[e.verified?(B(),V(`svg`,uT,[...t[33]||=[U(`polyline`,{points:`20 6 9 17 4 12`},null,-1)]])):K(``,!0),W(` `+M(e.verified?`Vrifi`:`Non vrifi`),1)],2)])]))),128))])):(B(),V(`div`,dT,` Aucun document soumis. `))])])])])):K(``,!0),i.value===`overview`?(B(),V(`div`,fT,[U(`div`,pT,[U(`div`,mT,[t[35]||=U(`h3`,null,`Demandes Rcentes`,-1),U(`button`,{class:`view-all-btn`,onClick:t[5]||=e=>i.value=`requests`},`Voir tout`)]),d.value?(B(),V(`div`,hT,[...t[36]||=[U(`div`,{class:`mini-spinner`},null,-1),U(`p`,null,`Chargement des demandes...`,-1)]])):u.value?.recentRequests?.length?(B(),V(`div`,gT,[U(`table`,null,[t[37]||=U(`thead`,null,[U(`tr`,null,[U(`th`,null,`Patient`),U(`th`,null,`Service`),U(`th`,null,`Date`),U(`th`,null,`Statut`)])],-1),U(`tbody`,null,[(B(!0),V(z,null,R(u.value.recentRequests,e=>(B(),V(`tr`,{key:e.id},[U(`td`,null,[U(`div`,_T,M(e.patientName),1)]),U(`td`,null,[U(`span`,vT,M(e.service),1)]),U(`td`,null,[U(`span`,yT,M(new Date(e.date).toLocaleDateString()),1)]),U(`td`,null,[U(`span`,{class:j([`status-dot-badge`,e.status])},M(e.status),3)])]))),128))])])])):(B(),V(`div`,bT,[...t[38]||=[U(`p`,null,`Aucune demande rcente.`,-1)]]))]),U(`div`,xT,[t[44]||=U(`div`,{class:`card-header-simple`},[U(`h3`,null,`Services Populaires`)],-1),d.value?(B(),V(`div`,ST,[...t[39]||=[U(`div`,{class:`mini-spinner`},null,-1)]])):u.value?.topServices?.length?(B(),V(`div`,CT,[(B(!0),V(z,null,R(u.value.topServices,e=>(B(),V(`div`,{key:e.name,class:`service-stat-item`},[U(`div`,wT,[U(`span`,TT,M(e.name),1),U(`span`,ET,M(e.count)+` demandes`,1)]),U(`div`,DT,M(e.revenue.toLocaleString())+` DT`,1)]))),128))])):(B(),V(`div`,OT,[...t[40]||=[U(`p`,null,`Donnes indisponibles.`,-1)]])),U(`div`,kT,[t[43]||=U(`h3`,null,`Actions Rapide`,-1),U(`div`,AT,[U(`button`,{class:`action-tile`,onClick:t[6]||=e=>i.value=`verification-professional`},[...t[41]||=[G(`<div class="tile-icon verify-icon" data-v-3572569f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" data-v-3572569f><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" data-v-3572569f></path><circle cx="9" cy="7" r="4" data-v-3572569f></circle><polyline points="16 11 18 13 22 9" data-v-3572569f></polyline></svg></div><div class="tile-content" data-v-3572569f><span class="tile-title" data-v-3572569f>Vrifier les IDEL</span><span class="tile-desc" data-v-3572569f>Grer les documents pro</span></div>`,2)]]),U(`button`,{class:`action-tile`,onClick:t[7]||=e=>i.value=`detailed-requests`},[...t[42]||=[G(`<div class="tile-icon audit-icon" data-v-3572569f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" data-v-3572569f><line x1="12" y1="1" x2="12" y2="23" data-v-3572569f></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" data-v-3572569f></path></svg></div><div class="tile-content" data-v-3572569f><span class="tile-title" data-v-3572569f>Exporter l&#39;Audit</span><span class="tile-desc" data-v-3572569f>Rapport de facturation</span></div>`,2)]])])])])])):K(``,!0)])])]))}}),[[`__scopeId`,`data-v-3572569f`]]),MT={class:`page-wrapper`},NT={class:`form-container`},PT={class:`page-header`},FT={class:`form-row`},IT={class:`input-group`},LT={class:`input-group`},RT={class:`input-group`},zT={class:`form-row`},BT={class:`input-group`},VT={class:`input-group`},HT={key:0,class:`input-group fade-in`},UT=[`value`],WT={class:`input-group`},GT=Z(L({__name:`HelpRequestForm`,props:{initialService:{}},emits:[`navigate`,`submit`],setup(e,{emit:t}){let n=e,r=t,i=F({name:``,phone:``,address:``,serviceType:n.initialService||``,kineCareType:``,urgency:`medium`,description:``}),a=[`Rducation  la marche / dambulation`,`Massage et rducation antidouleur`,`Rducation membre`,`Renforcement musculaire`,`Mobilisation membre et rcupration`,`Kinsithrapie respiratoire`,`Drainage lymphatique`,`Traitement par ondes de choc`,`Rducation prino-sphcinterienne`,`Autres soins`],o=()=>{console.log(`Service request submitted:`,i.value),r(`submit`,i.value),r(`navigate`,`landing`)};return(e,t)=>(B(),V(`div`,MT,[U(`div`,NT,[U(`header`,PT,[U(`button`,{class:`btn-back`,onClick:t[0]||=e=>r(`navigate`,`landing`)},[...t[8]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`19`,y1:`12`,x2:`5`,y2:`12`}),U(`polyline`,{points:`12 19 5 12 12 5`})],-1),W(` Retour `,-1)]]),t[9]||=U(`h1`,{class:`page-title`},`Demander de l'aide mdicale`,-1),t[10]||=U(`p`,{class:`page-subtitle`},`Remplissez le formulaire ci-dessous pour contacter un professionnel dans votre rgion.`,-1)]),U(`form`,{onSubmit:Y(o,[`prevent`]),class:`booking-form`},[U(`div`,FT,[U(`div`,IT,[t[11]||=U(`label`,{for:`name`},`Nom complet`,-1),I(U(`input`,{"onUpdate:modelValue":t[1]||=e=>i.value.name=e,type:`text`,id:`name`,placeholder:`Jean Dupont`,class:`styled-input`,required:``},null,512),[[J,i.value.name]])]),U(`div`,LT,[t[12]||=U(`label`,{for:`phone`},`Numro de tlphone`,-1),I(U(`input`,{"onUpdate:modelValue":t[2]||=e=>i.value.phone=e,type:`tel`,id:`phone`,placeholder:`+33 6 00 00 00 00`,class:`styled-input`,required:``},null,512),[[J,i.value.phone]])])]),U(`div`,RT,[t[13]||=U(`label`,{for:`address`},`Adresse du service`,-1),I(U(`input`,{"onUpdate:modelValue":t[3]||=e=>i.value.address=e,type:`text`,id:`address`,placeholder:`123 Rue de Mdicale, Paris`,class:`styled-input`,required:``},null,512),[[J,i.value.address]])]),U(`div`,zT,[U(`div`,BT,[t[15]||=U(`label`,{for:`service`},`Type de service`,-1),I(U(`select`,{"onUpdate:modelValue":t[4]||=e=>i.value.serviceType=e,id:`service`,class:`styled-input`,required:``},[...t[14]||=[G(`<option value="" disabled data-v-251719c1>Slectionnez un service</option><option value="post-partum" data-v-251719c1>Soins post-partum</option><option value="wound" data-v-251719c1>Pansement</option><option value="medication" data-v-251719c1>Administration de mdicaments</option><option value="nursing" data-v-251719c1>Soins infirmiers gnraux</option><option value="kine" data-v-251719c1>Sance de Kinsithrapie</option>`,6)]],512),[[yo,i.value.serviceType]])]),U(`div`,VT,[t[17]||=U(`label`,{for:`urgency`},`Niveau d'urgence`,-1),I(U(`select`,{"onUpdate:modelValue":t[5]||=e=>i.value.urgency=e,id:`urgency`,class:`styled-input`},[...t[16]||=[U(`option`,{value:`low`},`Faible (Routine)`,-1),U(`option`,{value:`medium`},`Moyen (Aujourd'hui)`,-1),U(`option`,{value:`high`},`lev (Urgent)`,-1)]],512),[[yo,i.value.urgency]])])]),i.value.serviceType===`kine`?(B(),V(`div`,HT,[t[19]||=U(`label`,{for:`kineCare`},`De quel(s) soin(s) avez-vous besoin ?`,-1),I(U(`select`,{"onUpdate:modelValue":t[6]||=e=>i.value.kineCareType=e,id:`kineCare`,class:`styled-input`,required:``},[t[18]||=U(`option`,{value:``,disabled:``},`Slectionnez un soin`,-1),(B(),V(z,null,R(a,e=>U(`option`,{key:e,value:e},M(e),9,UT)),64))],512),[[yo,i.value.kineCareType]])])):K(``,!0),U(`div`,WT,[t[20]||=U(`label`,{for:`description`},`Dtails supplmentaires`,-1),I(U(`textarea`,{"onUpdate:modelValue":t[7]||=e=>i.value.description=e,id:`description`,rows:`4`,placeholder:`Dcrivez vos besoins...`,class:`styled-input`},null,512),[[J,i.value.description]])]),t[21]||=U(`div`,{class:`form-action`},[U(`button`,{type:`submit`,class:`submit-button`},`Envoyer la demande`)],-1)],32)])]))}}),[[`__scopeId`,`data-v-251719c1`]]),KT={class:`page-wrapper`},qT={class:`form-layout`},JT={class:`form-content-area`},YT={class:`step-container`},XT={key:0,class:`step-pane`},ZT={class:`step-title`},QT={class:`question-group`},$T={class:`radio-group-modern`},eE=[`value`],tE={class:`label-text`},nE={key:0,class:`plus-icon`},rE={key:1,class:`check-icon`},iE={key:1,class:`step-pane`},aE={class:`radio-group`},oE={key:2,class:`step-pane`},sE={class:`form-group`},cE={class:`form-row`},lE={class:`form-group`},uE={class:`form-group`},dE={key:3,class:`step-pane`},fE={class:`form-group`},pE={class:`form-group`},mE={class:`form-group`},hE={key:4,class:`step-pane`},gE={class:`summary-list`},_E={class:`summary-card-simple`},vE={class:`summary-item`},yE={class:`summary-val`},bE={key:0,class:`no-selection`},xE={key:1},SE={class:`summary-item`},CE={class:`summary-val`},wE={class:`summary-item`},TE={class:`summary-val`},EE={class:`summary-item`},DE={class:`summary-val`},OE={class:`summary-item`},kE={class:`summary-val`},AE={class:`form-footer`},jE={class:`stepper-sidebar`},ME={class:`stepper-track`},NE={class:`node-icon`},PE={key:0},FE={key:1},IE={class:`node-label`},LE=5,RE=Z({__name:`NurseBookingForm`,props:{service:{type:String,default:`infirmiere`}},emits:[`navigate`,`submit`],setup(e,{emit:t}){let n=e,r=t,i=F(1),a=[{id:1,title:`Choix des soins`},{id:2,title:`Ordonnance`},{id:3,title:`Lieu et date`},{id:4,title:`Patient`},{id:5,title:`Rcapitulatif`}],o=[`Pansement`,`Injection`,`Prise de sang`,`Ablation points de suture / agrafes`,`Aide  la toilette / habillage`,`Distribution et surveillance prise de mdicaments`,`Surveillance des constantes (tension, pouls, temprature...)`,`Surveillance glycmie / diabte`,`Soins de sonde / stomie`,`Perfusion`,`Chimiothrapie`,`Instillation de collyre`,`Dpistage Covid-19`,`Vaccination Covid-19`,`Suivi Patient Covid-19 (Suite diagnostic positif)`,`Autres soins`],s=[`Rducation  la marche / dambulation`,`Massage et rducation antidouleur`,`Rducation membre`,`Renforcement musculaire`,`Mobilisation membre et rcupration`,`Kinsithrapie respiratoire`,`Drainage lymphatique`,`Traitement par ondes de choc`,`Rducation prino-sphcinterienne`,`Autres soins`],c=[`Surveillance post-accouchement`,`Surveillance mdicale de la grossesse`,`Rducation prino-sphinctrienne`,`Prparation  la naissance et  la parentalit`,`Examen de fin de grossesse`,`Accouchement`,`Suivi gyncologique hors grossesse`,`Autres soins`],l=q(()=>n.service===`kine`?s:n.service===`sage-femme`?c:o);q(()=>l.value[0]);let u=q(()=>`De quel(s) soin(s) avez-vous besoin ?`),d=F({selectedSoins:[],hasOrdonnance:`oui`,address:``,date:``,time:``,patientName:``,patientPhone:``,patientEmail:``});q(()=>`${i.value/LE*100}%`);let f=()=>{i.value<LE?i.value++:r(`submit`,{...d.value,serviceType:n.service})},p=()=>{i.value>1?i.value--:r(`navigate`,`landing`)};return(e,t)=>(B(),V(`div`,KT,[U(`div`,qT,[U(`div`,JT,[U(`header`,{class:`page-header`},[U(`button`,{class:`btn-back`,onClick:p},[...t[9]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`line`,{x1:`19`,y1:`12`,x2:`5`,y2:`12`}),U(`polyline`,{points:`12 19 5 12 12 5`})],-1),W(` Revenir  l'tape prcdente `,-1)]])]),U(`div`,YT,[i.value===1?(B(),V(`div`,XT,[U(`h2`,ZT,M(u.value),1),U(`div`,QT,[U(`div`,$T,[(B(!0),V(z,null,R(l.value,e=>(B(),V(`label`,{key:e,class:j([`modern-checkbox`,{active:d.value.selectedSoins.includes(e)}])},[I(U(`input`,{type:`checkbox`,"onUpdate:modelValue":t[0]||=e=>d.value.selectedSoins=e,value:e,class:`hidden-input`},null,8,eE),[[go,d.value.selectedSoins]]),U(`span`,tE,M(e),1),d.value.selectedSoins.includes(e)?(B(),V(`span`,rE,``)):(B(),V(`span`,nE,`+`))],2))),128))])])])):K(``,!0),i.value===2?(B(),V(`div`,iE,[t[12]||=U(`h2`,{class:`step-title`},`Avez-vous une ordonnance ?`,-1),U(`div`,aE,[U(`label`,{class:j([`radio-item`,{active:d.value.hasOrdonnance===`oui`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[1]||=e=>d.value.hasOrdonnance=e,value:`oui`,class:`hidden-input`},null,512),[[vo,d.value.hasOrdonnance]]),t[10]||=W(` Oui `,-1)],2),U(`label`,{class:j([`radio-item`,{active:d.value.hasOrdonnance===`non`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[2]||=e=>d.value.hasOrdonnance=e,value:`non`,class:`hidden-input`},null,512),[[vo,d.value.hasOrdonnance]]),t[11]||=W(` Non `,-1)],2)])])):K(``,!0),i.value===3?(B(),V(`div`,oE,[t[16]||=U(`h2`,{class:`step-title`},`O et quand souhaitez-vous faire vos soins ?`,-1),U(`div`,sE,[t[13]||=U(`label`,null,`Adresse des soins`,-1),I(U(`input`,{type:`text`,"onUpdate:modelValue":t[3]||=e=>d.value.address=e,placeholder:`Ex: 123 Rue de Mdical, Paris`,class:`styled-input`},null,512),[[J,d.value.address]])]),U(`div`,cE,[U(`div`,lE,[t[14]||=U(`label`,null,`Date`,-1),I(U(`input`,{type:`date`,"onUpdate:modelValue":t[4]||=e=>d.value.date=e,class:`styled-input`},null,512),[[J,d.value.date]])]),U(`div`,uE,[t[15]||=U(`label`,null,`Heure prfre`,-1),I(U(`input`,{type:`time`,"onUpdate:modelValue":t[5]||=e=>d.value.time=e,class:`styled-input`},null,512),[[J,d.value.time]])])])])):K(``,!0),i.value===4?(B(),V(`div`,dE,[t[20]||=U(`h2`,{class:`step-title`},`Qui est le patient ?`,-1),U(`div`,fE,[t[17]||=U(`label`,null,`Nom complet`,-1),I(U(`input`,{type:`text`,"onUpdate:modelValue":t[6]||=e=>d.value.patientName=e,placeholder:`Jean Dupont`,class:`styled-input`},null,512),[[J,d.value.patientName]])]),U(`div`,pE,[t[18]||=U(`label`,null,`Numro de tlphone`,-1),I(U(`input`,{type:`tel`,"onUpdate:modelValue":t[7]||=e=>d.value.patientPhone=e,placeholder:`+33 6 ...`,class:`styled-input`},null,512),[[J,d.value.patientPhone]])]),U(`div`,mE,[t[19]||=U(`label`,null,`Adresse e-mail (optionnel)`,-1),I(U(`input`,{type:`email`,"onUpdate:modelValue":t[8]||=e=>d.value.patientEmail=e,placeholder:`jean.dupont@example.com`,class:`styled-input`},null,512),[[J,d.value.patientEmail]])])])):K(``,!0),i.value===5?(B(),V(`div`,hE,[t[26]||=U(`h2`,{class:`step-title`},`Rcapitulatif de votre demande`,-1),U(`div`,gE,[U(`div`,_E,[U(`div`,vE,[t[21]||=U(`strong`,null,`Soins demands:`,-1),U(`div`,yE,[d.value.selectedSoins.length===0?(B(),V(`span`,bE,`Aucun soin slectionn`)):(B(),V(`span`,xE,M(d.value.selectedSoins.join(`, `)),1))])]),U(`div`,SE,[t[22]||=U(`strong`,null,`Ordonnance:`,-1),U(`div`,CE,M(d.value.hasOrdonnance===`oui`?`Oui`:`Non`),1)]),U(`div`,wE,[t[23]||=U(`strong`,null,`Lieu:`,-1),U(`div`,TE,M(d.value.address),1)]),U(`div`,EE,[t[24]||=U(`strong`,null,`Date & Heure:`,-1),U(`div`,DE,M(d.value.date)+`  `+M(d.value.time),1)]),U(`div`,OE,[t[25]||=U(`strong`,null,`Patient:`,-1),U(`div`,kE,M(d.value.patientName)+` (`+M(d.value.patientPhone)+`)`,1)])])])])):K(``,!0)]),U(`div`,AE,[U(`button`,{class:`btn-next`,onClick:f},M(i.value===LE?`Confirmer la demande`:`Continuer`),1)])]),U(`aside`,jE,[U(`div`,ME,[(B(),V(z,null,R(a,e=>U(`div`,{key:e.id,class:j([`step-node`,{completed:i.value>e.id,active:i.value===e.id,pending:i.value<e.id}])},[U(`div`,NE,[i.value>e.id?(B(),V(`span`,PE,``)):(B(),V(`span`,FE,M(e.id),1))]),U(`div`,IE,M(e.title),1)],2)),64))])])])]))}},[[`__scopeId`,`data-v-ac4a8c62`]]),zE={class:`page`},BE={class:`layout`},VE={class:`content`},HE={class:`header`},UE={class:`header-text`},WE={class:`title`},GE={class:`subtitle`},KE={key:0,class:`state`},qE={key:0,class:`state error`,style:{"margin-bottom":`2rem`,padding:`1rem`,background:`#fff1f2`,border:`1px solid #fda4af`,"border-radius":`12px`,color:`#e11d48`,"font-weight":`700`}},JE={class:`mobile-stepper`},YE={key:0,class:`m-step-info`},XE={class:`m-steps-row`},ZE={key:1,class:`step-content`},QE={key:0,class:`saved-soins-list`},$E={class:`saved-soin-info`},eD={class:`saved-soin-name`},tD={class:`saved-soin-details`},nD=[`onClick`],rD={class:`soins-grid`},iD=[`onClick`],aD={class:`soin-header`},oD={class:`soin-name`},sD={key:0,class:`soin-checkmark`},cD={class:`soin-desc`},lD={class:`soin-cta`},uD={key:0},dD={key:1},fD={key:1,class:`step-actions`},pD={key:2,class:`step-content`},mD={class:`ordonnance-options`},hD={key:0,class:`info-box`},gD={key:1,class:`upload-section`},_D={class:`upload-area`},vD={class:`upload-hint`},yD={key:0,class:`file-list`},bD={class:`file-info`},xD={class:`file-name text-truncate`},SD=[`onClick`],CD={class:`step-actions`},wD=[`disabled`],TD={key:3,class:`step-content`},ED={class:`form-group mb-2`},DD={class:`label-with-action`},OD={key:0},kD=[`disabled`],AD={class:`form-group`},jD={class:`form-group`},MD={class:`duration-pills`},ND=[`value`],PD={key:0,class:`custom-duration-input mt-1`},FD={class:`form-group availabilities`},ID={key:1,class:`slot-card`},LD={class:`slot-card-header`},RD={class:`slot-title`},zD={class:`slider-wrapper`},BD={key:0,class:`dual-range-container`},VD=[`value`],HD=[`value`],UD={class:`step-actions`},WD=[`disabled`],GD={key:4,class:`step-content`},KD={class:`form-group`},qD={class:`civility-group`},JD={class:`form-row`},YD={class:`form-group`},XD={class:`form-group`},ZD={class:`form-group`},QD={class:`form-row`},$D={class:`form-group`},eO={class:`form-group`},tO={class:`form-group`},nO={class:`form-group`},rO={class:`form-group`},iO={class:`step-actions`},aO=[`disabled`],oO={key:5,class:`step-content`},sO={class:`summary-section`},cO={class:`summary-item`},lO={class:`summary-value`},uO={class:`summary-item`},dO={class:`summary-value`},fO={key:0,class:`summary-files`},pO={class:`summary-item`},mO={class:`summary-value`},hO={class:`summary-item`},gO={class:`summary-value`},_O={class:`summary-item`},vO={class:`summary-value`},yO={key:0},bO={class:`summary-item`},xO={class:`summary-value`},SO={key:0,class:`summary-item`},CO={class:`summary-value`},wO={key:1,class:`summary-total-card`},TO={class:`total-amount`},EO={class:`step-actions`},DO=[`disabled`],OO=[`disabled`],kO={key:0,class:`state error mt-1`},AO={key:2,class:`state`},jO={class:`stepper`},MO={class:`stepper-track`},NO={class:`node-icon`},PO={key:0},FO={key:1},IO={class:`node-label`},LO={class:`stepper-hint`},RO={key:0},zO={key:1},BO={key:2},VO={key:3},HO={key:4},UO={class:`modal`},WO={class:`modal-header`},GO={class:`modal-title`},KO={class:`modal-subtitle`},qO={class:`modal-body`},JO={class:`field-label`},YO={class:`choices`},XO=[`value`,`onUpdate:modelValue`],ZO={class:`field-label`},QO={class:`choices`},$O=[`name`,`value`,`onUpdate:modelValue`],ek={class:`field-label`},tk=[`onUpdate:modelValue`],nk=[`value`],rk={class:`field-label`},ik=[`onUpdate:modelValue`],ak={class:`field frequency-section`},ok={class:`frequency-options`},sk={key:0,class:`recurring-details`},ck={class:`frequency-grid`},lk={class:`frequency-subgroup`},uk={class:`pill-group`},dk=[`value`],fk={class:`frequency-subgroup`},pk={class:`pill-group`},mk=[`value`],hk=Z(L({__name:`ServiceSoinsPage`,props:{serviceId:{}},emits:[`navigate`,`save`],setup(e,{emit:t}){let n=e,r=t,i=F(!1),a=F(null),o=F([]),s=q(()=>o.value.find(e=>e.id===n.serviceId)??null),c=q(()=>s.value?.soins??[]),l=F(!1),u=F(null),d=F({}),f=F([]),p=F(1),m=[{id:1,title:`Voulez-vous ajouter un autre soin ?`},{id:2,title:`Avez-vous une ordonnance ?`},{id:3,title:`O et quand souhaitez-vous faire vos soins ?`},{id:4,title:`Qui est le patient ?`},{id:5,title:`Rcapitulatif de votre demande`}],h=F({hasOrdonnance:``,prescriptionFiles:[],address:``,isIndifferent:!1,startDate:`2026-01-23`,durationMode:`1`,customDuration:1,availabilitySlots:[],patientCivility:`Mme`,patientFirstname:``,patientLastname:``,patientBirthDate:``,patientPhone:``,patientPhoneConfirm:``,patientEmail:``,addressComplement:``,latitude:null,longitude:null}),g=()=>{h.value.availabilitySlots=[{start:`08:00`,end:`10:00`}]},_=()=>{h.value.availabilitySlots=[]},v=F(null),y=()=>{v.value?.click()},b=e=>{let t=e.target;if(t.files){let e=Array.from(t.files),n=e.filter(e=>e.size<=6*1024*1024);n.length<e.length&&alert(`Certains fichiers dpassent 6 Mo.`),h.value.prescriptionFiles.length+n.length>6?(alert(`Maximum 6 documents autoriss.`),h.value.prescriptionFiles.push(...n.slice(0,6-h.value.prescriptionFiles.length))):h.value.prescriptionFiles.push(...n)}},x=e=>{h.value.prescriptionFiles.splice(e,1)},S=e=>{let t={};for(let n of e.checkboxes??[])t[`checkbox:${n.id}`]=[];for(let n of e.radios??[])t[`radio:${n.id}`]=``;for(let n of e.dropdowns??[])t[`dropdown:${n.id}`]=``;for(let n of e.texts??[])t[`text:${n.id}`]=``;return t.visitType=`once`,t.frequencyCount=`1`,t.frequencyPeriod=`jour`,t},C=q(()=>u.value==null?null:c.value.find(e=>e.id===u.value)??null),w=async()=>{let e=localStorage.getItem(`access_token`);try{i.value=!0,a.value=null;let t={accept:`*/*`};e&&(t.Authorization=`Bearer ${e}`);let c=await fetch(`/api/services`,{headers:t});if(c.status===401){console.warn(`Unauthorized. Redirecting to login.`),r(`navigate`,`login`);return}if(!c.ok)throw Error(`Failed to fetch services (${c.status})`);o.value=await c.json(),console.log(` Services loaded in booking page:`,o.value.map(e=>`ID ${e.id}: ${e.name}`)),console.log(` Targeted Service ID:`,n.serviceId),s.value||console.warn(` Service not found for ID:`,n.serviceId)}catch(e){console.error(`Failed to fetch services:`,e),a.value=e?.message||`Impossible de charger les services.`}finally{i.value=!1}},ee=e=>{u.value=e;let t=c.value.find(t=>t.id===e);if(!t)return;let n=f.value.find(t=>t.soinId===e);n?d.value=n.answers:d.value=S(t),l.value=!0},T=()=>{l.value=!1,u.value=null},E=()=>{if(!C.value)return;let e={serviceId:n.serviceId,soinId:C.value.id,answers:d.value},t=f.value.findIndex(t=>t.soinId===e.soinId);t>=0?f.value[t]={soinId:e.soinId,answers:e.answers}:f.value.push({soinId:e.soinId,answers:e.answers}),r(`save`,e),T()},D=e=>{let t=f.value.find(t=>t.soinId===e);t&&(d.value=t.answers,ee(e))},te=e=>c.value.find(t=>t.id===e)?.name||`Soin`,O=e=>{let t=f.value.find(t=>t.soinId===e);if(!t)return``;let n=c.value.find(t=>t.id===e);if(!n)return``;let r=[];for(let[e,i]of Object.entries(t.answers)){let[t,a]=e.split(`:`);if(!a)continue;let o=parseInt(a);t===`checkbox`&&Array.isArray(i)&&i.length>0?n.checkboxes.find(e=>e.id===o)&&r.push(i.join(`, `)):t===`radio`&&i?n.radios.find(e=>e.id===o)&&r.push(i):t===`dropdown`&&i?n.dropdowns.find(e=>e.id===o)&&r.push(i):t===`text`&&i&&r.push(i)}if(t.answers.visitType===`recurring`){let e=t.answers.frequencyCount,n=t.answers.frequencyPeriod;r.push(`${e} fois / ${n}`)}else r.push(`Une seule fois`);return r.join(` / `)||``},ne=()=>{p.value<5&&p.value++},k=()=>{p.value>1&&p.value--},re=F(!1),ie=async()=>{if(!re.value)try{re.value=!0,a.value=null;let e=new FormData;e.append(`serviceId`,n.serviceId.toString()),e.append(`patientCivility`,h.value.patientCivility),e.append(`patientFirstname`,h.value.patientFirstname),e.append(`patientLastname`,h.value.patientLastname),e.append(`patientBirthdate`,h.value.patientBirthDate),e.append(`patientPhone`,h.value.patientPhone),h.value.patientEmail&&e.append(`patientEmail`,h.value.patientEmail),e.append(`address`,h.value.address),e.append(`addressComplement`,h.value.addressComplement||``),h.value.latitude!==null&&e.append(`latitude`,h.value.latitude.toString()),h.value.longitude!==null&&e.append(`longitude`,h.value.longitude.toString()),e.append(`isIndifferent`,h.value.isIndifferent.toString()),e.append(`startDate`,h.value.startDate),e.append(`durationMode`,h.value.durationMode===`long`?`long`:`fixed`);let t=0;t=h.value.durationMode===`long`?60:h.value.durationMode===`custom`?h.value.customDuration:parseInt(h.value.durationMode),e.append(`durationValue`,t.toString()),h.value.availabilitySlots&&h.value.availabilitySlots.length>0&&(e.append(`availabilityStart`,h.value.availabilitySlots[0]?.start||`08:00`),e.append(`availabilityEnd`,h.value.availabilitySlots[0]?.end||`10:00`));let i=h.value.hasOrdonnance===`none`?`pending`:`available`;e.append(`prescriptionStatus`,i);let o=f.value.map(e=>{let t={...e.answers},n=t.visitType||`once`,r=t.frequencyCount||`1`,i=t.frequencyPeriod||`jour`;return delete t.visitType,delete t.frequencyCount,delete t.frequencyPeriod,{soinId:e.soinId,answers:t,visitType:n,frequencyCount:parseInt(r),frequencyPeriod:i}});e.append(`soins`,JSON.stringify(o)),h.value.prescriptionFiles.forEach(t=>{e.append(`prescriptions`,t)});let s=localStorage.getItem(`access_token`),c={};s&&(c.Authorization=`Bearer ${s}`);let l=await fetch(`/api/bookings`,{method:`POST`,headers:c,body:e});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.message||`Submission failed with status ${l.status}`)}alert(`Votre demande de rendez-vous a t enregistre avec succs ! \nMontant total : ${ae.value} DT`),r(`navigate`,`landing`)}catch(e){console.error(`Submission error:`,e),a.value=`Une erreur est survenue lors de l'enregistrement de votre demande : `+e.message;let t=e.message.toLowerCase();(t.includes(`patient`)||t.includes(`email`)||t.includes(`phone`))&&(p.value=4)}finally{re.value=!1}},A=e=>f.value.some(t=>t.soinId===e),ae=q(()=>{let e=0,t=1;return t=h.value.durationMode===`long`?60:h.value.durationMode===`custom`?h.value.customDuration:parseInt(h.value.durationMode)||1,f.value.forEach(n=>{let r=c.value.find(e=>e.id===n.soinId);if(r&&r.price){let i=Number(n.answers.frequencyCount)||1;e+=r.price*i*t}}),e}),oe=e=>{let t=(e||`00:00`).split(`:`),n=Number(t[0]||0),r=Number(t[1]||0);return n*60+r},se=e=>{let t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,`0`)}:${n.toString().padStart(2,`0`)}`},ce=e=>oe(e)/1440*100,le=()=>{if(!navigator.geolocation){alert(`La golocalisation n'est pas supporte par votre navigateur.`);return}navigator.geolocation.getCurrentPosition(async e=>{let{latitude:t,longitude:n}=e.coords;console.log(`--- GPS DEBUG ---`),console.log(`Latitude:`,t),console.log(`Longitude:`,n),console.log(`------------------`);try{let e=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${n}&zoom=18&addressdetails=1`)).json();console.log(`Reverse Geocoding Result:`,e),e&&e.display_name?(h.value.address=e.display_name,h.value.latitude=t,h.value.longitude=n,console.log(`Address updated to:`,e.display_name),console.log(`Coordinates saved:`,{latitude:t,longitude:n})):alert(`Impossible de dterminer l'adresse exacte.`)}catch(e){console.error(`Geocoding error:`,e),alert(`Erreur lors de la rcupration de l'adresse.`)}},e=>{console.error(`Geolocation error:`,e);let t=`L'accs  la localisation a chou.`;e.code===e.PERMISSION_DENIED?t=`Veuillez autoriser l'accs au GPS pour utiliser cette fonctionnalit.`:e.code===e.TIMEOUT&&(t=`La demande de localisation a expir.`),alert(t)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},de=async()=>{`Notification`in window&&Notification.permission===`default`&&await Notification.requestPermission()};return hr(()=>{w(),de()}),(e,t)=>(B(),V(`div`,zE,[U(`div`,BE,[U(`div`,VE,[U(`header`,HE,[U(`button`,{class:`btn-back`,onClick:t[0]||=e=>r(`navigate`,`landing`)},` Retour`),U(`div`,UE,[U(`h1`,WE,M(s.value?.name||`Service`),1),U(`p`,GE,M(s.value?.description||`Choisissez un soin pour continuer.`),1)])]),i.value?(B(),V(`div`,KE,`Chargement`)):s.value?(B(),V(z,{key:1},[a.value?(B(),V(`div`,qE,M(a.value),1)):K(``,!0),U(`div`,JE,[(B(),V(z,null,R(m,e=>(B(),V(z,{key:`m-step-title-${e.id}`},[p.value===e.id?(B(),V(`div`,YE,M(e.title),1)):K(``,!0)],64))),64)),U(`div`,XE,[(B(),V(z,null,R(m,e=>U(`div`,{key:`m-step-bar-${e.id}`,class:j([`m-step`,{completed:p.value>e.id,active:p.value===e.id}])},null,2)),64))])]),p.value===1?(B(),V(`div`,ZE,[t[29]||=U(`h2`,{class:`step-question`},`Voulez-vous ajouter un autre soin ?`,-1),f.value.length>0?(B(),V(`div`,QE,[(B(!0),V(z,null,R(f.value,e=>(B(),V(`div`,{key:e.soinId,class:`saved-soin-item`},[U(`div`,$E,[U(`div`,eD,M(te(e.soinId)),1),U(`div`,tD,M(O(e.soinId)),1)]),U(`button`,{class:`btn-modify`,onClick:t=>D(e.soinId)},`Modifier`,8,nD)]))),128))])):K(``,!0),U(`div`,rD,[(B(!0),V(z,null,R(c.value,e=>(B(),V(`button`,{key:e.id,class:j([`soin-card`,{saved:A(e.id)}]),onClick:t=>ee(e.id)},[U(`div`,aD,[U(`div`,oD,M(e.name),1),A(e.id)?(B(),V(`div`,sD,[...t[28]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`3`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`20 6 9 17 4 12`})],-1)]])):K(``,!0)]),U(`div`,cD,M(e.description||``),1),U(`div`,lD,[A(e.id)?(B(),V(`span`,uD,`Dj ajout`)):(B(),V(`span`,dD,`Remplir le formulaire`))])],10,iD))),128))]),f.value.length>0?(B(),V(`div`,fD,[U(`button`,{class:`btn-primary`,onClick:ne},`Continuer`)])):K(``,!0)])):p.value===2?(B(),V(`div`,pD,[t[37]||=U(`div`,{class:`mandatory-notice`},`* champs obligatoires`,-1),t[38]||=U(`h2`,{class:`step-question`},`Avez-vous une ordonnance ? *`,-1),U(`div`,mD,[U(`label`,{class:j([`option-card`,{active:h.value.hasOrdonnance===`home-mention`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[1]||=e=>h.value.hasOrdonnance=e,value:`home-mention`,class:`hidden-input`},null,512),[[vo,h.value.hasOrdonnance]]),t[30]||=U(`div`,{class:`option-content`},[U(`div`,{class:`radio-circle`}),U(`span`,null,`Oui, avec mention  domicile`)],-1)],2),U(`label`,{class:j([`option-card`,{active:h.value.hasOrdonnance===`no-mention`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[2]||=e=>h.value.hasOrdonnance=e,value:`no-mention`,class:`hidden-input`},null,512),[[vo,h.value.hasOrdonnance]]),t[31]||=U(`div`,{class:`option-content`},[U(`div`,{class:`radio-circle`}),U(`span`,null,`Oui, sans mention`)],-1)],2),U(`label`,{class:j([`option-card`,{active:h.value.hasOrdonnance===`none`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[3]||=e=>h.value.hasOrdonnance=e,value:`none`,class:`hidden-input`},null,512),[[vo,h.value.hasOrdonnance]]),t[32]||=U(`div`,{class:`option-content`},[U(`div`,{class:`radio-circle`}),U(`span`,null,`Non`)],-1)],2)]),h.value.hasOrdonnance===`home-mention`?(B(),V(`div`,hD,[...t[33]||=[U(`div`,{class:`info-icon`},`i`,-1),U(`p`,null,`Si vous avez une ordonnance avec mention  domicile, lintervention et le dplacement seront pris en charge par la scurit sociale et votre mutuelle.`,-1)]])):K(``,!0),h.value.hasOrdonnance&&h.value.hasOrdonnance!==`none`?(B(),V(`div`,gD,[t[36]||=U(`h3`,{class:`upload-title`},`Ajoutez votre ordonnance si vous lavez  disposition (facultatif)`,-1),U(`div`,_D,[U(`input`,{type:`file`,ref_key:`fileInput`,ref:v,class:`hidden`,multiple:``,accept:`.jpg,.jpeg,.png,.pdf`,onChange:b},null,544),U(`button`,{class:`btn-upload`,onClick:y},[...t[34]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`}),U(`polyline`,{points:`17 8 12 3 7 8`}),U(`line`,{x1:`12`,y1:`3`,x2:`12`,y2:`15`})],-1),W(` Ajouter un document `,-1)]]),U(`p`,vD,M(h.value.prescriptionFiles.length)+`/6 document(s) - Au format JPG, PNG ou PDF - 6 Mo par fichier`,1)]),h.value.prescriptionFiles.length>0?(B(),V(`div`,yD,[(B(!0),V(z,null,R(h.value.prescriptionFiles,(e,n)=>(B(),V(`div`,{key:n,class:`file-item`},[U(`div`,bD,[t[35]||=U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),U(`polyline`,{points:`14 2 14 8 20 8`})],-1),U(`span`,xD,M(e.name),1)]),U(`button`,{class:`btn-remove-file`,onClick:e=>x(n)},``,8,SD)]))),128))])):K(``,!0)])):K(``,!0),U(`div`,CD,[U(`button`,{class:`btn-secondary`,onClick:k},`Prcdent`),U(`button`,{class:`btn-primary`,onClick:ne,disabled:!h.value.hasOrdonnance},`Continuer`,8,wD)])])):p.value===3?(B(),V(`div`,TD,[t[53]||=U(`div`,{class:`mandatory-notice`},`* champs obligatoires`,-1),t[54]||=U(`h2`,{class:`step-question`},`O et quand souhaitez-vous faire vos soins ?`,-1),U(`div`,ED,[U(`div`,DD,[t[40]||=U(`label`,null,`Lieu des soins`,-1),U(`button`,{class:j([`btn-text`,{active:h.value.isIndifferent}]),onClick:t[4]||=e=>h.value.isIndifferent=!h.value.isIndifferent},[U(`div`,{class:j([`check-box`,{checked:h.value.isIndifferent}])},[h.value.isIndifferent?(B(),V(`span`,OD,``)):K(``,!0)],2),t[39]||=W(` Indiffrent `,-1)],2)]),I(U(`input`,{"onUpdate:modelValue":t[5]||=e=>h.value.address=e,type:`text`,class:`form-input`,placeholder:`Ex: 123 Rue de Mdical, Paris`,disabled:h.value.isIndifferent},null,8,kD),[[J,h.value.address]])]),U(`div`,AD,[t[41]||=U(`label`,null,`Date de dbut des soins`,-1),I(U(`input`,{"onUpdate:modelValue":t[6]||=e=>h.value.startDate=e,type:`date`,class:`form-input`},null,512),[[J,h.value.startDate]])]),U(`div`,jD,[t[45]||=U(`label`,null,`Dure des soins (en jours) *`,-1),U(`div`,MD,[(B(),V(z,null,R([`1`,`7`,`10`,`15`,`30`],e=>U(`label`,{key:e,class:j([`pill-option`,{active:h.value.durationMode===e}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[7]||=e=>h.value.durationMode=e,value:e,class:`hidden`},null,8,ND),[[vo,h.value.durationMode]]),U(`span`,null,M(e)+` jour`+M(e===`1`?``:`s`),1)],2)),64)),U(`label`,{class:j([`pill-option`,{active:h.value.durationMode===`long`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[8]||=e=>h.value.durationMode=e,value:`long`,class:`hidden`},null,512),[[vo,h.value.durationMode]]),t[42]||=U(`span`,null,`Longue dure (60 jours ou +)`,-1)],2),U(`label`,{class:j([`pill-option`,{active:h.value.durationMode===`custom`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[9]||=e=>h.value.durationMode=e,value:`custom`,class:`hidden`},null,512),[[vo,h.value.durationMode]]),t[43]||=U(`span`,null,`Personnaliser la dure`,-1)],2)]),h.value.durationMode===`custom`?(B(),V(`div`,PD,[I(U(`input`,{"onUpdate:modelValue":t[10]||=e=>h.value.customDuration=e,type:`number`,min:`1`,class:`form-input mini`},null,512),[[J,h.value.customDuration]]),t[44]||=U(`span`,{class:`unit`},`jours`,-1)])):K(``,!0)]),U(`div`,FD,[t[51]||=U(`div`,{class:`label-row`},[U(`label`,null,`Disponibilits horaires *`)],-1),t[52]||=U(`div`,{class:`info-tag mb-1`},` Lheure de passage prcise sera  dfinir avec le professionnel de sant `,-1),h.value.availabilitySlots.length===0?(B(),V(`div`,{key:0,class:`add-slot-box`,onClick:g},[...t[46]||=[U(`div`,{class:`add-icon`},`+`,-1),U(`span`,null,`Ajouter un crneau de passage`,-1)]])):(B(),V(`div`,ID,[U(`div`,LD,[U(`div`,RD,[t[47]||=W(`Votre crneau : `,-1),U(`span`,null,M(h.value.availabilitySlots[0]?.start)+`  `+M(h.value.availabilitySlots[0]?.end),1)]),U(`button`,{class:`btn-delete`,onClick:_,title:`Supprimer`},[...t[48]||=[U(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2.5`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[U(`polyline`,{points:`3 6 5 6 21 6`}),U(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})],-1)]])]),U(`div`,zD,[t[50]||=U(`p`,{class:`slider-hint`},`Dlai dau moins 2 heures requis`,-1),h.value.availabilitySlots[0]?(B(),V(`div`,BD,[t[49]||=U(`div`,{class:`range-track`},null,-1),U(`div`,{class:`range-highlight`,style:ue({left:ce(h.value.availabilitySlots[0].start)+`%`,width:ce(h.value.availabilitySlots[0].end)-ce(h.value.availabilitySlots[0].start)+`%`})},null,4),U(`input`,{type:`range`,min:`0`,max:`1440`,step:`30`,value:oe(h.value.availabilitySlots[0].start),onInput:t[11]||=e=>{let t=Number(e.target.value);h.value.availabilitySlots[0]&&t<=oe(h.value.availabilitySlots[0].end)-120?h.value.availabilitySlots[0].start=se(t):h.value.availabilitySlots[0]&&(h.value.availabilitySlots[0].start=se(oe(h.value.availabilitySlots[0].end)-120))},class:`range-input start`},null,40,VD),U(`input`,{type:`range`,min:`0`,max:`1440`,step:`30`,value:oe(h.value.availabilitySlots[0].end),onInput:t[12]||=e=>{let t=Number(e.target.value);h.value.availabilitySlots[0]&&t>=oe(h.value.availabilitySlots[0].start)+120?h.value.availabilitySlots[0].end=se(t):h.value.availabilitySlots[0]&&(h.value.availabilitySlots[0].end=se(oe(h.value.availabilitySlots[0].start)+120))},class:`range-input end`},null,40,HD)])):K(``,!0)])]))]),U(`div`,UD,[U(`button`,{class:`btn-secondary`,onClick:k},`Prcdent`),U(`button`,{class:`btn-primary`,onClick:ne,disabled:!h.value.address&&!h.value.isIndifferent||!h.value.startDate||h.value.availabilitySlots.length===0},`Continuer`,8,WD)])])):p.value===4?(B(),V(`div`,GD,[t[69]||=U(`div`,{class:`mandatory-notice`},`* champs obligatoires`,-1),t[70]||=U(`h2`,{class:`step-question`},`Qui est le patient ?`,-1),t[71]||=U(`p`,{class:`step-instruction`},` Saisissez vos coordonnes afin quun professionnel de sant qualifi et disponible prenne contact avec vous pour convenir dun rendez-vous. `,-1),U(`div`,KD,[t[57]||=U(`label`,null,`Civilit *`,-1),U(`div`,qD,[U(`label`,{class:j([`civility-option`,{active:h.value.patientCivility===`Mme`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[13]||=e=>h.value.patientCivility=e,value:`Mme`,class:`hidden`},null,512),[[vo,h.value.patientCivility]]),t[55]||=U(`span`,null,`Madame`,-1)],2),U(`label`,{class:j([`civility-option`,{active:h.value.patientCivility===`M`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[14]||=e=>h.value.patientCivility=e,value:`M`,class:`hidden`},null,512),[[vo,h.value.patientCivility]]),t[56]||=U(`span`,null,`Monsieur`,-1)],2)])]),U(`div`,JD,[U(`div`,YD,[t[58]||=U(`label`,null,`Prnom *`,-1),I(U(`input`,{"onUpdate:modelValue":t[15]||=e=>h.value.patientFirstname=e,type:`text`,class:`form-input`,placeholder:`Ex: Jean`},null,512),[[J,h.value.patientFirstname]])]),U(`div`,XD,[t[59]||=U(`label`,null,`Nom *`,-1),I(U(`input`,{"onUpdate:modelValue":t[16]||=e=>h.value.patientLastname=e,type:`text`,class:`form-input`,placeholder:`Ex: Dupont`},null,512),[[J,h.value.patientLastname]])])]),U(`div`,ZD,[t[60]||=U(`label`,null,`Date de naissance *`,-1),I(U(`input`,{"onUpdate:modelValue":t[17]||=e=>h.value.patientBirthDate=e,type:`date`,class:`form-input`},null,512),[[J,h.value.patientBirthDate]])]),U(`div`,QD,[U(`div`,$D,[t[61]||=U(`label`,null,`Numro de tlphone *`,-1),I(U(`input`,{"onUpdate:modelValue":t[18]||=e=>h.value.patientPhone=e,type:`tel`,class:`form-input`,placeholder:`06 00 00 00 00`},null,512),[[J,h.value.patientPhone]]),t[62]||=U(`p`,{class:`field-hint`},`Le professionnel vous contactera sur ce numro pour convenir d'un rendez-vous`,-1)]),U(`div`,eO,[t[63]||=U(`label`,null,`Confirmez le tlphone *`,-1),I(U(`input`,{"onUpdate:modelValue":t[19]||=e=>h.value.patientPhoneConfirm=e,type:`tel`,class:`form-input`,placeholder:`06 00 00 00 00`},null,512),[[J,h.value.patientPhoneConfirm]])])]),U(`div`,tO,[t[64]||=U(`label`,null,`Email`,-1),I(U(`input`,{"onUpdate:modelValue":t[20]||=e=>h.value.patientEmail=e,type:`email`,class:`form-input`,placeholder:`email@exemple.com`},null,512),[[J,h.value.patientEmail]])]),U(`div`,nO,[U(`div`,{class:`label-row`},[t[65]||=U(`label`,null,`Adresse *`,-1),U(`button`,{class:`btn-link`,onClick:le},`Je ne trouve pas mon adresse`)]),I(U(`input`,{"onUpdate:modelValue":t[21]||=e=>h.value.address=e,type:`text`,class:`form-input`,placeholder:`Ex: 123 Rue de la Sant, Paris`},null,512),[[J,h.value.address]]),t[66]||=U(`p`,{class:`field-hint`},`Lieu o les soins  domicile seront raliss`,-1)]),U(`div`,rO,[t[67]||=U(`label`,null,`Complment d'adresse (facultatif)`,-1),I(U(`input`,{"onUpdate:modelValue":t[22]||=e=>h.value.addressComplement=e,type:`text`,class:`form-input`,placeholder:`Btiment, code, tage...`},null,512),[[J,h.value.addressComplement]]),t[68]||=U(`p`,{class:`field-hint`},`Indiquez les informations pour simplifier l'accs au lieu de rendez-vous (btiment, codes, tage, etc...)`,-1)]),U(`div`,iO,[U(`button`,{class:`btn-secondary`,onClick:k},`Prcdent`),U(`button`,{class:`btn-primary`,onClick:ne,disabled:!h.value.patientFirstname||!h.value.patientLastname||!h.value.patientBirthDate||!h.value.patientPhone||!h.value.address&&!h.value.isIndifferent},`Continuer`,8,aO)])])):p.value===5?(B(),V(`div`,oO,[t[84]||=U(`h2`,{class:`step-question`},`Rcapitulatif de votre demande`,-1),U(`div`,sO,[U(`div`,cO,[t[72]||=U(`strong`,null,`Soins demands:`,-1),U(`div`,lO,[(B(!0),V(z,null,R(f.value,e=>(B(),V(`div`,{key:e.soinId,class:`summary-soin`},M(te(e.soinId))+` - `+M(O(e.soinId)),1))),128))])]),U(`div`,uO,[t[73]||=U(`strong`,null,`Ordonnance:`,-1),U(`div`,dO,[W(M(h.value.hasOrdonnance===`home-mention`?`Oui, avec mention  domicile`:h.value.hasOrdonnance===`no-mention`?`Oui, sans mention`:`Non`)+` `,1),h.value.prescriptionFiles.length>0?(B(),V(`div`,fO,` (`+M(h.value.prescriptionFiles.length)+` document(s) joint(s)) `,1)):K(``,!0)])]),U(`div`,pO,[t[74]||=U(`strong`,null,`Lieu:`,-1),U(`div`,mO,M(h.value.isIndifferent?`Indiffrent`:h.value.address),1)]),U(`div`,hO,[t[75]||=U(`strong`,null,`Dbut & Dure:`,-1),U(`div`,gO,` Le `+M(h.value.startDate)+` pour `+M(h.value.durationMode===`custom`?h.value.customDuration:h.value.durationMode===`long`?`60+`:h.value.durationMode)+` jour(s) `,1)]),U(`div`,_O,[t[76]||=U(`strong`,null,`Disponibilit:`,-1),U(`div`,vO,[h.value.availabilitySlots.length>0?(B(),V(`div`,yO,M(h.value.availabilitySlots[0]?.start)+`  `+M(h.value.availabilitySlots[0]?.end),1)):K(``,!0)])]),U(`div`,bO,[t[80]||=U(`strong`,null,`Patient:`,-1),U(`div`,xO,[W(M(h.value.patientCivility)+` `+M(h.value.patientFirstname)+` `+M(h.value.patientLastname),1),t[77]||=U(`br`,null,null,-1),W(` N(e) le `+M(h.value.patientBirthDate),1),t[78]||=U(`br`,null,null,-1),W(` Tl: `+M(h.value.patientPhone),1),t[79]||=U(`br`,null,null,-1),W(` Email: `+M(h.value.patientEmail),1)])]),h.value.addressComplement?(B(),V(`div`,SO,[t[81]||=U(`strong`,null,`Complment d'adresse:`,-1),U(`div`,CO,M(h.value.addressComplement),1)])):K(``,!0),ae.value>0?(B(),V(`div`,wO,[t[82]||=U(`div`,{class:`total-label`},`Montant total estim`,-1),U(`div`,TO,M(ae.value)+` DT`,1),t[83]||=U(`p`,{class:`total-notice`},`Le paiement s'effectue directement auprs du professionnel de sant.`,-1)])):K(``,!0)]),U(`div`,EO,[U(`button`,{class:`btn-secondary`,onClick:k,disabled:re.value},`Prcdent`,8,DO),U(`button`,{class:`btn-primary`,onClick:ie,disabled:re.value},M(re.value?`Envoi en cours...`:`Confirmer la demande`),9,OO)]),a.value?(B(),V(`div`,kO,M(a.value),1)):K(``,!0)])):K(``,!0)],64)):(B(),V(`div`,AO,[t[85]||=U(`p`,null,`Dsol, ce service est introuvable ou n'existe plus.`,-1),U(`button`,{class:`btn-primary mt-1`,onClick:t[23]||=e=>r(`navigate`,`landing`)},`Retour  l'accueil`)]))]),U(`aside`,jO,[t[86]||=U(`div`,{class:`stepper-title`},`tapes`,-1),U(`div`,MO,[(B(),V(z,null,R(m,e=>U(`div`,{key:e.id,class:j([`step-node`,{completed:p.value>e.id,active:p.value===e.id}])},[U(`div`,NO,[p.value>e.id?(B(),V(`span`,PO,``)):(B(),V(`span`,FO,M(e.id),1))]),U(`div`,IO,M(e.title),1)],2)),64))]),U(`div`,LO,[p.value===1?(B(),V(`div`,RO,`Ajoutez un ou plusieurs soins, puis continuez.`)):p.value===2?(B(),V(`div`,zO,`Indiquez si vous avez une ordonnance.`)):p.value===3?(B(),V(`div`,BO,`Renseignez le lieu et la date des soins.`)):p.value===4?(B(),V(`div`,VO,`Indiquez les informations du patient.`)):(B(),V(`div`,HO,`Vrifiez votre rcapitulatif avant de confirmer.`))])])]),l.value?(B(),V(`div`,{key:0,class:`modal-overlay`,onClick:Y(T,[`self`])},[U(`div`,UO,[U(`div`,WO,[U(`div`,null,[U(`div`,GO,M(C.value?.name),1),U(`div`,KO,M(C.value?.description||`Renseignez les champs ci-dessous.`),1)]),U(`button`,{class:`btn-close`,onClick:T,"aria-label":`Fermer`},``)]),U(`div`,qO,[C.value?.checkboxes&&C.value.checkboxes.length>0?(B(!0),V(z,{key:0},R(C.value.checkboxes,e=>(B(),V(`div`,{key:`cb-${e.id}`,class:`field`},[U(`div`,JO,[W(M(e.name)+` `,1),t[87]||=U(`span`,{class:`badge`},`Multiple`,-1)]),U(`div`,YO,[(B(!0),V(z,null,R(e.choices,t=>(B(),V(`label`,{key:t,class:j([`pill`,{active:d.value[`checkbox:${e.id}`]?.includes(t)}])},[I(U(`input`,{type:`checkbox`,class:`hidden`,value:t,"onUpdate:modelValue":t=>d.value[`checkbox:${e.id}`]=t},null,8,XO),[[go,d.value[`checkbox:${e.id}`]]]),U(`span`,null,M(t),1)],2))),128))])]))),128)):K(``,!0),C.value?.radios&&C.value.radios.length>0?(B(!0),V(z,{key:1},R(C.value.radios,e=>(B(),V(`div`,{key:`rd-${e.id}`,class:`field`},[U(`div`,ZO,[W(M(e.name)+` `,1),t[88]||=U(`span`,{class:`badge`},`Unique`,-1)]),U(`div`,QO,[(B(!0),V(z,null,R(e.choices,t=>(B(),V(`label`,{key:t,class:j([`pill`,{active:d.value[`radio:${e.id}`]===t}])},[I(U(`input`,{type:`radio`,class:`hidden`,name:`radio-${e.id}`,value:t,"onUpdate:modelValue":t=>d.value[`radio:${e.id}`]=t},null,8,$O),[[vo,d.value[`radio:${e.id}`]]]),U(`span`,null,M(t),1)],2))),128))])]))),128)):K(``,!0),C.value?.dropdowns&&C.value.dropdowns.length>0?(B(!0),V(z,{key:2},R(C.value.dropdowns,e=>(B(),V(`div`,{key:`dr-${e.id}`,class:`field`},[U(`div`,ek,[W(M(e.name)+` `,1),t[89]||=U(`span`,{class:`badge`},`Liste`,-1)]),I(U(`select`,{"onUpdate:modelValue":t=>d.value[`dropdown:${e.id}`]=t,class:`select`},[t[90]||=U(`option`,{value:``,disabled:``},`Choisir`,-1),(B(!0),V(z,null,R(e.choices,e=>(B(),V(`option`,{key:e,value:e},M(e),9,nk))),128))],8,tk),[[yo,d.value[`dropdown:${e.id}`]]])]))),128)):K(``,!0),C.value?.texts&&C.value.texts.length>0?(B(!0),V(z,{key:3},R(C.value.texts,e=>(B(),V(`div`,{key:`tx-${e.id}`,class:`field`},[U(`div`,rk,[W(M(e.name)+` `,1),t[91]||=U(`span`,{class:`badge`},`Texte`,-1)]),I(U(`input`,{"onUpdate:modelValue":t=>d.value[`text:${e.id}`]=t,class:`input`,type:`text`,placeholder:`Votre rponse`},null,8,ik),[[J,d.value[`text:${e.id}`]]])]))),128)):K(``,!0),U(`div`,ak,[t[96]||=U(`div`,{class:`field-label`},`Le professionnel doit passer *`,-1),U(`div`,ok,[U(`label`,{class:j([`radio-card`,{active:d.value.visitType===`once`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[24]||=e=>d.value.visitType=e,value:`once`,class:`hidden`},null,512),[[vo,d.value.visitType]]),t[92]||=U(`div`,{class:`radio-content`},[U(`div`,{class:`radio-circle`}),U(`span`,null,`Une seule fois`)],-1)],2),U(`label`,{class:j([`radio-card`,{active:d.value.visitType===`recurring`}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[25]||=e=>d.value.visitType=e,value:`recurring`,class:`hidden`},null,512),[[vo,d.value.visitType]]),t[93]||=U(`div`,{class:`radio-content`},[U(`div`,{class:`radio-circle`}),U(`span`,null,`Soin rcurrent`)],-1)],2)]),d.value.visitType===`recurring`?(B(),V(`div`,sk,[U(`div`,ck,[U(`div`,lk,[t[94]||=U(`div`,{class:`mini-label`},`Nombre de passages`,-1),U(`div`,uk,[(B(),V(z,null,R([`1`,`2`,`3`],e=>U(`label`,{key:e,class:j([`mini-pill`,{active:d.value.frequencyCount===e}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[26]||=e=>d.value.frequencyCount=e,value:e,class:`hidden`},null,8,dk),[[vo,d.value.frequencyCount]]),U(`span`,null,M(e)+` fois`,1)],2)),64))])]),U(`div`,fk,[t[95]||=U(`div`,{class:`mini-label`},`Par *`,-1),U(`div`,pk,[(B(),V(z,null,R([`jour`,`semaine`,`mois`],e=>U(`label`,{key:e,class:j([`mini-pill`,{active:d.value.frequencyPeriod===e}])},[I(U(`input`,{type:`radio`,"onUpdate:modelValue":t[27]||=e=>d.value.frequencyPeriod=e,value:e,class:`hidden`},null,8,mk),[[vo,d.value.frequencyPeriod]]),U(`span`,null,M(e),1)],2)),64))])])])])):K(``,!0)])]),U(`div`,{class:`modal-footer`},[U(`button`,{class:`btn-secondary`,onClick:T},`Annuler`),U(`button`,{class:`btn-primary`,onClick:E},`Save`)])])])):K(``,!0)]))}}),[[`__scopeId`,`data-v-a91304d7`]]),gk={class:`service-selection-page`},_k={class:`container`},vk={key:0,class:`state-container`},yk={key:1,class:`state-container error`},bk={key:2,class:`services-grid`},xk=[`onClick`],Sk={class:`service-icon`},Ck={class:`service-info`},wk={class:`service-name`},Tk={class:`service-desc`},Ek={class:`footer`},Dk=Z(L({__name:`ServiceSelection`,emits:[`navigate`],setup(e,{emit:t}){let n=t,r=F([]),i=F(!1),a=F(null),o=async()=>{let e=localStorage.getItem(`access_token`);try{i.value=!0,a.value=null;let t={accept:`*/*`};e&&(t.Authorization=`Bearer ${e}`);let n=await fetch(`/api/services`,{headers:t});if(!n.ok)throw Error(`Failed to fetch services (${n.status})`);r.value=await n.json()}catch(e){console.error(`Failed to fetch services:`,e),a.value=e?.message||`Impossible de charger les services.`}finally{i.value=!1}},s=e=>{n(`navigate`,`service-soins`,e)};return hr(o),(e,t)=>(B(),V(`div`,gk,[U(`div`,_k,[t[3]||=U(`div`,{class:`header`},[U(`h1`,{class:`title`},`De quel professionnel avez-vous besoin ?`),U(`p`,{class:`subtitle`},`Slectionnez le type de service pour votre demande de soins  domicile.`)],-1),i.value?(B(),V(`div`,vk,[...t[1]||=[U(`div`,{class:`loader`},null,-1),U(`p`,null,`Chargement des services...`,-1)]])):a.value?(B(),V(`div`,yk,[U(`p`,null,M(a.value),1),U(`button`,{class:`btn-retry`,onClick:o},`Ressayer`)])):(B(),V(`div`,bk,[(B(!0),V(z,null,R(r.value,e=>(B(),V(`div`,{key:e.id,class:`service-card`,onClick:t=>s(e.id)},[U(`div`,Sk,[e.name.toLowerCase().includes(`infirm`)?(B(),V(z,{key:0},[W(``)],64)):e.name.toLowerCase().includes(`kin`)?(B(),V(z,{key:1},[W(``)],64)):e.name.toLowerCase().includes(`sage`)?(B(),V(z,{key:2},[W(``)],64)):(B(),V(z,{key:3},[W(``)],64))]),U(`div`,Ck,[U(`h2`,wk,M(e.name),1),U(`p`,Tk,M(e.description||`Soins professionnels  domicile`),1)]),t[2]||=U(`div`,{class:`service-arrow`},``,-1)],8,xk))),128))])),U(`div`,Ek,[U(`button`,{class:`btn-back`,onClick:t[0]||=e=>n(`navigate`,`landing`)},` Retour  l'accueil`)])])]))}}),[[`__scopeId`,`data-v-7ab5dd66`]]),Ok={class:`app-container`},kk=L({__name:`App`,setup(e){let t=F(`landing`),n=F(``),r=F(``),i=F(null),a=F([]);hr(()=>{let e=new URLSearchParams(window.location.search).get(`token`);if(window.location.pathname===`/reset-password`&&e){n.value=e,t.value=`reset-password`,window.history.replaceState({},document.title,`/`);return}let r=X.getItem(`access_token`),i=X.getItem(`user_role`),a=X.getItem(`user_status`);r&&i&&(a===`PENDING`?t.value=`verification`:i===`admin`?t.value=`admin-dashboard`:i===`professional`&&(t.value=`pro`))});let o=e=>{let t={id:Date.now(),clientName:e.name,type:e.serviceType||`Aide gnrale`,urgency:e.urgency,time:`A l'instant`,distance:`Calcul...`,description:e.description};a.value.unshift(t)};return(e,s)=>(B(),V(`div`,Ok,[t.value===`landing`||t.value===`service-soins`||t.value===`booking`||t.value===`nurse-booking`||t.value===`service-selection`?(B(),H(Ho,{key:0,onNavigate:s[0]||=(e,n)=>{t.value=e,n&&(r.value=n)}})):K(``,!0),U(`main`,null,[t.value===`landing`?(B(),H(wl,{key:0,onNavigate:s[1]||=(e,n)=>{t.value=e,n!=null&&(i.value=n)}})):t.value===`service-selection`?(B(),H(Dk,{key:1,onNavigate:s[2]||=(e,n)=>{t.value=e,n!=null&&(i.value=n)}})):t.value===`service-soins`?(B(),H(hk,{key:2,serviceId:i.value||0,onNavigate:s[3]||=e=>t.value=e,onSave:s[4]||=e=>{console.log(`Saved soin form:`,e)}},null,8,[`serviceId`])):t.value===`pro`?(B(),H(Lg,{key:3,requests:a.value,onNavigate:s[5]||=e=>t.value=e},null,8,[`requests`])):t.value===`admin-dashboard`?(B(),H(jT,{key:4,onNavigate:s[6]||=e=>t.value=e})):t.value===`booking`?(B(),H(GT,{key:5,initialService:r.value,onNavigate:s[7]||=e=>t.value=e,onSubmit:o},null,8,[`initialService`])):t.value===`nurse-booking`?(B(),H(RE,{key:6,service:r.value,onNavigate:s[8]||=e=>t.value=e,onSubmit:o},null,8,[`service`])):t.value===`signup`?(B(),H(Fs,{key:7,onNavigate:s[9]||=e=>t.value=e})):t.value===`forgot-password`?(B(),H(Js,{key:8,onNavigate:s[10]||=e=>t.value=e})):t.value===`reset-password`?(B(),H(fc,{key:9,token:n.value,onNavigate:s[11]||=e=>t.value=e},null,8,[`token`])):t.value===`verification`?(B(),H(fl,{key:10,onNavigate:s[12]||=e=>t.value=e})):(B(),H(ls,{key:11,onNavigate:s[13]||=e=>t.value=e}))])]))}});`serviceWorker`in navigator&&window.addEventListener(`load`,()=>{navigator.serviceWorker.register(`/sw.js`).then(e=>console.log(` Service Worker registered`,e)).catch(e=>console.error(` Service Worker registration failed`,e))}),No(kk).mount(`#app`);